<!DOCTYPE html>
<html lang="en" data-accent-color="amber" data-content_root="../">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Channels - Litestar Framework</title><link rel="shortcut icon" href="../_static/favicon.svg"/><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="CLI" href="cli.html" /><link rel="prev" title="Caching" href="caching.html" /><script>
    function setColorMode(t){let e=document.documentElement;e.setAttribute("data-color-mode",t);let a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,s=t;"auto"===t&&(s=a?"dark":"light"),"light"===s?(e.classList.remove("dark"),e.classList.add("light")):(e.classList.remove("light"),e.classList.add("dark"))}
    setColorMode(localStorage._theme||"auto");
  </script><link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=397bb51e" />
    <link rel="stylesheet" type="text/css" href="../_static/shibuya.css?v=76b6f612" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_paramlinks.css" />
    <link media="print" rel="stylesheet" type="text/css" href="../_static/print.css?v=20ff2c19" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css?v=50ea2f63" />
    <link rel="stylesheet" type="text/css" href="../_static/litestar-sphinx-theme.css?v=f8f74789" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --sy-f-text: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
  --sy-f-heading: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
}
</style>
    <meta property="og:type" content="website"/><meta property="og:title" content="Channels"/>
<meta name="twitter:card" content="summary"/>
<meta property="og:image" content="_static/logo-light.png"/>
  </head>
<body><div class="announcement">
    <div class="announcement-inner">
      <p>You are viewing the <bold>local</bold> version of the documentation. Click here to go to the latest version.</p>
      <button class="announcement-close" aria-label="Close announcement">
        <i class="i-lucide close"></i>
      </button>
    </div>
  </div><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <a class="sy-head-brand" href="/">
      <img class="light-logo" src="../_static/logo-light.png" alt="Litestar" height="28" loading="lazy" />
      <img class="dark-logo" src="../_static/logo-dark.png" alt="Litestar" height="28" loading="lazy" />
      <strong>Litestar</strong>
    </a>
    <div class="sy-head-nav" id="head-nav">
      <nav class="sy-head-links"><ul><li class="link"><a href="../index.html">Home</a></li>
      <li class="link"><button class="js-menu" type="button" id="nav-trigger-2" aria-controls="nav-children-2">
            <span>Community</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul id="nav-children-2" aria-labelledby="nav-trigger-2"><li><a href="../contribution-guide.html">
                <span>Contributing</span>
                <small>Learn how to contribute to the Litestar project</small>
              </a></li><li><a href="https://github.com/litestar-org/.github?tab=coc-ov-file">
                <span>Code of Conduct</span>
                <small>Review the etiquette for interacting with the Litestar community</small>
              </a></li><li><a href="https://github.com/litestar-org/.github?tab=coc-ov-file#security-ov-file">
                <span>Security</span>
                <small>Overview of Litestar's security protocols</small>
              </a></li></ul>
      </li>
      <li class="link"><button class="js-menu" type="button" id="nav-trigger-3" aria-controls="nav-children-3">
            <span>About</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul id="nav-children-3" aria-labelledby="nav-trigger-3"><li><a href="https://litestar.dev/about/organization">
                <span>Litestar Organization</span>
                <small>Details about the Litestar organization</small>
              </a></li><li><a href="https://litestar.dev/about/litestar-releases">
                <span>Releases</span>
                <small>Explore the release process, versioning, and deprecation policy for Litestar</small>
              </a></li></ul>
      </li>
      <li class="link"><button class="js-menu" type="button" id="nav-trigger-4" aria-controls="nav-children-4">
            <span>Release notes</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul id="nav-children-4" aria-labelledby="nav-trigger-4"><li><a href="../release-notes/whats-new-3.html">
                <span>What's new in 3.0</span>
                <small>Explore the new features in Litestar 3.0</small>
              </a></li><li><a href="../release-notes/changelog.html">
                <span>3.x Changelog</span>
                <small>All changes in the 3.x series</small>
              </a></li><li><a href="https://docs.litestar.dev/2/release-notes/changelog.html">
                <span>2.x Changelog</span>
                <small>All changes in the 2.x series</small>
              </a></li></ul>
      </li>
      <li class="link"><button class="js-menu" type="button" id="nav-trigger-5" aria-controls="nav-children-5">
            <span>Help</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul id="nav-children-5" aria-labelledby="nav-trigger-5"><li><a href="https://discord.gg/litestar">
                <span>Discord Help Forum</span>
                <small>Dedicated Discord help forum</small>
              </a></li><li><a href="https://github.com/orgs/litestar-org/discussions">
                <span>GitHub Discussions</span>
                <small>GitHub Discussions</small>
              </a></li><li><a href="https://stackoverflow.com/questions/tagged/litestar">
                <span>Stack Overflow</span>
                <small>We monitor the <code><b>litestar</b></code> tag on Stack Overflow</small>
              </a></li></ul>
      </li><li class="link">
          <a href="https://github.com/sponsors/Litestar-Org">
            <span>Sponsor</span></a>
        </li></ul></nav>
      <div class="sy-head-extra flex items-center print:hidden"><form class="searchbox flex items-center" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <kbd>/</kbd>
</form><div class="nav-versions">
    <button type="button" aria-label="Versions">
      <span class="md:hidden">Versions</span>
      <span class="hidden md:inline">main</span>
      <i class="i-lucide chevron-down"></i>
    </button>
    <div class="nav-versions-choices"><ul><li><a href="/latest">latest</a></li><li><a href="/main">v3 (development)</a></li><li><a href="/2">v2</a></li><li><a href="/1">v1</a></li></ul></div>
  </div><div class="sy-head-socials">
<a href="https://twitter.com/LitestarAPI" aria-label="X (Twitter)">
  <iconify-icon icon="prime:twitter"></iconify-icon>
</a>
  <a href="https://discord.gg/litestar" aria-label="Discord">
    <iconify-icon icon="simple-icons:discord"></iconify-icon>
  </a></div></div>
    </div>
    <div class="sy-head-actions flex items-center shrink-0 print:hidden"><button class="js-theme theme-switch flex items-center"
data-aria-auto="Switch to light color mode"
data-aria-light="Switch to dark color mode"
data-aria-dark="Switch to auto color mode">
<i class="i-lucide theme-icon"></i>
</button><button class="md:hidden flex items-center js-menu" aria-label="Menu" type="button" aria-controls="head-nav" aria-expanded="false">
        <div class="hamburger">
          <span class="hamburger_1"></span>
          <span class="hamburger_2 -translate-x-2"></span>
          <span class="hamburger_3 -translate-x-1"></span>
        </div>
      </button>
    </div>
  </div>
</div>
<div class="sy-page sy-container flex mx-auto">
  <aside id="lside" class="sy-lside md:w-72 md:shrink-0 print:hidden">
    <div class="sy-lside-inner md:sticky">
      <div class="sy-scrollbar p-6"><div class="sidebar-links">
  <ul>
    <li><a class="icon-link" href="https://github.com/orgs/litestar-org/discussions">
  <span class="icon">
    <svg viewBox="0 0 24 24" fill="none">
      <path fill="var(--accent-9)" fill-rule="evenodd" clip-rule="evenodd" d="M11 5a6 6 0 0 0-4.687 9.746c.215.27.315.62.231.954l-.514 2.058a1 1 0 0 0 1.485 1.1l2.848-1.71c.174-.104.374-.15.576-.148H13a6 6 0 0 0 0-12h-2Z"/>
      <circle fill="white" cx="12" cy="11" r="1"/>
      <circle fill="white" cx="9" cy="11" r="1"/>
      <circle fill="white" cx="15" cy="11" r="1"/>
    </svg>
  </span>
  <span class="text">Discussion</span>
</a></li>
  </ul>
</div>
        <div class="globaltoc" data-expand-depth="0"><p class="caption" role="heading" aria-level="3"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Usage</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="applications.html">Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="routing/index.html">Routing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="routing/overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="routing/handlers.html">Route handlers</a></li>
<li class="toctree-l3"><a class="reference internal" href="routing/parameters.html">Parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="requests.html">Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="caching.html">Caching</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html">CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="databases/index.html">Databases</a><ul>
<li class="toctree-l3"><a class="reference internal" href="databases/sqlalchemy/index.html">SQLAlchemy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="databases/sqlalchemy/models_and_repository.html">SQLAlchemy Models &amp; Repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="databases/sqlalchemy/plugins/index.html">Plugins</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="databases/piccolo.html">Piccolo ORM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="dependency-injection.html">Dependency Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="dto/index.html">Data Transfer Object (DTO)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="dto/0-basic-use.html">Basic Use</a></li>
<li class="toctree-l3"><a class="reference internal" href="dto/1-abstract-dto.html">AbstractDTO</a></li>
<li class="toctree-l3"><a class="reference internal" href="dto/2-creating-custom-dto-classes.html">Implementing Custom DTO Classes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="events.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="exceptions.html">Exceptions and exception handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="file_systems.html">File Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="htmx.html">HTMX</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifecycle-hooks.html">Life Cycle Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="metrics/index.html">Metrics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="metrics/open-telemetry.html">OpenTelemetry</a></li>
<li class="toctree-l3"><a class="reference internal" href="metrics/prometheus.html">Prometheus</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="middleware/index.html">Middleware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="middleware/using-middleware.html">Using Middleware</a></li>
<li class="toctree-l3"><a class="reference internal" href="middleware/builtin-middleware.html">Built-in middleware</a></li>
<li class="toctree-l3"><a class="reference internal" href="middleware/creating-middleware.html">Creating Middleware</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="openapi/index.html">OpenAPI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="openapi/schema_generation.html">Configuring schema generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/schema_generation.html#configuring-schema-generation-on-a-route-handler">Configuring schema generation on a route handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/schema_generation.html#accessing-the-openapi-schema-in-code">Accessing the OpenAPI schema in code</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/schema_generation.html#customizing-pydantic-model-schemas">Customizing Pydantic model schemas</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/schema_generation.html#customizing-operation-class">Customizing <code class="docutils literal notranslate"><span class="pre">Operation</span></code> class</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/schema_generation.html#generating-examples">Generating examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/ui_plugins.html">OpenAPI UI Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/ui_plugins.html#using-openapi-ui-plugins">Using OpenAPI UI Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/ui_plugins.html#configuring-openapi-ui-plugins">Configuring OpenAPI UI Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/ui_plugins.html#configuring-the-openapi-root-path">Configuring the OpenAPI Root Path</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/ui_plugins.html#building-your-own-openapi-ui-plugin">Building your own OpenAPI UI Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/ui_plugins.html#interacting-with-the-router">Interacting with the <code class="docutils literal notranslate"><span class="pre">Router</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/ui_plugins.html#oauth2-in-swagger-ui">OAuth2 in Swagger UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/ui_plugins.html#customizing-the-openapi-ui">Customizing the OpenAPI UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/ui_plugins.html#cdn-and-offline-file-support">CDN and offline file support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="plugins/index.html">Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="plugins/flash_messages.html">Flash Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugins/problem_details.html">Problem Details</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="responses.html">Responses</a></li>
<li class="toctree-l2"><a class="reference internal" href="security/index.html">Security</a><ul>
<li class="toctree-l3"><a class="reference internal" href="security/abstract-authentication-middleware.html">Implementing Custom Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="security/security-backends.html">Security Backends</a></li>
<li class="toctree-l3"><a class="reference internal" href="security/guards.html">Guards</a></li>
<li class="toctree-l3"><a class="reference internal" href="security/excluding-and-including-endpoints.html">Excluding and including endpoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="security/jwt.html">JWT Security Backends</a></li>
<li class="toctree-l3"><a class="reference internal" href="security/secret-datastructures.html">Handling Secrets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="static-files.html">Static files</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom-types.html">Custom types</a></li>
<li class="toctree-l2"><a class="reference internal" href="stores.html">Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="templating.html">Templating</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="websockets.html">WebSockets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/app.html">app</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/background_tasks.html">background_tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/channels/index.html">channels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/channels/plugin.html">plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/channels/subscriber.html">subscriber</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/channels/backends/index.html">backends</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/channels/backends/base.html">base</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/channels/backends/memory.html">memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/channels/backends/redis.html">redis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/channels/backends/psycopg.html">psycopg</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/channels/backends/asyncpg.html">asyncpg</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/cli.html">cli</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/config.html">config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/connection.html">connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/contrib/index.html">contrib</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/htmx.html">HTMX</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/jinja.html">jinja</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/mako.html">mako</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/opentelemetry.html">opentelemetry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/piccolo.html">piccolo_orm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/sqlalchemy/index.html">sqlalchemy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/sqlalchemy/plugins.html">plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/sqlalchemy/repository.html">repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/sqlalchemy/types.html">types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/sqlalchemy/base.html">base</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/sqlalchemy/dto.html">DTO</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controller.html">controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/concurrency.html">concurrency</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/data_extractors.html">data_extractors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/datastructures/index.html">datastructures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/datastructures/secret_values.html">secret_values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/di.html">di</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/dto/index.html">dto</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/config.html">config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/data_structures.html">data_structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/field.html">field</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/types.html">types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/base_dto.html">base_dto</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/msgspec_dto.html">msgspec_dto</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/dataclass_dto.html">dataclass_dto</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/enums.html">enums</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/events.html">events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/exceptions.html">exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/file_system.html">file_system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/handlers.html">handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/logging/index.html">logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/logging/config.html">config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/logging/picologging.html">picologging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/logging/standard.html">standard</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/middleware/index.html">middleware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/allowed_hosts.html">allowed_hosts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/authentication.html">authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/compression.html">compression</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/csrf.html">csrf</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/logging.html">logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/rate_limit.html">rate_limit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/session/index.html">session</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/middleware/session/base.html">base</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/middleware/session/client_side.html">client_side</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/middleware/session/server_side.html">server_side</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/constraints.html">constraints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/openapi/index.html">openapi</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/openapi/openapi.html">openapi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/openapi/plugins.html">plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/openapi/spec.html">spec</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/pagination.html">pagination</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/params.html">params</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/plugins/index.html">plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/plugins/attrs.html">attrs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/plugins/flash_messages.html">flash</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/plugins/htmx.html">htmx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/plugins/problem_details.html">problem details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/plugins/prometheus.html">prometheus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/plugins/pydantic.html">pydantic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/plugins/structlog.html">structlog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/plugins/sqlalchemy.html">sqlalchemy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/repository/index.html">repository</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/repository/abc.html">abc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/repository/filters.html">filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/repository/exceptions.html">exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/repository/testing.html">testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/repository/handlers.html">handlers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/response/index.html">response</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/response/base.html">base</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/response/file.html">file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/response/redirect.html">redirect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/response/streaming.html">streaming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/response/sse.html">SSE (Server Sent Events)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/response/template.html">template</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/router.html">router</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/routes.html">routes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/security/index.html">security</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/security/jwt.html">jwt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/security/session_auth.html">session_auth</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/serialization.html">serialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/static_files.html">static_files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/status_codes.html">status_code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/stores/index.html">stores</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/stores/base.html">base</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/stores/file.html">file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/stores/memory.html">memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/stores/redis.html">redis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/stores/registry.html">registry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/stores/valkey.html">valkey</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/template.html">template</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/testing.html">testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/types.html">types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/typing.html">typing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../benchmarks.html">Benchmarks</a></li>
</ul>
<p class="caption" role="heading" aria-level="3"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../migration/index.html">Migrating to Litestar</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../migration/flask.html">From Flask</a></li>
<li class="toctree-l2"><a class="reference internal" href="../migration/fastapi.html">From Starlette / FastAPI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../topics/index.html">Topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../topics/sync-vs-async.html">Sync vs. Async</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/deployment/index.html">Deployment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/deployment/nginx-unit.html">NGINX Unit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/deployment/manually-with-asgi-server.html">Manually with ASGI server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/deployment/docker.html">Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/deployment/supervisor.html">Supervisor (Linux)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/todo-app/index.html">Developing a basic TODO application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/todo-app/0-application-basics.html">Application basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/todo-app/1-accessing-the-list.html">Accessing the list</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/todo-app/2-interacting-with-the-list.html">Making the list interactive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/todo-app/3-assembling-the-app.html">Recap and assembling the final application</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/sqlalchemy/index.html">Improving the TODO app with SQLAlchemy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/sqlalchemy/0-introduction.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/sqlalchemy/1-provide-session-with-di.html">Providing the session with DI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/sqlalchemy/2-serialization-plugin.html">Using the serialization plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/sqlalchemy/3-init-plugin.html">Using the init plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/sqlalchemy/4-final-touches-and-recap.html">Final touches and recap</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/dto-tutorial/index.html">Data Transfer Object Tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/01-simple-dto-exclude.html">Our first DTO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/02-nested-exclude.html">Excluding from nested models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/03-nested-collection-exclude.html">Excluding from collections of nested models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/04-max-nested-depth.html">Max nested depth</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/05-renaming-fields.html">Renaming fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/06-receiving-data.html">Receiving data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/07-read-only-fields.html">Read only fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/08-dto-data.html">Accessing the data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/09-updating.html">Updating instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/10-layered-dto-declarations.html">Declaring DTOs on app layers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/repository-tutorial/index.html">SQLAlchemy Repository Tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/01-modelling-and-features.html">Introduction to Database Modelling and Repository Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/01-modelling-and-features.html#modelling">Modelling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/01-modelling-and-features.html#full-code">Full Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/02-repository-introduction.html">Interacting with repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/02-repository-introduction.html#working-with-bulk-data-operations">Working with Bulk Data Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/02-repository-introduction.html#full-code">Full Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/03-repository-controller.html">Working with Controllers and Repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/03-repository-controller.html#full-code">Full Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/04-repository-other.html">Adding Additional Features to the Repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/04-repository-other.html#slug-fields">Slug Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/04-repository-other.html#full-code">Full Code</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading" aria-level="3"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contribution-guide.html">Contribution Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/search?q=user%3Alitestar-org+state%3Aopen+label%3A%22good+first+issue%22+++no%3Aassignee+&amp;type=issues=">Available Issues</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/litestar-org/.github?tab=coc-ov-file#readme">Code of Conduct</a></li>
</ul>

        </div>
      </div>
    </div>
  </aside>
  <div class="lside-overlay js-menu" role="button" aria-label="Close left sidebar" aria-controls="lside" aria-expanded="false"></div>
  <aside id="rside" class="sy-rside pb-3 w-64 shrink-0 order-last">
    <button class="rside-close js-menu xl:hidden" aria-label="Close Table of Contents" type="button" aria-controls="rside" aria-expanded="false">
      <i class="i-lucide close"></i>
    </button>
    <div class="sy-scrollbar sy-rside-inner px-6 xl:top-16 xl:sticky xl:pl-0 pt-6 pb-4"><div class="localtoc"><h3>On this page</h3><ul>
<li><a class="reference internal" href="#basic-concepts">Basic concepts</a><ul>
<li><a class="reference internal" href="#glossary">Glossary</a></li>
<li><a class="reference internal" href="#flowcharts">Flowcharts</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-channelsplugin">The <code class="xref py py-class docutils literal notranslate"><span class="pre">ChannelsPlugin</span></code></a><ul>
<li><a class="reference internal" href="#configuring-the-channels">Configuring the <span class="xref std std-term">channels</span></a></li>
<li><a class="reference internal" href="#publishing-data">Publishing data</a></li>
<li><a class="reference internal" href="#managing-subscriptions">Managing <span class="xref std std-term">subscriptions</span></a></li>
<li><a class="reference internal" href="#managing-history">Managing <span class="xref std std-term">history</span></a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-subscriber">The <code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code></a><ul>
<li><a class="reference internal" href="#consuming-the-event-stream">Consuming the <span class="xref std std-term">event stream</span></a></li>
</ul>
</li>
<li><a class="reference internal" href="#managing-backpressure">Managing <span class="xref std std-term">backpressure</span></a></li>
<li><a class="reference internal" href="#backends">Backends</a></li>
<li><a class="reference internal" href="#integrating-with-websocket-handlers">Integrating with websocket handlers</a><ul>
<li><a class="reference internal" href="#generating-route-handlers">Generating route handlers</a></li>
</ul>
</li>
</ul>
</div><a class="js-repo-stats repo-stats flex items-center" href="https://github.com/litestar-org/litestar"
  data-type="github" data-user="litestar-org" data-repo="litestar">
  <span class="w-8 flex items-center justify-around shrink-0 text-3xl">
    <iconify-icon icon="simple-icons:github"></iconify-icon>
  </span>
  <span class="flex-grow px-2 break-all">
    <span>litestar-org/litestar</span>
    <span class="flex text-sm repo-stats-count">
      <span class="flex items-center pr-3">
        <iconify-icon icon="lucide:star"></iconify-icon>
        <strong class="js-repo-stars ml-1">0</strong>
      </span>
      <span class="flex items-center">
        <iconify-icon icon="lucide:git-fork"></iconify-icon>
        <strong class="js-repo-forks ml-1">0</strong>
      </span>
    </span>
  </span>
</a><div class="edit-this-page">
  <a href="https://github.com/litestar-org/litestar/blob/main/docs/usage/channels.rst">Edit this page</a>
</div><div id="ethical-ad-placement" data-ea-publisher="readthedocs"></div></div>
  </aside>
  <div class="rside-overlay js-menu" role="button" aria-label="Close Table of Contents" aria-controls="rside" aria-expanded="false"></div>
  <main class="sy-main w-full max-sm:max-w-full print:pt-6">
<div class="sy-breadcrumbs" role="navigation">
  <div class="sy-breadcrumbs-inner flex items-center">
    <div class="md:hidden mr-3">
      <button class="js-menu" aria-label="Menu" type="button" aria-controls="lside" aria-expanded="false">
        <i class="i-lucide menu"></i>
      </button>
    </div>
    <ol class="flex-1" itemscope itemtype="https://schema.org/BreadcrumbList"><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="../index.html"><span itemprop="name">Litestar</span></a>
        <span>/</span>
        <meta itemprop="position" content="1" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="index.html"><span itemprop="name">Usage</span></a>
        <span>/</span>
        <meta itemprop="position" content="2" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <strong itemprop="name">Channels</strong>
        <meta itemprop="position" content="3" />
      </li></ol>
    <div class="xl:hidden ml-1">
      <button class="js-menu" aria-label="Show table of contents" type="button" aria-controls="rside"
        aria-expanded="false">
        <i class="i-lucide outdent"></i>
      </button>
    </div>
  </div>
</div><div class="flex flex-col break-words justify-between">
      <div class="min-w-0 max-w-6xl px-6 pb-6 pt-8 xl:px-12">
        <article class="yue" role="main">
          <section id="channels">
<h1>Channels<a class="headerlink" href="#channels" title="Link to this heading">¶</a></h1>
<p><strong>Channels</strong> are a group of related functionalities, built to facilitate the routing
of event streams, which for example can be used to broadcast messages to WebSocket
clients.</p>
<p>Channels provide:</p>
<ol class="arabic simple">
<li><p>Independent <a class="reference internal" href="#term-broker"><span class="xref std std-term">broker</span></a> backends, optionally handling inter-process communication
and data persistence on demand</p></li>
<li><p>“Channel” based <a class="reference internal" href="#term-subscription"><span class="xref std std-term">subscription</span></a> management</p></li>
<li><p>Subscriber objects as an abstraction over an individualized <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event stream</span></a>,
providing background workers and managed subscriptions</p></li>
<li><p>Synchronous and asynchronous data publishing</p></li>
<li><p>Optional <a class="reference internal" href="#term-history"><span class="xref std std-term">history</span></a> management on a per-<a class="reference internal" href="#term-channel"><span class="xref std std-term">channel</span></a> basis</p></li>
<li><p><a class="reference internal" href="websockets.html"><span class="doc">WebSocket</span></a> integration, generating WebSocket route
handlers for an application, to handle the <a class="reference internal" href="#term-subscription"><span class="xref std std-term">subscription</span></a> and publishing of incoming
events to the connected client</p></li>
</ol>
<section id="basic-concepts">
<h2>Basic concepts<a class="headerlink" href="#basic-concepts" title="Link to this heading">¶</a></h2>
<p>Utilizing Channels involves a few moving parts. To better familiarize with the concepts,
terminology, and the flow of data, the following glossary and flowcharts are provided</p>
<section id="glossary">
<h3>Glossary<a class="headerlink" href="#glossary" title="Link to this heading">¶</a></h3>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Click to toggle the glossary</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<dl class="simple glossary">
<dt id="term-event">event<a class="headerlink" href="#term-event" title="Link to this term">¶</a></dt><dd><p class="sd-card-text">A single piece of data published to, or received from a <a class="reference internal" href="#term-backend"><span class="xref std std-term">backend</span></a> bound
to the <a class="reference internal" href="#term-channel"><span class="xref std std-term">channel</span></a> it was originally published to</p>
</dd>
<dt id="term-event-stream">event stream<a class="headerlink" href="#term-event-stream" title="Link to this term">¶</a></dt><dd><p class="sd-card-text">A stream of <a class="reference internal" href="#term-event"><span class="xref std std-term">events</span></a>, consisting of events from all the channels a
<a class="reference internal" href="#term-subscriber"><span class="xref std std-term">Subscriber</span></a> has previously subscribed to</p>
</dd>
<dt id="term-subscriber">subscriber<a class="headerlink" href="#term-subscriber" title="Link to this term">¶</a></dt><dd><p class="sd-card-text">A <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber" title="litestar.channels.subscriber.Subscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code></a>: An object wrapping an
<a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event stream</span></a> and providing access to it through various methods</p>
</dd>
<dt id="term-backend">backend<a class="headerlink" href="#term-backend" title="Link to this term">¶</a></dt><dd><p class="sd-card-text">A <a class="reference internal" href="../reference/channels/backends/base.html#litestar.channels.backends.base.ChannelsBackend" title="litestar.channels.backends.base.ChannelsBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChannelsBackend</span></code></a>. This object
manages communication between the plugin and the <a class="reference internal" href="#term-broker"><span class="xref std std-term">broker</span></a>, publishing
messages to and receiving messages from it. Each plugin instance is associated
with exactly one backend.</p>
</dd>
<dt id="term-broker">broker<a class="headerlink" href="#term-broker" title="Link to this term">¶</a></dt><dd><p class="sd-card-text">Responsible for receiving and publishing messages to all connected
<a class="reference internal" href="#term-backend"><span class="xref std std-term">backends</span></a>; All backends sharing the same broker will have
access to the same messages, allowing for inter-process communication. This is
typically handled by a separate entity like <a class="reference external" href="https://redis.io/">Redis</a></p>
</dd>
<dt id="term-plugin">plugin<a class="headerlink" href="#term-plugin" title="Link to this term">¶</a></dt><dd><p class="sd-card-text">The <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin" title="litestar.channels.plugin.ChannelsPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChannelsPlugin</span></code></a>, a central instance
managing <a class="reference internal" href="#term-subscriber"><span class="xref std std-term">subscribers</span></a>, reading messages from the
<a class="reference internal" href="#term-backend"><span class="xref std std-term">backend</span></a>, putting them in the appropriate <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event stream</span></a>, and
publishing data to the backend</p>
</dd>
<dt id="term-channel">channel<a class="headerlink" href="#term-channel" title="Link to this term">¶</a></dt><dd><p class="sd-card-text">A named group of subscribers, to which data can be published. Subscribers can
subscribe to multiple channels, and channels can have multiple subscribers</p>
</dd>
<dt id="term-subscription">subscription<a class="headerlink" href="#term-subscription" title="Link to this term">¶</a></dt><dd><p class="sd-card-text">A connection between a <a class="reference internal" href="#term-subscriber"><span class="xref std std-term">subscriber</span></a> and a <a class="reference internal" href="#term-channel"><span class="xref std std-term">channel</span></a>, allowing the
subscriber to receive events from the channel</p>
</dd>
<dt id="term-backpressure">backpressure<a class="headerlink" href="#term-backpressure" title="Link to this term">¶</a></dt><dd><p class="sd-card-text">A mechanism to prevent the backlog of a <a class="reference internal" href="#term-subscriber"><span class="xref std std-term">subscriber</span></a> from growing
indefinitely, by either dropping new messages or evicting old ones</p>
</dd>
<dt id="term-history">history<a class="headerlink" href="#term-history" title="Link to this term">¶</a></dt><dd><p class="sd-card-text">A set of previously published <a class="reference internal" href="#term-event"><span class="xref std std-term">events</span></a>, stored by the <a class="reference internal" href="#term-backend"><span class="xref std std-term">backend</span></a>
and available to be pushed to a <a class="reference internal" href="#term-subscriber"><span class="xref std std-term">subscriber</span></a></p>
</dd>
<dt id="term-fanout">fanout<a class="headerlink" href="#term-fanout" title="Link to this term">¶</a></dt><dd><p class="sd-card-text">The process of sending a message to all subscribers of a channel</p>
</dd>
<dt id="term-eviction">eviction<a class="headerlink" href="#term-eviction" title="Link to this term">¶</a></dt><dd><p class="sd-card-text">A <a class="reference internal" href="#term-backpressure"><span class="xref std std-term">backpressure</span></a> strategy, dropping the oldest message in the backlog when
a new one is added while the backlog is full</p>
</dd>
<dt id="term-backoff">backoff<a class="headerlink" href="#term-backoff" title="Link to this term">¶</a></dt><dd><p class="sd-card-text">A <a class="reference internal" href="#term-backpressure"><span class="xref std std-term">backpressure</span></a> strategy, dropping newly incoming messages as long as the
backlog is full</p>
</dd>
</dl>
</div>
</details></section>
<section id="flowcharts">
<h3>Flowcharts<a class="headerlink" href="#flowcharts" title="Link to this heading">¶</a></h3>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Click to toggle flowcharts</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<figure class="align-center" id="id1">
<pre  class="mermaid">
        flowchart LR
    Backend(Backend) --&gt; Broker[(Broker)]

    Plugin{{Plugin}} --&gt; Backend

    Application[[Application]] --&gt; Plugin
    </pre><figcaption>
<p><span class="caption-text">Publishing flow from the application to the <a class="reference internal" href="#term-broker"><span class="xref std std-term">broker</span></a></span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id2">
<pre  class="mermaid">
        flowchart TD
    Broker[(Broker)]

    Broker --&gt; Backend_1(Backend)
    Broker --&gt; Backend_2(Backend)

    Backend_1 --&gt; Plugin_1{{Plugin}}
    Backend_2 --&gt; Plugin_2{{Plugin}}

    Plugin_1 --&gt; Subscriber_1[Subscriber]
    Plugin_1 --&gt; Subscriber_2[Subscriber]
    Plugin_1 --&gt; Subscriber_3[Subscriber]

    Plugin_2 --&gt; Subscriber_4[Subscriber]
    Plugin_2 --&gt; Subscriber_5[Subscriber]
    Plugin_2 --&gt; Subscriber_6[Subscriber]
    </pre><figcaption>
<p><span class="caption-text">Fanout flow of data from the <a class="reference internal" href="#term-broker"><span class="xref std std-term">broker</span></a> to the sockets, showing multiple plugin instances</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</div>
</details></section>
</section>
<section id="the-channelsplugin">
<h2>The <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin" title="litestar.channels.plugin.ChannelsPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChannelsPlugin</span></code></a><a class="headerlink" href="#the-channelsplugin" title="Link to this heading">¶</a></h2>
<p>The <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin" title="litestar.channels.plugin.ChannelsPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChannelsPlugin</span></code></a> acts as the central entity for managing channels and subscribers.
It is used to publish messages, control how data is stored, and manage <a class="reference internal" href="#term-subscriber"><span class="xref std std-term">subscribers</span></a>,
route handlers, and configuration.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The plugin makes itself available as a dependency under the <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.params.channels" title="litestar.channels.plugin.ChannelsPlugin"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">channels</span></code></a> key, which
means it is not necessary to import it and instead, it can be used from within route handlers or other callables
within the dependency tree directly</p>
</div>
<section id="configuring-the-channels">
<h3>Configuring the <a class="reference internal" href="#term-channel"><span class="xref std std-term">channels</span></a><a class="headerlink" href="#configuring-the-channels" title="Link to this heading">¶</a></h3>
<p>The <a class="reference internal" href="#term-channel"><span class="xref std std-term">channels</span></a> managed by the plugin can be either defined upfront, passing them to the
<a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.params.channels" title="litestar.channels.plugin.ChannelsPlugin"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">channels</span></code></a> parameter, or created “on the fly”
(i.e., on the first <a class="reference internal" href="#term-subscription"><span class="xref std std-term">subscription</span></a> to a channel) by setting
<a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.params.arbitrary_channels_allowed" title="litestar.channels.plugin.ChannelsPlugin"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">arbitrary_channels_allowed</span></code></a> to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Passing channels explicitly</span><a class="headerlink" href="#id3" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.channels</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChannelsPlugin</span>
</span><span data-line="2">
</span><span data-line="3"><span class="n">channels_plugin</span> <span class="o">=</span> <span class="n">ChannelsPlugin</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">channels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">])</span>
</span></pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Allowing arbitrary channels</span><a class="headerlink" href="#id4" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.channels</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChannelsPlugin</span>
</span><span data-line="2">
</span><span data-line="3"><span class="n">channels_plugin</span> <span class="o">=</span> <span class="n">ChannelsPlugin</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">arbitrary_channels_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
<p>If <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.params.arbitrary_channels_allowed" title="litestar.channels.plugin.ChannelsPlugin"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">arbitrary_channels_allowed</span></code></a> is not <code class="docutils literal notranslate"><span class="pre">True</span></code>, trying to publish or subscribe to a
<a class="reference internal" href="#term-channel"><span class="xref std std-term">channel</span></a> not passed to <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.params.channels" title="litestar.channels.plugin.ChannelsPlugin"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">channels</span></code></a> will raise a <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsException" title="litestar.channels.plugin.ChannelsException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ChannelsException</span></code></a>.</p>
</section>
<section id="publishing-data">
<h3>Publishing data<a class="headerlink" href="#publishing-data" title="Link to this heading">¶</a></h3>
<p>One of the core aspects of the plugin is publishing data, which is done through its
<a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.publish" title="litestar.channels.plugin.ChannelsPlugin.publish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">publish()</span></code></a> method:</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Publishing data to a channel with <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.publish" title="litestar.channels.plugin.ChannelsPlugin.publish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">publish()</span></code></a></span><a class="headerlink" href="#id5" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">channels</span><span class="o">.</span><span class="n">publish</span><span class="p">({</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello&quot;</span><span class="p">},</span> <span class="s2">&quot;general&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
<p>The above example will publish the data to the channel <code class="docutils literal notranslate"><span class="pre">general</span></code>, subsequently putting
it into all subscriber’s <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event stream</span></a> to be consumed.</p>
<p>This method is non-blocking, even though channels and the associated
<a class="reference internal" href="#term-backend"><span class="xref std std-term">backends</span></a> are fundamentally asynchronous.</p>
<p>Calling <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.publish" title="litestar.channels.plugin.ChannelsPlugin.publish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">publish()</span></code></a> effectively enqueues a message to be sent to the backend, from which
follows that there is no guarantee that an event will be available in the backend immediately after this call.</p>
<p>Alternatively, the asynchronous <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.wait_published" title="litestar.channels.plugin.ChannelsPlugin.wait_published"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wait_published()</span></code></a> method can be used, which skips the
internal message queue, publishing the data to the backend directly.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While calling <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.publish" title="litestar.channels.plugin.ChannelsPlugin.publish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">publish()</span></code></a> does not guarantee the
message is sent to the backend immediately, it will be sent there <em>eventually</em>; On
shutdown, the plugin will wait for all queues to empty</p>
</div>
</section>
<section id="managing-subscriptions">
<h3>Managing <a class="reference internal" href="#term-subscription"><span class="xref std std-term">subscriptions</span></a><a class="headerlink" href="#managing-subscriptions" title="Link to this heading">¶</a></h3>
<p>Another core functionality of the plugin is managing <a class="reference internal" href="#term-subscription"><span class="xref std std-term">subscriptions</span></a>, for which two
different approaches exist:</p>
<ol class="arabic simple">
<li><p>Manually through the <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.subscribe" title="litestar.channels.plugin.ChannelsPlugin.subscribe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subscribe()</span></code></a> and <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.unsubscribe" title="litestar.channels.plugin.ChannelsPlugin.unsubscribe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unsubscribe()</span></code></a> methods</p></li>
<li><p>By using the <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.start_subscription" title="litestar.channels.plugin.ChannelsPlugin.start_subscription"><code class="xref py py-meth docutils literal notranslate"><span class="pre">start_subscription()</span></code></a> context manager</p></li>
</ol>
<p>Both <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.subscribe" title="litestar.channels.plugin.ChannelsPlugin.subscribe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subscribe()</span></code></a> and <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.start_subscription" title="litestar.channels.plugin.ChannelsPlugin.start_subscription"><code class="xref py py-meth docutils literal notranslate"><span class="pre">start_subscription()</span></code></a> produce a <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber" title="litestar.channels.subscriber.Subscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code></a>,
which can be used to interact with the streams of events subscribed to.</p>
<p>The context manager should be preferred, since it ensures that channels are being unsubscribed.
Using the <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.subscribe" title="litestar.channels.plugin.ChannelsPlugin.subscribe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subscribe()</span></code></a> and <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.unsubscribe" title="litestar.channels.plugin.ChannelsPlugin.unsubscribe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unsubscribe()</span></code></a> methods directly should only be
one when a <a class="reference external" href="https://docs.python.org/3/glossary.html#term-asynchronous-context-manager" title="(in Python v3.13)"><span class="xref std std-term">context manager</span></a> cannot be used, e.g., when the <a class="reference internal" href="#term-subscription"><span class="xref std std-term">subscription</span></a>
would span different contexts.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Calling the <a class="reference internal" href="#term-subscription"><span class="xref std std-term">subscription</span></a> methods manually</span><a class="headerlink" href="#id6" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">subscriber</span> <span class="o">=</span> <span class="k">await</span> <span class="n">channels</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">])</span>
</span><span data-line="2"><span class="k">try</span><span class="p">:</span>
</span><span data-line="3">    <span class="o">...</span>  <span class="c1"># do some stuff here</span>
</span><span data-line="4"><span class="k">finally</span><span class="p">:</span>
</span><span data-line="5">    <span class="k">await</span> <span class="n">channels</span><span class="o">.</span><span class="n">unsubscribe</span><span class="p">(</span><span class="n">subscriber</span><span class="p">)</span>
</span></pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">Using the <a class="reference external" href="https://docs.python.org/3/glossary.html#term-asynchronous-context-manager" title="(in Python v3.13)"><span class="xref std std-term">async context manager</span></a></span><a class="headerlink" href="#id7" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="k">async</span> <span class="k">with</span> <span class="n">channels</span><span class="o">.</span><span class="n">start_subscription</span><span class="p">([</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">])</span> <span class="k">as</span> <span class="n">subscriber</span><span class="p">:</span>
</span><span data-line="2">    <span class="o">...</span>  <span class="c1"># do some stuff here</span>
</span></pre></div>
</div>
</div>
<p>It is also possible to unsubscribe from individual <a class="reference internal" href="#term-channel"><span class="xref std std-term">channels</span></a>, which may be desirable if
<a class="reference internal" href="#term-subscription"><span class="xref std std-term">subscriptions</span></a> need to be managed dynamically.</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">Unsubscribing from a channel manually</span><a class="headerlink" href="#id8" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">subscriber</span> <span class="o">=</span> <span class="k">await</span> <span class="n">channels</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">])</span>
</span><span data-line="2"><span class="k">try</span><span class="p">:</span>
</span><span data-line="3">    <span class="o">...</span>  <span class="c1"># do some stuff here</span>
</span><span data-line="4"><span class="k">finally</span><span class="p">:</span>
</span><span data-line="5">    <span class="k">await</span> <span class="n">channels</span><span class="o">.</span><span class="n">unsubscribe</span><span class="p">(</span><span class="n">subscriber</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">])</span>
</span></pre></div>
</div>
</div>
<p>Or, using the context manager</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">Using the <a class="reference external" href="https://docs.python.org/3/glossary.html#term-asynchronous-context-manager" title="(in Python v3.13)"><span class="xref std std-term">async context manager</span></a> to unsubscribe from a
<a class="reference internal" href="#term-channel"><span class="xref std std-term">channel</span></a></span><a class="headerlink" href="#id9" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="k">async</span> <span class="k">with</span> <span class="n">channels</span><span class="o">.</span><span class="n">start_subscription</span><span class="p">([</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">])</span> <span class="k">as</span> <span class="n">subscriber</span><span class="p">:</span>
</span><span data-line="2">    <span class="o">...</span>  <span class="c1"># do some stuff here</span>
</span><span data-line="3">    <span class="k">await</span> <span class="n">channels</span><span class="o">.</span><span class="n">unsubscribe</span><span class="p">(</span><span class="n">subscriber</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">])</span>
</span></pre></div>
</div>
</div>
</section>
<section id="managing-history">
<h3>Managing <a class="reference internal" href="#term-history"><span class="xref std std-term">history</span></a><a class="headerlink" href="#managing-history" title="Link to this heading">¶</a></h3>
<p>Some backends support per-<a class="reference internal" href="#term-channel"><span class="xref std std-term">channel</span></a> <a class="reference internal" href="#term-history"><span class="xref std std-term">history</span></a>, keeping a certain amount of <a class="reference internal" href="#term-event"><span class="xref std std-term">events</span></a> in storage.
This <a class="reference internal" href="#term-history"><span class="xref std std-term">history</span></a> can then be pushed to a <a class="reference internal" href="#term-subscriber"><span class="xref std std-term">subscriber</span></a>.</p>
<p>The plugin’s <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.put_subscriber_history" title="litestar.channels.plugin.ChannelsPlugin.put_subscriber_history"><code class="xref py py-meth docutils literal notranslate"><span class="pre">put_subscriber_history</span></code></a> can
be used to fetch this <a class="reference internal" href="#term-history"><span class="xref std std-term">history</span></a> and put it into a subscriber’s <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event stream</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">Retrieving <a class="reference internal" href="#term-channel"><span class="xref std std-term">channel</span></a> <a class="reference internal" href="#term-history"><span class="xref std std-term">history</span></a> for a <a class="reference internal" href="#term-subscriber"><span class="xref std std-term">subscriber</span></a> and putting it into the
<a class="reference internal" href="#term-event-stream"><span class="xref std std-term">stream</span></a></span><a class="headerlink" href="#id10" title="Link to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">WebSocket</span><span class="p">,</span> <span class="n">websocket</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.channels</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChannelsPlugin</span>
</span><span data-line="3"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.channels.backends.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemoryChannelsBackend</span>
</span><span data-line="4">
</span><span data-line="5">
</span><span data-line="6"><span class="nd">@websocket</span><span class="p">(</span><span class="s2">&quot;/ws&quot;</span><span class="p">)</span>
</span><span data-line="7"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handler</span><span class="p">(</span><span class="n">socket</span><span class="p">:</span> <span class="n">WebSocket</span><span class="p">,</span> <span class="n">channels</span><span class="p">:</span> <span class="n">ChannelsPlugin</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="8">    <span class="k">await</span> <span class="n">socket</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
</span><span data-line="9">
</span><span data-line="10">    <span class="k">async</span> <span class="k">with</span> <span class="n">channels</span><span class="o">.</span><span class="n">start_subscription</span><span class="p">([</span><span class="s2">&quot;some_channel&quot;</span><span class="p">])</span> <span class="k">as</span> <span class="n">subscriber</span><span class="p">:</span>
</span><span data-line="11">        <span class="k">await</span> <span class="n">channels</span><span class="o">.</span><span class="n">put_subscriber_history</span><span class="p">(</span><span class="n">subscriber</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;some_channel&quot;</span><span class="p">],</span> <span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span><span data-line="12">
</span><span data-line="13">
</span><span data-line="14"><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span>
</span><span data-line="15">    <span class="p">[</span><span class="n">handler</span><span class="p">],</span>
</span><span data-line="16">    <span class="n">plugins</span><span class="o">=</span><span class="p">[</span><span class="n">ChannelsPlugin</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="n">MemoryChannelsBackend</span><span class="p">(</span><span class="n">history</span><span class="o">=</span><span class="mi">20</span><span class="p">))],</span>
</span><span data-line="17"><span class="p">)</span>
</span></pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<blockquote>
<div><p>The publication of the <a class="reference internal" href="#term-history"><span class="xref std std-term">history</span></a> happens sequentially, one <a class="reference internal" href="#term-channel"><span class="xref std std-term">channel</span></a> and one
<a class="reference internal" href="#term-event"><span class="xref std std-term">event</span></a> at a time. This is done to ensure the correct ordering of events and to avoid
filling up a <a class="reference internal" href="#term-subscriber"><span class="xref std std-term">subscriber</span></a>’s backlog, which would result in dropped <a class="reference internal" href="#term-history"><span class="xref std std-term">history</span></a> entries. Should the
amount of entries exceed the maximum backlog size, the execution will wait until
previous events have been processed.</p>
</div></blockquote>
<p>Read more: <a class="reference internal" href="#managing-backpressure">Managing backpressure</a></p>
</div>
</section>
</section>
<section id="the-subscriber">
<h2>The <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber" title="litestar.channels.subscriber.Subscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code></a><a class="headerlink" href="#the-subscriber" title="Link to this heading">¶</a></h2>
<p>The <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber" title="litestar.channels.subscriber.Subscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code></a> manages an individual <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event stream</span></a>, provided to it by the plugin,
representing the sum of events from all <a class="reference internal" href="#term-channel"><span class="xref std std-term">channels</span></a> the subscriber has subscribed to.</p>
<p>It can be considered the endpoint of all <a class="reference internal" href="#term-event"><span class="xref std std-term">events</span></a>, while the backends act as the source,
and the plugin as a router, being responsible for supplying events gathered from the
backend into the appropriate subscriber’s streams.</p>
<p>In addition to being an abstraction of an <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event stream</span></a>, the <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber" title="litestar.channels.subscriber.Subscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code></a>
provides two methods to handle this stream:</p>
<dl>
<dt><a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.iter_events" title="litestar.channels.subscriber.Subscriber.iter_events"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iter_events</span></code></a></dt><dd><p>An <a class="reference external" href="https://docs.python.org/3/glossary.html#term-asynchronous-generator" title="(in Python v3.13)"><span class="xref std std-term">asynchronous generator</span></a>, producing one event from the stream at a time, waiting
until the next one becomes available</p>
</dd>
<dt><a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.run_in_background" title="litestar.channels.subscriber.Subscriber.run_in_background"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_in_background</span></code></a></dt><dd><p>A <a class="reference external" href="https://docs.python.org/3/glossary.html#term-asynchronous-context-manager" title="(in Python v3.13)"><span class="xref std std-term">context manager</span></a>, wrapping an <a class="reference external" href="https://docs.python.org/3/library/asyncio-task.html#asyncio.Task" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Task</span></code></a>,
consuming events yielded by <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.iter_events" title="litestar.channels.subscriber.Subscriber.iter_events"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iter_events</span></code></a>, invoking a provided <a class="reference external" href="https://docs.python.org/3/glossary.html#term-callback" title="(in Python v3.13)"><span class="xref std std-term">callback</span></a>
for each of them. Upon exit, it will attempt a graceful shutdown of the running task, waiting
for all currently enqueued events in the stream to be processed.
If the context exits with an error, the task will be cancelled instead.</p>
<p>It is possible to force the task to stop immediately, by setting <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.run_in_background.params.join" title="litestar.channels.subscriber.Subscriber.run_in_background"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">join</span></code></a>
to <code class="docutils literal notranslate"><span class="pre">False</span></code> in <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.run_in_background" title="litestar.channels.subscriber.Subscriber.run_in_background"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_in_background</span></code></a>, which will lead to the cancellation of
the task. By default this only happens when the context is left with an exception.</p>
</dd>
</dl>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The <a class="reference internal" href="#term-event"><span class="xref std std-term">events</span></a> in the <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event streams</span></a> are always
bytes; When calling <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.publish" title="litestar.channels.plugin.ChannelsPlugin.publish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ChannelsPlugin.publish()</span></code></a>, data will be serialized before
being sent to the backend.</p>
</div>
<section id="consuming-the-event-stream">
<h3>Consuming the <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event stream</span></a><a class="headerlink" href="#consuming-the-event-stream" title="Link to this heading">¶</a></h3>
<p>There are two general methods of consuming the <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event stream</span></a>:</p>
<ol class="arabic simple">
<li><p>By iterating over it directly, using <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.iter_events" title="litestar.channels.subscriber.Subscriber.iter_events"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iter_events</span></code></a></p></li>
<li><p>By using the <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.run_in_background" title="litestar.channels.subscriber.Subscriber.run_in_background"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_in_background</span></code></a> context manager,
which starts a background task, iterating over the stream, invoking a provided
callback for every <a class="reference internal" href="#term-event"><span class="xref std std-term">event</span></a> received</p></li>
</ol>
<p>Iterating over the <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">stream</span></a> directly is mostly useful if processing the events is the only
concern, since <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.iter_events" title="litestar.channels.subscriber.Subscriber.iter_events"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iter_events</span></code></a> is effectively an infinite
loop. For all other applications, using the context manager is preferable, since it
allows to easily run other code concurrently.</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">Iterating over the <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event stream</span></a> to send data to a WebSocket</span><a class="headerlink" href="#id11" title="Link to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">WebSocket</span><span class="p">,</span> <span class="n">websocket</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.channels</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChannelsPlugin</span>
</span><span data-line="3"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.channels.backends.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemoryChannelsBackend</span>
</span><span data-line="4">
</span><span data-line="5">
</span><span data-line="6"><span class="nd">@websocket</span><span class="p">(</span><span class="s2">&quot;/ws&quot;</span><span class="p">)</span>
</span><span data-line="7"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handler</span><span class="p">(</span><span class="n">socket</span><span class="p">:</span> <span class="n">WebSocket</span><span class="p">,</span> <span class="n">channels</span><span class="p">:</span> <span class="n">ChannelsPlugin</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="8">    <span class="k">await</span> <span class="n">socket</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
</span><span data-line="9">
</span><span data-line="10">    <span class="k">async</span> <span class="k">with</span> <span class="n">channels</span><span class="o">.</span><span class="n">start_subscription</span><span class="p">([</span><span class="s2">&quot;some_channel&quot;</span><span class="p">])</span> <span class="k">as</span> <span class="n">subscriber</span><span class="p">:</span>
</span><span data-line="11">        <span class="k">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">subscriber</span><span class="o">.</span><span class="n">iter_events</span><span class="p">():</span>
</span><span data-line="12">            <span class="k">await</span> <span class="n">socket</span><span class="o">.</span><span class="n">send_text</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span data-line="13">
</span><span data-line="14">
</span><span data-line="15"><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span>
</span><span data-line="16">    <span class="p">[</span><span class="n">handler</span><span class="p">],</span>
</span><span data-line="17">    <span class="n">plugins</span><span class="o">=</span><span class="p">[</span><span class="n">ChannelsPlugin</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="n">MemoryChannelsBackend</span><span class="p">())],</span>
</span><span data-line="18"><span class="p">)</span>
</span></pre></div>
</div>
</div>
<p>In the above example, the stream is used to send data to a
<a class="reference internal" href="../reference/connection.html#litestar.connection.WebSocket" title="litestar.connection.WebSocket"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocket</span></code></a>.</p>
<p>The same can be achieve by passing <a class="reference internal" href="../reference/connection.html#litestar.connection.WebSocket.send_text" title="litestar.connection.WebSocket.send_text"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Websocket.send_text()</span></code></a> as the
callback to <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.run_in_background" title="litestar.channels.subscriber.Subscriber.run_in_background"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_in_background()</span></code></a>. This will cause the WebSocket’s method to be invoked every time
a new <a class="reference internal" href="#term-event"><span class="xref std std-term">event</span></a> becomes available in the <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">stream</span></a>, but gives control back to the application,
providing an opportunity to perform other tasks, such as receiving incoming data from the socket.</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">Using <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.run_in_background" title="litestar.channels.subscriber.Subscriber.run_in_background"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_in_background()</span></code></a> to process events concurrently</span><a class="headerlink" href="#id12" title="Link to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">WebSocket</span><span class="p">,</span> <span class="n">websocket</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.channels</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChannelsPlugin</span>
</span><span data-line="3"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.channels.backends.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemoryChannelsBackend</span>
</span><span data-line="4">
</span><span data-line="5">
</span><span data-line="6"><span class="nd">@websocket</span><span class="p">(</span><span class="s2">&quot;/ws&quot;</span><span class="p">)</span>
</span><span data-line="7"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handler</span><span class="p">(</span><span class="n">socket</span><span class="p">:</span> <span class="n">WebSocket</span><span class="p">,</span> <span class="n">channels</span><span class="p">:</span> <span class="n">ChannelsPlugin</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="8">    <span class="k">await</span> <span class="n">socket</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
</span><span data-line="9">
</span><span data-line="10">    <span class="k">async</span> <span class="k">with</span> <span class="p">(</span>
</span><span data-line="11">        <span class="n">channels</span><span class="o">.</span><span class="n">start_subscription</span><span class="p">([</span><span class="s2">&quot;some_channel&quot;</span><span class="p">])</span> <span class="k">as</span> <span class="n">subscriber</span><span class="p">,</span>
</span><span data-line="12">        <span class="n">subscriber</span><span class="o">.</span><span class="n">run_in_background</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">send_text</span><span class="p">),</span>
</span><span data-line="13">    <span class="p">):</span>
</span><span data-line="14">        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span data-line="15">            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">socket</span><span class="o">.</span><span class="n">receive_text</span><span class="p">()</span>
</span><span data-line="16">            <span class="k">await</span> <span class="n">socket</span><span class="o">.</span><span class="n">send_text</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</span><span data-line="17">
</span><span data-line="18">
</span><span data-line="19"><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span>
</span><span data-line="20">    <span class="p">[</span><span class="n">handler</span><span class="p">],</span>
</span><span data-line="21">    <span class="n">plugins</span><span class="o">=</span><span class="p">[</span><span class="n">ChannelsPlugin</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="n">MemoryChannelsBackend</span><span class="p">(),</span> <span class="n">channels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;some_channel&quot;</span><span class="p">])],</span>
</span><span data-line="22"><span class="p">)</span>
</span></pre></div>
</div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Iterating over <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.iter_events" title="litestar.channels.subscriber.Subscriber.iter_events"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iter_events()</span></code></a> should be approached
with caution when being used together with WebSockets.</p>
<p>Since <a class="reference internal" href="../reference/exceptions.html#litestar.exceptions.WebSocketDisconnect" title="litestar.exceptions.WebSocketDisconnect"><code class="xref py py-exc docutils literal notranslate"><span class="pre">WebSocketDisconnect</span></code></a> is only raised after the corresponding ASGI event
has been <em>received</em>, it can result in an indefinitely suspended coroutine. This can
happen if for example the client disconnects, but no further events are received.
The generator will then wait for new events, but since it will never receive any,
no <code class="docutils literal notranslate"><span class="pre">send</span></code> call on the WebSocket will be made, which in turn means no exception
will be raised to break the loop.</p>
</div>
</section>
</section>
<section id="managing-backpressure">
<h2>Managing <a class="reference internal" href="#term-backpressure"><span class="xref std std-term">backpressure</span></a><a class="headerlink" href="#managing-backpressure" title="Link to this heading">¶</a></h2>
<p>Each subscriber manages its own backlog: A queue of unprocessed <a class="reference internal" href="#term-event"><span class="xref std std-term">events</span></a>.
By default, this backlog is unlimited in size, allowing it to grow indefinitely. For
most applications, this should be no issue, but when the recipient consistently can not
process messages faster than they come in, an application might opt to handle this case.</p>
<p>The channels plugin provides two different strategies for managing this <a class="reference internal" href="#term-backpressure"><span class="xref std std-term">backpressure</span></a>:</p>
<ol class="arabic simple">
<li><p>A <a class="reference internal" href="#term-backoff"><span class="xref std std-term">backoff</span></a> strategy, dropping newly incoming messages as long as the backlog is full</p></li>
<li><p>An <a class="reference internal" href="#term-eviction"><span class="xref std std-term">eviction</span></a> strategy, dropping the oldest message in the backlog when a new one is
added while the backlog is full</p></li>
</ol>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">Backoff strategy</span><a class="headerlink" href="#id13" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.channels</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChannelsPlugin</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.channels.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemoryChannelsBackend</span>
</span><span data-line="3">
</span><span data-line="4"><span class="n">channels</span> <span class="o">=</span> <span class="n">ChannelsPlugin</span><span class="p">(</span>
</span><span data-line="5">    <span class="n">backend</span><span class="o">=</span><span class="n">MemoryChannelsBackend</span><span class="p">(),</span>
</span><span data-line="6">    <span class="n">max_backlog</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
</span><span data-line="7">    <span class="n">backlog_strategy</span><span class="o">=</span><span class="s2">&quot;backoff&quot;</span><span class="p">,</span>
</span><span data-line="8"><span class="p">)</span>
</span></pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text"><a class="reference internal" href="#term-eviction"><span class="xref std std-term">Eviction</span></a> strategy</span><a class="headerlink" href="#id14" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.channels</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChannelsPlugin</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.channels.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemoryChannelsBackend</span>
</span><span data-line="3">
</span><span data-line="4"><span class="n">channels</span> <span class="o">=</span> <span class="n">ChannelsPlugin</span><span class="p">(</span>
</span><span data-line="5">    <span class="n">backend</span><span class="o">=</span><span class="n">MemoryChannelsBackend</span><span class="p">(),</span>
</span><span data-line="6">    <span class="n">max_backlog</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
</span><span data-line="7">    <span class="n">backlog_strategy</span><span class="o">=</span><span class="s2">&quot;dropleft&quot;</span><span class="p">,</span>
</span><span data-line="8"><span class="p">)</span>
</span></pre></div>
</div>
</div>
</section>
<section id="backends">
<h2>Backends<a class="headerlink" href="#backends" title="Link to this heading">¶</a></h2>
<p>The storing and <a class="reference internal" href="#term-fanout"><span class="xref std std-term">fanout</span></a> of messages is handled by a
<a class="reference internal" href="../reference/channels/backends/base.html#litestar.channels.backends.base.ChannelsBackend" title="litestar.channels.backends.base.ChannelsBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChannelsBackend</span></code></a>.</p>
<p>The following backends are currently implemented:</p>
<dl class="simple">
<dt><a class="reference internal" href="../reference/channels/backends/memory.html#litestar.channels.backends.memory.MemoryChannelsBackend" title="litestar.channels.backends.memory.MemoryChannelsBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">MemoryChannelsBacked</span></code></a></dt><dd><p>A basic in-memory backend, mostly useful for testing and local development, but
still fully capable. Since it stores all data in-process, it can achieve the highest
performance of all the backends, but at the same time is not suitable for
applications running on multiple processes.</p>
</dd>
<dt><a class="reference internal" href="../reference/channels/backends/redis.html#litestar.channels.backends.redis.RedisChannelsPubSubBackend" title="litestar.channels.backends.redis.RedisChannelsPubSubBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">RedisChannelsPubSubBackend</span></code></a></dt><dd><p>A Redis based backend, using <a class="reference external" href="https://redis.io/docs/manual/pubsub/">Pub/Sub</a> to
delivery messages. This Redis backend has a low latency and overhead and is
generally recommended if <a class="reference internal" href="#term-history"><span class="xref std std-term">history</span></a> is not needed</p>
</dd>
<dt><a class="reference internal" href="../reference/channels/backends/redis.html#litestar.channels.backends.redis.RedisChannelsStreamBackend" title="litestar.channels.backends.redis.RedisChannelsStreamBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">RedisChannelsStreamBackend</span></code></a></dt><dd><p>A redis based backend, using <a class="reference external" href="https://redis.io/docs/data-types/streams/">streams</a>
to deliver messages. It has a slightly higher latency when publishing than the
Pub/Sub backend, but achieves the same throughput in message <a class="reference internal" href="#term-fanout"><span class="xref std std-term">fanout</span></a>. Recommended
when <a class="reference internal" href="#term-history"><span class="xref std std-term">history</span></a> is needed</p>
</dd>
<dt><a class="reference internal" href="../reference/channels/backends/asyncpg.html#litestar.channels.backends.asyncpg.AsyncPgChannelsBackend" title="litestar.channels.backends.asyncpg.AsyncPgChannelsBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncPgChannelsBackend</span></code></a></dt><dd><p>A postgres backend using the <a class="reference external" href="https://magicstack.github.io/asyncpg/current/">asyncpg</a> driver</p>
</dd>
<dt><a class="reference internal" href="../reference/channels/backends/psycopg.html#litestar.channels.backends.psycopg.PsycoPgChannelsBackend" title="litestar.channels.backends.psycopg.PsycoPgChannelsBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">PsycoPgChannelsBackend</span></code></a></dt><dd><p>A postgres backend using the <a class="reference external" href="https://www.psycopg.org/psycopg3/docs/">psycopg3</a> async driver</p>
</dd>
</dl>
</section>
<section id="integrating-with-websocket-handlers">
<h2>Integrating with websocket handlers<a class="headerlink" href="#integrating-with-websocket-handlers" title="Link to this heading">¶</a></h2>
<section id="generating-route-handlers">
<h3>Generating route handlers<a class="headerlink" href="#generating-route-handlers" title="Link to this heading">¶</a></h3>
<p>A common pattern is to create a route handler per <a class="reference internal" href="#term-channel"><span class="xref std std-term">channel</span></a>, sending data to the connected
client from that channel. This can be fully automated, using the plugin to create these route handlers.</p>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text">Setting <code class="docutils literal notranslate"><span class="pre">create_ws_route_handlers=True</span></code> will create route handlers for all <code class="docutils literal notranslate"><span class="pre">channels</span></code></span><a class="headerlink" href="#id15" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.channels</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChannelsPlugin</span>
</span><span data-line="3"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.channels.backends.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemoryChannelsBackend</span>
</span><span data-line="4">
</span><span data-line="5"><span class="n">channels_plugin</span> <span class="o">=</span> <span class="n">ChannelsPlugin</span><span class="p">(</span>
</span><span data-line="6">    <span class="n">backend</span><span class="o">=</span><span class="n">MemoryChannelsBackend</span><span class="p">(),</span>
</span><span data-line="7">    <span class="n">channels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">],</span>
</span><span data-line="8">    <span class="n">create_ws_route_handlers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span data-line="9"><span class="p">)</span>
</span><span data-line="10">
</span><span data-line="11"><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">plugins</span><span class="o">=</span><span class="p">[</span><span class="n">channels_plugin</span><span class="p">])</span>
</span></pre></div>
</div>
</div>
<p>The generated route handlers can optionally be configured to send the <a class="reference internal" href="#term-channel"><span class="xref std std-term">channel</span></a>’s <a class="reference internal" href="#term-history"><span class="xref std std-term">history</span></a>
after a client has connected:</p>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text">Sending the first 10 <a class="reference internal" href="#term-history"><span class="xref std std-term">history</span></a> entries after a client connects</span><a class="headerlink" href="#id16" title="Link to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.channels</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChannelsPlugin</span>
</span><span data-line="3"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.channels.backends.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemoryChannelsBackend</span>
</span><span data-line="4">
</span><span data-line="5"><span class="n">channels_plugin</span> <span class="o">=</span> <span class="n">ChannelsPlugin</span><span class="p">(</span>
</span><span data-line="6">    <span class="n">backend</span><span class="o">=</span><span class="n">MemoryChannelsBackend</span><span class="p">(</span><span class="n">history</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>  <span class="c1"># set the amount of messages per channel</span>
</span><span data-line="7">    <span class="c1"># to keep in the backend</span>
</span><span data-line="8">    <span class="n">channels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">],</span>
</span><span data-line="9">    <span class="n">create_ws_route_handlers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span data-line="10">    <span class="n">ws_handler_send_history</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>  <span class="c1"># send 10 entries of the history by default</span>
</span><span data-line="11"><span class="p">)</span>
</span><span data-line="12">
</span><span data-line="13"><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">plugins</span><span class="o">=</span><span class="p">[</span><span class="n">channels_plugin</span><span class="p">])</span>
</span></pre></div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When using the <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.params.arbitrary_channels_allowed" title="litestar.channels.plugin.ChannelsPlugin"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">arbitrary_channels_allowed</span></code></a> parameter
on the <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin" title="litestar.channels.plugin.ChannelsPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChannelsPlugin</span></code></a>, a single route handler will be generated instead, using a
<a class="reference internal" href="routing/parameters.html#path-parameters"><span class="std std-ref">path parameter</span></a> to specify the channel name</p>
</div>
</section>
</section>
</section>

        </article><button class="back-to-top" type="button">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
  </svg>
  <span>Back to top</span>
</button><div class="navigation flex print:hidden"><div class="navigation-prev">
    <a href="caching.html">
      <i class="i-lucide chevron-left"></i>
      <div class="page-info">
        <span>Previous</span><div class="title">Caching</div></div>
    </a>
  </div><div class="navigation-next">
    <a href="cli.html">
      <div class="page-info">
        <span>Next</span>
        <div class="title">CLI</div>
      </div>
      <i class="i-lucide chevron-right"></i>
    </a>
  </div></div></div>
    </div>
  </main>
</div>
<footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright"><p>2025, Litestar Organization</p>
  
  <p>
    Made with
    
    <a href="https://www.sphinx-doc.org/">Sphinx</a> and
    
    <a href="https://shibuya.lepture.com">Shibuya theme</a>.
  </p>
</div>
      <div class="sy-foot-socials">
<a href="https://twitter.com/LitestarAPI" aria-label="X (Twitter)">
  <iconify-icon icon="prime:twitter"></iconify-icon>
</a>
<a href="https://discord.gg/litestar" aria-label="Discord">
  <iconify-icon icon="simple-icons:discord"></iconify-icon>
</a>
<a href="https://www.reddit.com/r/LitestarAPI" aria-label="Reddit">
  <iconify-icon icon="simple-icons:reddit"></iconify-icon>
</a></div>
    </div>
  </div>
</footer>
      <script src="../_static/documentation_options.js?v=ad404a94"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script src="../_static/litestar-theme.js?v=ab2dcc9e"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
      <script src="../_static/design-tabs.js?v=f930bc37"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script src="../_static/shibuya.js?v=c477d091"></script>
      <script type="module" src="https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs"></script>
      <script type="module" src="https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs"></script>
      <script type="module">import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs";import elkLayouts from "https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs";mermaid.registerLayoutLoaders(elkLayouts);mermaid.initialize({startOnLoad:false});</script>
      <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
      <script type="module">
import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs";
window.addEventListener("load", () => mermaid.run());
</script>
      <script src="../_static/versioning.js?v=9ab184b9"></script></body>
</html>