<!DOCTYPE html>
<html lang="en" data-accent-color="amber" data-content_root="../">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Stores - Litestar Framework</title><link rel="shortcut icon" href="../_static/favicon.svg"/><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Templating" href="templating.html" /><link rel="prev" title="Custom types" href="custom-types.html" /><script>
    function setColorMode(t){let e=document.documentElement;e.setAttribute("data-color-mode",t);let a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,s=t;"auto"===t&&(s=a?"dark":"light"),"light"===s?(e.classList.remove("dark"),e.classList.add("light")):(e.classList.remove("light"),e.classList.add("dark"))}
    setColorMode(localStorage._theme||"auto");
  </script><link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=397bb51e" />
    <link rel="stylesheet" type="text/css" href="../_static/shibuya.css?v=76b6f612" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_paramlinks.css" />
    <link media="print" rel="stylesheet" type="text/css" href="../_static/print.css?v=20ff2c19" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css?v=50ea2f63" />
    <link rel="stylesheet" type="text/css" href="../_static/litestar-sphinx-theme.css?v=f8f74789" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --sy-f-text: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
  --sy-f-heading: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
}
</style>
    <meta property="og:type" content="website"/><meta property="og:title" content="Stores"/>
<meta name="twitter:card" content="summary"/>
<meta property="og:image" content="_static/logo-light.png"/>
  </head>
<body><div class="announcement">
    <div class="announcement-inner">
      <p>You are viewing the <bold>local</bold> version of the documentation. Click here to go to the latest version.</p>
      <button class="announcement-close" aria-label="Close announcement">
        <i class="i-lucide close"></i>
      </button>
    </div>
  </div><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <a class="sy-head-brand" href="/">
      <img class="light-logo" src="../_static/logo-light.png" alt="Litestar" height="28" loading="lazy" />
      <img class="dark-logo" src="../_static/logo-dark.png" alt="Litestar" height="28" loading="lazy" />
      <strong>Litestar</strong>
    </a>
    <div class="sy-head-nav" id="head-nav">
      <nav class="sy-head-links"><ul><li class="link"><a href="../index.html">Home</a></li>
      <li class="link"><button class="js-menu" type="button" id="nav-trigger-2" aria-controls="nav-children-2">
            <span>Community</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul id="nav-children-2" aria-labelledby="nav-trigger-2"><li><a href="../contribution-guide.html">
                <span>Contributing</span>
                <small>Learn how to contribute to the Litestar project</small>
              </a></li><li><a href="https://github.com/litestar-org/.github?tab=coc-ov-file">
                <span>Code of Conduct</span>
                <small>Review the etiquette for interacting with the Litestar community</small>
              </a></li><li><a href="https://github.com/litestar-org/.github?tab=coc-ov-file#security-ov-file">
                <span>Security</span>
                <small>Overview of Litestar's security protocols</small>
              </a></li></ul>
      </li>
      <li class="link"><button class="js-menu" type="button" id="nav-trigger-3" aria-controls="nav-children-3">
            <span>About</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul id="nav-children-3" aria-labelledby="nav-trigger-3"><li><a href="https://litestar.dev/about/organization">
                <span>Litestar Organization</span>
                <small>Details about the Litestar organization</small>
              </a></li><li><a href="https://litestar.dev/about/litestar-releases">
                <span>Releases</span>
                <small>Explore the release process, versioning, and deprecation policy for Litestar</small>
              </a></li></ul>
      </li>
      <li class="link"><button class="js-menu" type="button" id="nav-trigger-4" aria-controls="nav-children-4">
            <span>Release notes</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul id="nav-children-4" aria-labelledby="nav-trigger-4"><li><a href="../release-notes/whats-new-3.html">
                <span>What's new in 3.0</span>
                <small>Explore the new features in Litestar 3.0</small>
              </a></li><li><a href="../release-notes/changelog.html">
                <span>3.x Changelog</span>
                <small>All changes in the 3.x series</small>
              </a></li><li><a href="https://docs.litestar.dev/2/release-notes/changelog.html">
                <span>2.x Changelog</span>
                <small>All changes in the 2.x series</small>
              </a></li></ul>
      </li>
      <li class="link"><button class="js-menu" type="button" id="nav-trigger-5" aria-controls="nav-children-5">
            <span>Help</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul id="nav-children-5" aria-labelledby="nav-trigger-5"><li><a href="https://discord.gg/litestar">
                <span>Discord Help Forum</span>
                <small>Dedicated Discord help forum</small>
              </a></li><li><a href="https://github.com/orgs/litestar-org/discussions">
                <span>GitHub Discussions</span>
                <small>GitHub Discussions</small>
              </a></li><li><a href="https://stackoverflow.com/questions/tagged/litestar">
                <span>Stack Overflow</span>
                <small>We monitor the <code><b>litestar</b></code> tag on Stack Overflow</small>
              </a></li></ul>
      </li><li class="link">
          <a href="https://github.com/sponsors/Litestar-Org">
            <span>Sponsor</span></a>
        </li></ul></nav>
      <div class="sy-head-extra flex items-center print:hidden"><form class="searchbox flex items-center" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <kbd>/</kbd>
</form><div class="nav-versions">
    <button type="button" aria-label="Versions">
      <span class="md:hidden">Versions</span>
      <span class="hidden md:inline">main</span>
      <i class="i-lucide chevron-down"></i>
    </button>
    <div class="nav-versions-choices"><ul><li><a href="/latest">latest</a></li><li><a href="/main">v3 (development)</a></li><li><a href="/2">v2</a></li><li><a href="/1">v1</a></li></ul></div>
  </div><div class="sy-head-socials">
<a href="https://twitter.com/LitestarAPI" aria-label="X (Twitter)">
  <iconify-icon icon="prime:twitter"></iconify-icon>
</a>
  <a href="https://discord.gg/litestar" aria-label="Discord">
    <iconify-icon icon="simple-icons:discord"></iconify-icon>
  </a></div></div>
    </div>
    <div class="sy-head-actions flex items-center shrink-0 print:hidden"><button class="js-theme theme-switch flex items-center"
data-aria-auto="Switch to light color mode"
data-aria-light="Switch to dark color mode"
data-aria-dark="Switch to auto color mode">
<i class="i-lucide theme-icon"></i>
</button><button class="md:hidden flex items-center js-menu" aria-label="Menu" type="button" aria-controls="head-nav" aria-expanded="false">
        <div class="hamburger">
          <span class="hamburger_1"></span>
          <span class="hamburger_2 -translate-x-2"></span>
          <span class="hamburger_3 -translate-x-1"></span>
        </div>
      </button>
    </div>
  </div>
</div>
<div class="sy-page sy-container flex mx-auto">
  <aside id="lside" class="sy-lside md:w-72 md:shrink-0 print:hidden">
    <div class="sy-lside-inner md:sticky">
      <div class="sy-scrollbar p-6"><div class="sidebar-links">
  <ul>
    <li><a class="icon-link" href="https://github.com/orgs/litestar-org/discussions">
  <span class="icon">
    <svg viewBox="0 0 24 24" fill="none">
      <path fill="var(--accent-9)" fill-rule="evenodd" clip-rule="evenodd" d="M11 5a6 6 0 0 0-4.687 9.746c.215.27.315.62.231.954l-.514 2.058a1 1 0 0 0 1.485 1.1l2.848-1.71c.174-.104.374-.15.576-.148H13a6 6 0 0 0 0-12h-2Z"/>
      <circle fill="white" cx="12" cy="11" r="1"/>
      <circle fill="white" cx="9" cy="11" r="1"/>
      <circle fill="white" cx="15" cy="11" r="1"/>
    </svg>
  </span>
  <span class="text">Discussion</span>
</a></li>
  </ul>
</div>
        <div class="globaltoc" data-expand-depth="0"><p class="caption" role="heading" aria-level="3"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Usage</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="applications.html">Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="routing/index.html">Routing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="routing/overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="routing/handlers.html">Route handlers</a></li>
<li class="toctree-l3"><a class="reference internal" href="routing/parameters.html">Parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="requests.html">Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="caching.html">Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="channels.html">Channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html">CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="databases/index.html">Databases</a><ul>
<li class="toctree-l3"><a class="reference internal" href="databases/sqlalchemy/index.html">SQLAlchemy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="databases/sqlalchemy/models_and_repository.html">SQLAlchemy Models &amp; Repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="databases/sqlalchemy/plugins/index.html">Plugins</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="databases/piccolo.html">Piccolo ORM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="dependency-injection.html">Dependency Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="dto/index.html">Data Transfer Object (DTO)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="dto/0-basic-use.html">Basic Use</a></li>
<li class="toctree-l3"><a class="reference internal" href="dto/1-abstract-dto.html">AbstractDTO</a></li>
<li class="toctree-l3"><a class="reference internal" href="dto/2-creating-custom-dto-classes.html">Implementing Custom DTO Classes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="events.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="exceptions.html">Exceptions and exception handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="file_systems.html">File Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="htmx.html">HTMX</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifecycle-hooks.html">Life Cycle Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="metrics/index.html">Metrics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="metrics/open-telemetry.html">OpenTelemetry</a></li>
<li class="toctree-l3"><a class="reference internal" href="metrics/prometheus.html">Prometheus</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="middleware/index.html">Middleware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="middleware/using-middleware.html">Using Middleware</a></li>
<li class="toctree-l3"><a class="reference internal" href="middleware/builtin-middleware.html">Built-in middleware</a></li>
<li class="toctree-l3"><a class="reference internal" href="middleware/creating-middleware.html">Creating Middleware</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="openapi/index.html">OpenAPI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="openapi/schema_generation.html">Configuring schema generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/schema_generation.html#configuring-schema-generation-on-a-route-handler">Configuring schema generation on a route handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/schema_generation.html#accessing-the-openapi-schema-in-code">Accessing the OpenAPI schema in code</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/schema_generation.html#customizing-pydantic-model-schemas">Customizing Pydantic model schemas</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/schema_generation.html#customizing-operation-class">Customizing <code class="docutils literal notranslate"><span class="pre">Operation</span></code> class</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/schema_generation.html#generating-examples">Generating examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/ui_plugins.html">OpenAPI UI Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/ui_plugins.html#using-openapi-ui-plugins">Using OpenAPI UI Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/ui_plugins.html#configuring-openapi-ui-plugins">Configuring OpenAPI UI Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/ui_plugins.html#configuring-the-openapi-root-path">Configuring the OpenAPI Root Path</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/ui_plugins.html#building-your-own-openapi-ui-plugin">Building your own OpenAPI UI Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/ui_plugins.html#interacting-with-the-router">Interacting with the <code class="docutils literal notranslate"><span class="pre">Router</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/ui_plugins.html#oauth2-in-swagger-ui">OAuth2 in Swagger UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/ui_plugins.html#customizing-the-openapi-ui">Customizing the OpenAPI UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="openapi/ui_plugins.html#cdn-and-offline-file-support">CDN and offline file support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="plugins/index.html">Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="plugins/flash_messages.html">Flash Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugins/problem_details.html">Problem Details</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="responses.html">Responses</a></li>
<li class="toctree-l2"><a class="reference internal" href="security/index.html">Security</a><ul>
<li class="toctree-l3"><a class="reference internal" href="security/abstract-authentication-middleware.html">Implementing Custom Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="security/security-backends.html">Security Backends</a></li>
<li class="toctree-l3"><a class="reference internal" href="security/guards.html">Guards</a></li>
<li class="toctree-l3"><a class="reference internal" href="security/excluding-and-including-endpoints.html">Excluding and including endpoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="security/jwt.html">JWT Security Backends</a></li>
<li class="toctree-l3"><a class="reference internal" href="security/secret-datastructures.html">Handling Secrets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="static-files.html">Static files</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom-types.html">Custom types</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="templating.html">Templating</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="websockets.html">WebSockets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/app.html">app</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/background_tasks.html">background_tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/channels/index.html">channels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/channels/plugin.html">plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/channels/subscriber.html">subscriber</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/channels/backends/index.html">backends</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/channels/backends/base.html">base</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/channels/backends/memory.html">memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/channels/backends/redis.html">redis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/channels/backends/psycopg.html">psycopg</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/channels/backends/asyncpg.html">asyncpg</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/cli.html">cli</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/config.html">config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/connection.html">connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/contrib/index.html">contrib</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/htmx.html">HTMX</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/jinja.html">jinja</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/jwt.html">jwt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/mako.html">mako</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/opentelemetry.html">opentelemetry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/piccolo.html">piccolo_orm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/pydantic.html">pydantic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/sqlalchemy/index.html">sqlalchemy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/sqlalchemy/plugins.html">plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/sqlalchemy/repository.html">repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/sqlalchemy/types.html">types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/sqlalchemy/base.html">base</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/sqlalchemy/dto.html">DTO</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controller.html">controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/concurrency.html">concurrency</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/data_extractors.html">data_extractors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/datastructures/index.html">datastructures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/datastructures/secret_values.html">secret_values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/di.html">di</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/dto/index.html">dto</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/config.html">config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/data_structures.html">data_structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/field.html">field</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/types.html">types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/base_dto.html">base_dto</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/msgspec_dto.html">msgspec_dto</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/dataclass_dto.html">dataclass_dto</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/enums.html">enums</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/events.html">events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/exceptions.html">exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/file_system.html">file_system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/handlers.html">handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/logging/index.html">logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/logging/config.html">config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/logging/picologging.html">picologging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/logging/standard.html">standard</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/middleware/index.html">middleware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/allowed_hosts.html">allowed_hosts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/authentication.html">authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/compression.html">compression</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/csrf.html">csrf</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/logging.html">logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/rate_limit.html">rate_limit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/session/index.html">session</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/middleware/session/base.html">base</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/middleware/session/client_side.html">client_side</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/middleware/session/server_side.html">server_side</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/constraints.html">constraints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/openapi/index.html">openapi</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/openapi/openapi.html">openapi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/openapi/plugins.html">plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/openapi/spec.html">spec</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/pagination.html">pagination</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/params.html">params</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/plugins/index.html">plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/plugins/attrs.html">attrs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/plugins/flash_messages.html">flash</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/plugins/htmx.html">htmx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/plugins/problem_details.html">problem details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/plugins/prometheus.html">prometheus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/plugins/pydantic.html">pydantic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/plugins/structlog.html">structlog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/plugins/sqlalchemy.html">sqlalchemy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/repository/index.html">repository</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/repository/abc.html">abc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/repository/filters.html">filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/repository/exceptions.html">exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/repository/testing.html">testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/repository/handlers.html">handlers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/response/index.html">response</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/response/base.html">base</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/response/file.html">file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/response/redirect.html">redirect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/response/streaming.html">streaming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/response/sse.html">SSE (Server Sent Events)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/response/template.html">template</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/router.html">router</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/routes.html">routes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/security/index.html">security</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/security/jwt.html">jwt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/security/session_auth.html">session_auth</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/serialization.html">serialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/static_files.html">static_files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/status_codes.html">status_code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/stores/index.html">stores</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/stores/base.html">base</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/stores/file.html">file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/stores/memory.html">memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/stores/redis.html">redis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/stores/registry.html">registry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/stores/valkey.html">valkey</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/template.html">template</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/testing.html">testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/types.html">types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/typing.html">typing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../benchmarks.html">Benchmarks</a></li>
</ul>
<p class="caption" role="heading" aria-level="3"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../migration/index.html">Migrating to Litestar</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../migration/flask.html">From Flask</a></li>
<li class="toctree-l2"><a class="reference internal" href="../migration/fastapi.html">From Starlette / FastAPI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../topics/index.html">Topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../topics/sync-vs-async.html">Sync vs. Async</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/deployment/index.html">Deployment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../topics/deployment/nginx-unit.html">NGINX Unit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/deployment/manually-with-asgi-server.html">Manually with ASGI server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/deployment/docker.html">Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topics/deployment/supervisor.html">Supervisor (Linux)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/todo-app/index.html">Developing a basic TODO application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/todo-app/0-application-basics.html">Application basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/todo-app/1-accessing-the-list.html">Accessing the list</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/todo-app/2-interacting-with-the-list.html">Making the list interactive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/todo-app/3-assembling-the-app.html">Recap and assembling the final application</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/sqlalchemy/index.html">Improving the TODO app with SQLAlchemy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/sqlalchemy/0-introduction.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/sqlalchemy/1-provide-session-with-di.html">Providing the session with DI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/sqlalchemy/2-serialization-plugin.html">Using the serialization plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/sqlalchemy/3-init-plugin.html">Using the init plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/sqlalchemy/4-final-touches-and-recap.html">Final touches and recap</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/dto-tutorial/index.html">Data Transfer Object Tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/01-simple-dto-exclude.html">Our first DTO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/02-nested-exclude.html">Excluding from nested models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/03-nested-collection-exclude.html">Excluding from collections of nested models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/04-max-nested-depth.html">Max nested depth</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/05-renaming-fields.html">Renaming fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/06-receiving-data.html">Receiving data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/07-read-only-fields.html">Read only fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/08-dto-data.html">Accessing the data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/09-updating.html">Updating instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/10-layered-dto-declarations.html">Declaring DTOs on app layers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/repository-tutorial/index.html">SQLAlchemy Repository Tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/01-modelling-and-features.html">Introduction to Database Modelling and Repository Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/01-modelling-and-features.html#modelling">Modelling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/01-modelling-and-features.html#full-code">Full Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/02-repository-introduction.html">Interacting with repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/02-repository-introduction.html#working-with-bulk-data-operations">Working with Bulk Data Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/02-repository-introduction.html#full-code">Full Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/03-repository-controller.html">Working with Controllers and Repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/03-repository-controller.html#full-code">Full Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/04-repository-other.html">Adding Additional Features to the Repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/04-repository-other.html#slug-fields">Slug Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/04-repository-other.html#full-code">Full Code</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading" aria-level="3"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contribution-guide.html">Contribution Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/search?q=user%3Alitestar-org+state%3Aopen+label%3A%22good+first+issue%22+++no%3Aassignee+&amp;type=issues=">Available Issues</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/litestar-org/.github?tab=coc-ov-file#readme">Code of Conduct</a></li>
</ul>

        </div>
      </div>
    </div>
  </aside>
  <div class="lside-overlay js-menu" role="button" aria-label="Close left sidebar" aria-controls="lside" aria-expanded="false"></div>
  <aside id="rside" class="sy-rside pb-3 w-64 shrink-0 order-last">
    <button class="rside-close js-menu xl:hidden" aria-label="Close Table of Contents" type="button" aria-controls="rside" aria-expanded="false">
      <i class="i-lucide close"></i>
    </button>
    <div class="sy-scrollbar sy-rside-inner px-6 xl:top-16 xl:sticky xl:pl-0 pt-6 pb-4"><div class="localtoc"><h3>On this page</h3><ul>
<li><a class="reference internal" href="#built-in-stores">Built-in stores</a></li>
<li><a class="reference internal" href="#interacting-with-a-store">Interacting with a store</a><ul>
<li><a class="reference internal" href="#getting-and-setting-values">Getting and setting values</a></li>
<li><a class="reference internal" href="#setting-an-expiry-time">Setting an expiry time</a><ul>
<li><a class="reference internal" href="#deleting-expired-values">Deleting expired values</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-can-be-stored">What can be stored</a></li>
<li><a class="reference internal" href="#namespacing">Namespacing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#managing-stores-with-the-registry">Managing stores with the registry</a><ul>
<li><a class="reference internal" href="#the-default-factory">The default factory</a></li>
<li><a class="reference internal" href="#using-the-registry-to-configure-integrations">Using the registry to configure integrations</a></li>
<li><a class="reference internal" href="#setting-up-the-default-factory-with-namespacing">Setting up the default factory with namespacing</a></li>
<li><a class="reference internal" href="#store-lifetime">Store lifetime</a></li>
</ul>
</li>
</ul>
</div><a class="js-repo-stats repo-stats flex items-center" href="https://github.com/litestar-org/litestar"
  data-type="github" data-user="litestar-org" data-repo="litestar">
  <span class="w-8 flex items-center justify-around shrink-0 text-3xl">
    <iconify-icon icon="simple-icons:github"></iconify-icon>
  </span>
  <span class="flex-grow px-2 break-all">
    <span>litestar-org/litestar</span>
    <span class="flex text-sm repo-stats-count">
      <span class="flex items-center pr-3">
        <iconify-icon icon="lucide:star"></iconify-icon>
        <strong class="js-repo-stars ml-1">0</strong>
      </span>
      <span class="flex items-center">
        <iconify-icon icon="lucide:git-fork"></iconify-icon>
        <strong class="js-repo-forks ml-1">0</strong>
      </span>
    </span>
  </span>
</a><div class="edit-this-page">
  <a href="https://github.com/litestar-org/litestar/blob/main/docs/usage/stores.rst">Edit this page</a>
</div><div id="ethical-ad-placement" data-ea-publisher="readthedocs"></div></div>
  </aside>
  <div class="rside-overlay js-menu" role="button" aria-label="Close Table of Contents" aria-controls="rside" aria-expanded="false"></div>
  <main class="sy-main w-full max-sm:max-w-full print:pt-6">
<div class="sy-breadcrumbs" role="navigation">
  <div class="sy-breadcrumbs-inner flex items-center">
    <div class="md:hidden mr-3">
      <button class="js-menu" aria-label="Menu" type="button" aria-controls="lside" aria-expanded="false">
        <i class="i-lucide menu"></i>
      </button>
    </div>
    <ol class="flex-1" itemscope itemtype="https://schema.org/BreadcrumbList"><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="../index.html"><span itemprop="name">Litestar</span></a>
        <span>/</span>
        <meta itemprop="position" content="1" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="index.html"><span itemprop="name">Usage</span></a>
        <span>/</span>
        <meta itemprop="position" content="2" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <strong itemprop="name">Stores</strong>
        <meta itemprop="position" content="3" />
      </li></ol>
    <div class="xl:hidden ml-1">
      <button class="js-menu" aria-label="Show table of contents" type="button" aria-controls="rside"
        aria-expanded="false">
        <i class="i-lucide outdent"></i>
      </button>
    </div>
  </div>
</div><div class="flex flex-col break-words justify-between">
      <div class="min-w-0 max-w-6xl px-6 pb-6 pt-8 xl:px-12">
        <article class="yue" role="main">
          <section id="stores">
<h1>Stores<a class="headerlink" href="#stores" title="Link to this heading">¶</a></h1>
<p>When developing applications, oftentimes a simply storage mechanism is needed, for example when
<a class="reference internal" href="caching.html"><span class="doc">caching response data</span></a> or storing data for
<a class="reference internal" href="middleware/builtin-middleware.html#server-side-sessions"><span class="std std-ref">server-side sessions</span></a>. In cases like these a
traditional database is often not needed, and a simple key/value store suffices.</p>
<p>Litestar provides several low level key value stores, offering an asynchronous interface to store data in a
thread- and process-safe manner. These stores are centrally managed via a
<a class="reference internal" href="../reference/stores/registry.html#litestar.stores.registry.StoreRegistry" title="litestar.stores.registry.StoreRegistry"><code class="xref py py-class docutils literal notranslate"><span class="pre">registry</span></code></a>, allowing easy access throughout the whole application and
third party integration (for example plugins).</p>
<section id="built-in-stores">
<h2>Built-in stores<a class="headerlink" href="#built-in-stores" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt><a class="reference internal" href="../reference/stores/memory.html#litestar.stores.memory.MemoryStore" title="litestar.stores.memory.MemoryStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">MemoryStore</span></code></a></dt><dd><p>A simple in-memory store, using a dictionary to hold data. This store offers no persistence and is not thread or multiprocess safe,
but it is suitable for basic applications such as caching and has generally the lowest overhead. This is the default store used by
Litestar internally. If you plan to enable <a class="reference internal" href="../reference/cli.html"><span class="doc">multiple web workers</span></a> and you need inter-process communication
across multiple worker processes, you should use one of the other non-memory stores instead.</p>
</dd>
<dt><a class="reference internal" href="../reference/stores/file.html#litestar.stores.file.FileStore" title="litestar.stores.file.FileStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileStore</span></code></a></dt><dd><p>A store that saves data as files on disk. Persistence is built in, and data is easy to extract and back up.
It is slower compared to in-memory solutions, and primarily suitable for situations when larger amounts of data
need to be stored, is particularly long-lived, or persistence has a very high importance. Offers <a class="reference internal" href="#namespacing">namespacing</a>.</p>
</dd>
<dt><a class="reference internal" href="../reference/stores/redis.html#litestar.stores.redis.RedisStore" title="litestar.stores.redis.RedisStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">RedisStore</span></code></a></dt><dd><p>A store backend by <a class="reference external" href="https://redis.io/">redis</a>. It offers all the guarantees and features of Redis, making it
suitable for almost all applications. Offers <a class="reference internal" href="#namespacing">namespacing</a>.</p>
</dd>
<dt><a class="reference internal" href="../reference/stores/valkey.html#litestar.stores.valkey.ValkeyStore" title="litestar.stores.valkey.ValkeyStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValkeyStore</span></code></a></dt><dd><p>A store backed by <a class="reference external" href="https://valkey.io">valkey</a>, a fork of Redis created as the result of Redis’ license changes.
Similarly to the RedisStore, it is suitable for almost all applications and supports <a class="reference internal" href="#namespacing">namespacing</a>.
At the time of writing, <code class="xref py py-class docutils literal notranslate"><span class="pre">Valkey</span></code> is equivalent to <code class="xref py py-class docutils literal notranslate"><span class="pre">redis.asyncio.Redis</span></code>,
and all notes pertaining to Redis also apply to Valkey.</p>
</dd>
</dl>
<div class="info admonition">
<p class="admonition-title">Why not memcached?</p>
<p>Memcached is not a supported backend, and will likely also not be added in the future. The reason for this is simply
that it’s hard to support memcached properly, since it’s missing a lot of basic functionality like checking a key’s
expiry time, or something like Redis’ <a class="reference external" href="https://redis.io/commands/scan/">SCAN</a> command, which allows to implement
pattern-based deletion of keys.</p>
</div>
</section>
<section id="interacting-with-a-store">
<h2>Interacting with a store<a class="headerlink" href="#interacting-with-a-store" title="Link to this heading">¶</a></h2>
<p>The most fundamental operations of a store are:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/stores/base.html#litestar.stores.base.Store.get" title="litestar.stores.base.Store.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get</span></code></a>: To retrieve a stored value</p></li>
<li><p><a class="reference internal" href="../reference/stores/base.html#litestar.stores.base.Store.set" title="litestar.stores.base.Store.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set</span></code></a>: To set a value in the store</p></li>
<li><p><a class="reference internal" href="../reference/stores/base.html#litestar.stores.base.Store.delete" title="litestar.stores.base.Store.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete</span></code></a>: To delete a stored value</p></li>
</ul>
<section id="getting-and-setting-values">
<h3>Getting and setting values<a class="headerlink" href="#getting-and-setting-values" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.stores.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemoryStore</span>
</span><span data-line="2">
</span><span data-line="3"><span class="n">store</span> <span class="o">=</span> <span class="n">MemoryStore</span><span class="p">()</span>
</span><span data-line="4">
</span><span data-line="5">
</span><span data-line="6"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="7">    <span class="n">value</span> <span class="o">=</span> <span class="k">await</span> <span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;key&quot;</span><span class="p">)</span>
</span><span data-line="8">    <span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># this will print &#39;None&#39;, as no store with this key has been defined yet</span>
</span><span data-line="9">
</span><span data-line="10">    <span class="k">await</span> <span class="n">store</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;key&quot;</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
</span><span data-line="11">    <span class="n">value</span> <span class="o">=</span> <span class="k">await</span> <span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;key&quot;</span><span class="p">)</span>
</span><span data-line="12">    <span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></pre></div>
</div>
</section>
<section id="setting-an-expiry-time">
<h3>Setting an expiry time<a class="headerlink" href="#setting-an-expiry-time" title="Link to this heading">¶</a></h3>
<p>The <a class="reference internal" href="../reference/stores/base.html#litestar.stores.base.Store.set" title="litestar.stores.base.Store.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set</span></code></a> method has an optional parameter <code class="docutils literal notranslate"><span class="pre">expires_in</span></code>, allowing to specify a time after
which a stored value should expire.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">asyncio</span><span class="w"> </span><span class="kn">import</span> <span class="n">sleep</span>
</span><span data-line="2">
</span><span data-line="3"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.stores.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemoryStore</span>
</span><span data-line="4">
</span><span data-line="5"><span class="n">store</span> <span class="o">=</span> <span class="n">MemoryStore</span><span class="p">()</span>
</span><span data-line="6">
</span><span data-line="7">
</span><span data-line="8"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="9">    <span class="k">await</span> <span class="n">store</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">expires_in</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span data-line="10">    <span class="n">value</span> <span class="o">=</span> <span class="k">await</span> <span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
</span><span data-line="11">    <span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span data-line="12">
</span><span data-line="13">    <span class="k">await</span> <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span data-line="14">    <span class="n">value</span> <span class="o">=</span> <span class="k">await</span> <span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>  <span class="c1"># this will return &#39;None&#39;, since the key has expired</span>
</span><span data-line="15">    <span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is up to the individual store to decide how to handle expired values, and implementations may differ. The
<a class="reference internal" href="../reference/stores/redis.html#litestar.stores.redis.RedisStore" title="litestar.stores.redis.RedisStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">redis</span> <span class="pre">based</span> <span class="pre">store</span></code></a> for example uses Redis’ native expiry mechanism to handle this,
while the <a class="reference internal" href="../reference/stores/file.html#litestar.stores.file.FileStore" title="litestar.stores.file.FileStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileStore</span></code></a> only deletes expired values when they’re trying to be accessed,
or explicitly deleted via the <a class="reference internal" href="../reference/stores/file.html#litestar.stores.file.FileStore.delete_expired" title="litestar.stores.file.FileStore.delete_expired"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_expired</span></code></a> method.</p>
</div>
<p>It is also possible to extend the expiry time on each access, which is useful for applications such as server side
sessions or LRU caches:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">asyncio</span><span class="w"> </span><span class="kn">import</span> <span class="n">sleep</span>
</span><span data-line="2">
</span><span data-line="3"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.stores.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemoryStore</span>
</span><span data-line="4">
</span><span data-line="5"><span class="n">store</span> <span class="o">=</span> <span class="n">MemoryStore</span><span class="p">()</span>
</span><span data-line="6">
</span><span data-line="7">
</span><span data-line="8"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="9">    <span class="k">await</span> <span class="n">store</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">expires_in</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span data-line="10">    <span class="k">await</span> <span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</span><span data-line="11">
</span><span data-line="12">    <span class="k">await</span> <span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="n">renew_for</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># this will reset the time to live to one second</span>
</span><span data-line="13">
</span><span data-line="14">    <span class="k">await</span> <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span data-line="15">    <span class="c1"># it has now been 1.5 seconds since the key was set with a life time of one second,</span>
</span><span data-line="16">    <span class="c1"># so it should have expired however, since it was renewed for one second, it is still available</span>
</span><span data-line="17">    <span class="n">value</span> <span class="o">=</span> <span class="k">await</span> <span class="n">store</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>
</span><span data-line="18">    <span class="nb">print</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></pre></div>
</div>
<section id="deleting-expired-values">
<h4>Deleting expired values<a class="headerlink" href="#deleting-expired-values" title="Link to this heading">¶</a></h4>
<p>When using a <a class="reference internal" href="../reference/stores/memory.html#litestar.stores.memory.MemoryStore" title="litestar.stores.memory.MemoryStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">MemoryStore</span></code></a> or <a class="reference internal" href="../reference/stores/file.html#litestar.stores.file.FileStore" title="litestar.stores.file.FileStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileStore</span></code></a>, expired data won’t be
deleted automatically. Instead, it will only happen when the data is being accessed, or if this process is invoked
explicitly via <a class="reference internal" href="../reference/stores/memory.html#litestar.stores.memory.MemoryStore.delete_expired" title="litestar.stores.memory.MemoryStore.delete_expired"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MemoryStore.delete_expired</span></code></a> or
<a class="reference internal" href="../reference/stores/file.html#litestar.stores.file.FileStore.delete_expired" title="litestar.stores.file.FileStore.delete_expired"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FileStore.delete_expired</span></code></a> respectively.</p>
<p>It’s a good practice to call <code class="docutils literal notranslate"><span class="pre">delete_expired</span></code> periodically, to ensure the size of the stored values does not grow
indefinitely.</p>
<p>In this example, an <a class="reference internal" href="lifecycle-hooks.html#after-response"><span class="std std-ref">after_response</span></a> handler is used to delete expired items at most every 30
second:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
</span><span data-line="2">
</span><span data-line="3"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">Request</span>
</span><span data-line="4"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.stores.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemoryStore</span>
</span><span data-line="5">
</span><span data-line="6"><span class="n">memory_store</span> <span class="o">=</span> <span class="n">MemoryStore</span><span class="p">()</span>
</span><span data-line="7">
</span><span data-line="8">
</span><span data-line="9"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">after_response</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">Request</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="10">    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>
</span><span data-line="11">    <span class="n">last_cleared</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;store_last_cleared&quot;</span><span class="p">,</span> <span class="n">now</span><span class="p">)</span>
</span><span data-line="12">    <span class="k">if</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span> <span class="o">-</span> <span class="n">last_cleared</span> <span class="o">&gt;</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">30</span><span class="p">):</span>
</span><span data-line="13">        <span class="k">await</span> <span class="n">memory_store</span><span class="o">.</span><span class="n">delete_expired</span><span class="p">()</span>
</span><span data-line="14">    <span class="n">app</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s2">&quot;store_last_cleared&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">now</span>
</span><span data-line="15">
</span><span data-line="16">
</span><span data-line="17"><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">after_response</span><span class="o">=</span><span class="n">after_response</span><span class="p">)</span>
</span></pre></div>
</div>
<p>When using the <a class="reference internal" href="../reference/stores/file.html#litestar.stores.file.FileStore" title="litestar.stores.file.FileStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileStore</span></code></a>, expired items may also be deleted on startup:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
</span><span data-line="2">
</span><span data-line="3"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span>
</span><span data-line="4"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.stores.file</span><span class="w"> </span><span class="kn">import</span> <span class="n">FileStore</span>
</span><span data-line="5">
</span><span data-line="6"><span class="n">file_store</span> <span class="o">=</span> <span class="n">FileStore</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">))</span>
</span><span data-line="7">
</span><span data-line="8">
</span><span data-line="9"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">on_startup</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="10">    <span class="k">await</span> <span class="n">file_store</span><span class="o">.</span><span class="n">delete_expired</span><span class="p">()</span>
</span><span data-line="11">
</span><span data-line="12">
</span><span data-line="13"><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">on_startup</span><span class="o">=</span><span class="p">[</span><span class="n">on_startup</span><span class="p">])</span>
</span></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the <a class="reference internal" href="../reference/stores/memory.html#litestar.stores.memory.MemoryStore" title="litestar.stores.memory.MemoryStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">MemoryStore</span></code></a>, this is not needed as the data is simply stored in a dictionary.
This means that every time a new instance of this store is created, it will start out empty.</p>
</div>
</section>
</section>
<section id="what-can-be-stored">
<h3>What can be stored<a class="headerlink" href="#what-can-be-stored" title="Link to this heading">¶</a></h3>
<p>Stores generally operate on <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>; They accept bytes to store, and will return bytes. For convenience, the
<a class="reference internal" href="../reference/stores/base.html#litestar.stores.base.Store.set" title="litestar.stores.base.Store.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set</span></code></a> method also allows to pass in strings, which will be UTF-8 encoded before being stored.
This means that <a class="reference internal" href="../reference/stores/base.html#litestar.stores.base.Store.get" title="litestar.stores.base.Store.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get</span></code></a> will return bytes even when a string has been passed to
<a class="reference internal" href="../reference/stores/base.html#litestar.stores.base.Store.set" title="litestar.stores.base.Store.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set</span></code></a>.</p>
<p>The reason for this limitation is simple: Different backends used to store the data offer vastly different encoding,
storage, and (de)serialization capacities. Since stores are designed to be interchangeable, this means settling for a
common denominator, a type that all backends will support. <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> meet these requirements and make it possible
to store a very wide variety of data.</p>
<div class="admonition-technical-details admonition">
<p class="admonition-title">Technical details</p>
<p><a class="reference internal" href="../reference/stores/memory.html#litestar.stores.memory.MemoryStore" title="litestar.stores.memory.MemoryStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">MemoryStore</span></code></a> differs from this, because it does not do any encoding before storing
the value. This means that it’s technically possible to store arbitrary objects in this store, and get the same
object back. However, this is not reflected in the store’s typing, as the underlying <a class="reference internal" href="../reference/stores/base.html#litestar.stores.base.Store" title="litestar.stores.base.Store"><code class="xref py py-class docutils literal notranslate"><span class="pre">Store</span></code></a>
interface does not guarantee this behaviour, and it is not guaranteed that
<a class="reference internal" href="../reference/stores/memory.html#litestar.stores.memory.MemoryStore" title="litestar.stores.memory.MemoryStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">MemoryStore</span></code></a> will always behave in this case.</p>
</div>
</section>
<section id="namespacing">
<h3>Namespacing<a class="headerlink" href="#namespacing" title="Link to this heading">¶</a></h3>
<p>When stores are being used for more than one purpose, some extra bookkeeping is required to safely perform bulk
operations such as <a class="reference internal" href="../reference/stores/base.html#litestar.stores.base.Store.delete_all" title="litestar.stores.base.Store.delete_all"><code class="xref py py-class docutils literal notranslate"><span class="pre">delete_all</span></code></a>. If for example a
<a class="reference internal" href="../reference/stores/redis.html#litestar.stores.redis.RedisStore" title="litestar.stores.redis.RedisStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">RedisStore</span></code></a> was used, simply issuing a <a class="reference external" href="https://redis.io/commands/flushall/">FLUSHALL</a>
command might have unforeseen consequences.</p>
<p>To help with this, some stores offer namespacing capabilities, allowing to build a simple hierarchy of stores.
These come with the additional <a class="reference internal" href="../reference/stores/base.html#litestar.stores.base.NamespacedStore.with_namespace" title="litestar.stores.base.NamespacedStore.with_namespace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">with_namespace</span></code></a> method, which returns a
new <a class="reference internal" href="../reference/stores/base.html#litestar.stores.base.NamespacedStore" title="litestar.stores.base.NamespacedStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">NamespacedStore</span></code></a> instance. Once a namespaced store is created, operations on it
will only affect itself and its child namespaces.</p>
<p>When using the <a class="reference internal" href="../reference/stores/redis.html#litestar.stores.redis.RedisStore" title="litestar.stores.redis.RedisStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">RedisStore</span></code></a>, this allows to reuse the same underlying
<code class="xref py py-class docutils literal notranslate"><span class="pre">Redis</span></code> instance and connection, while ensuring isolation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="../reference/stores/redis.html#litestar.stores.redis.RedisStore" title="litestar.stores.redis.RedisStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">RedisStore</span></code></a> uses the <code class="docutils literal notranslate"><span class="pre">LITESTAR</span></code> namespace by default; all keys created by this store,
will use the <code class="docutils literal notranslate"><span class="pre">LITESTAR</span></code> prefix when storing data in redis.
<a class="reference internal" href="../reference/stores/redis.html#litestar.stores.redis.RedisStore.delete_all" title="litestar.stores.redis.RedisStore.delete_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RedisStore.delete_all</span></code></a> is implemented in such a way that it will only delete
keys matching the current namespace, making it safe and side-effect free.</p>
<p>This can be turned off by explicitly passing <code class="docutils literal notranslate"><span class="pre">namespace=None</span></code> to the store when creating a new instance.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.stores.redis</span><span class="w"> </span><span class="kn">import</span> <span class="n">RedisStore</span>
</span><span data-line="3">
</span><span data-line="4"><span class="n">root_store</span> <span class="o">=</span> <span class="n">RedisStore</span><span class="o">.</span><span class="n">with_client</span><span class="p">()</span>
</span><span data-line="5"><span class="n">cache_store</span> <span class="o">=</span> <span class="n">root_store</span><span class="o">.</span><span class="n">with_namespace</span><span class="p">(</span><span class="s2">&quot;cache&quot;</span><span class="p">)</span>
</span><span data-line="6"><span class="n">session_store</span> <span class="o">=</span> <span class="n">root_store</span><span class="o">.</span><span class="n">with_namespace</span><span class="p">(</span><span class="s2">&quot;sessions&quot;</span><span class="p">)</span>
</span><span data-line="7">
</span><span data-line="8">
</span><span data-line="9"><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">before_shutdown</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span data-line="10">    <span class="k">await</span> <span class="n">cache_store</span><span class="o">.</span><span class="n">delete_all</span><span class="p">()</span>
</span><span data-line="11">
</span><span data-line="12">
</span><span data-line="13"><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">before_shutdown</span><span class="o">=</span><span class="p">[</span><span class="n">before_shutdown</span><span class="p">])</span>
</span></pre></div>
</div>
<p>Even though all three stores defined here use the same Redis instance, calling <code class="docutils literal notranslate"><span class="pre">delete_all</span></code> on the <code class="docutils literal notranslate"><span class="pre">cache_store</span></code>
will not affect data within the <code class="docutils literal notranslate"><span class="pre">session_store</span></code>.</p>
<p>Defining stores hierarchically like this still allows to easily clear everything, by simply calling
<a class="reference internal" href="../reference/stores/base.html#litestar.stores.base.Store.delete_all" title="litestar.stores.base.Store.delete_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete_all</span></code></a> on the root store.</p>
</section>
</section>
<section id="managing-stores-with-the-registry">
<h2>Managing stores with the registry<a class="headerlink" href="#managing-stores-with-the-registry" title="Link to this heading">¶</a></h2>
<p>The <a class="reference internal" href="../reference/stores/registry.html#litestar.stores.registry.StoreRegistry" title="litestar.stores.registry.StoreRegistry"><code class="xref py py-class docutils literal notranslate"><span class="pre">StoreRegistry</span></code></a> is a central place through which stores can be
configured and managed, and can help to easily access stores set up and used by other parts of the application, Litestar
internals or third party integrations. It is available throughout the whole application context via the
<a class="reference internal" href="../reference/app.html#litestar.app.Litestar" title="litestar.app.Litestar"><code class="xref py py-class docutils literal notranslate"><span class="pre">Litestar.stores</span></code></a> attribute.</p>
<p>It operates on a few basic principles:</p>
<ul class="simple">
<li><p>An initial mapping of stores can be provided to the registry</p></li>
<li><p>Registered stores can be requested with <a class="reference internal" href="../reference/stores/registry.html#litestar.stores.registry.StoreRegistry.get" title="litestar.stores.registry.StoreRegistry.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get</span></code></a></p></li>
<li><p>If a store has been requested that has not been registered yet, a store of that name will be created and registered
using the <a class="reference internal" href="#the-default-factory">the default factory</a></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.stores.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemoryStore</span>
</span><span data-line="3">
</span><span data-line="4"><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">([],</span> <span class="n">stores</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;memory&quot;</span><span class="p">:</span> <span class="n">MemoryStore</span><span class="p">()})</span>
</span><span data-line="5">
</span><span data-line="6"><span class="n">memory_store</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">stores</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;memory&quot;</span><span class="p">)</span>
</span><span data-line="7"><span class="c1"># this is the previously defined store</span>
</span><span data-line="8">
</span><span data-line="9"><span class="n">some_other_store</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">stores</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;something_else&quot;</span><span class="p">)</span>
</span><span data-line="10"><span class="c1"># this will be a newly created instance</span>
</span><span data-line="11">
</span><span data-line="12"><span class="k">assert</span> <span class="n">app</span><span class="o">.</span><span class="n">stores</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;something_else&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="n">some_other_store</span>
</span><span data-line="13"><span class="c1"># but subsequent requests will return the same instance</span>
</span></pre></div>
</div>
<p>This pattern offers isolation of stores, and an easy way to configure stores used by middlewares and other Litestar
features or third party integrations.</p>
<p>In the following example, the store set up by the
<a class="reference internal" href="../reference/middleware/rate_limit.html#litestar.middleware.rate_limit.RateLimitMiddleware" title="litestar.middleware.rate_limit.RateLimitMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">RateLimitMiddleware</span></code></a> is accessed via the registry:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.middleware.rate_limit</span><span class="w"> </span><span class="kn">import</span> <span class="n">RateLimitConfig</span>
</span><span data-line="3">
</span><span data-line="4"><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">middleware</span><span class="o">=</span><span class="p">[</span><span class="n">RateLimitConfig</span><span class="p">((</span><span class="s2">&quot;second&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">middleware</span><span class="p">])</span>
</span><span data-line="5"><span class="n">rate_limit_store</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">stores</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rate_limit&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
<p>This works because <a class="reference internal" href="../reference/middleware/rate_limit.html#litestar.middleware.rate_limit.RateLimitMiddleware" title="litestar.middleware.rate_limit.RateLimitMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">RateLimitMiddleware</span></code></a> will request
its store internally via <code class="docutils literal notranslate"><span class="pre">app.stores.get</span></code> as well.</p>
<section id="the-default-factory">
<h3>The default factory<a class="headerlink" href="#the-default-factory" title="Link to this heading">¶</a></h3>
<p>The pattern above is made possible by using the registry’s default factory; A callable that gets invoked
every time a store is requested that hasn’t been registered yet. It’s similar to the <code class="docutils literal notranslate"><span class="pre">default</span></code> argument to
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict.get" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dict.get()</span></code></a>.</p>
<p>By default, the default factory is a function that returns a new
<a class="reference internal" href="../reference/stores/memory.html#litestar.stores.memory.MemoryStore" title="litestar.stores.memory.MemoryStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">MemoryStore</span></code></a> instance. This behaviour can be changed by supplying a
custom <code class="docutils literal notranslate"><span class="pre">default_factory</span></code> method to the registry.</p>
<p>To make use of this, a registry instance can be passed directly to the application:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.stores.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemoryStore</span>
</span><span data-line="3"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.stores.registry</span><span class="w"> </span><span class="kn">import</span> <span class="n">StoreRegistry</span>
</span><span data-line="4">
</span><span data-line="5"><span class="n">memory_store</span> <span class="o">=</span> <span class="n">MemoryStore</span><span class="p">()</span>
</span><span data-line="6">
</span><span data-line="7">
</span><span data-line="8"><span class="k">def</span><span class="w"> </span><span class="nf">default_factory</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MemoryStore</span><span class="p">:</span>
</span><span data-line="9">    <span class="k">return</span> <span class="n">memory_store</span>
</span><span data-line="10">
</span><span data-line="11">
</span><span data-line="12"><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">([],</span> <span class="n">stores</span><span class="o">=</span><span class="n">StoreRegistry</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">default_factory</span><span class="p">))</span>
</span></pre></div>
</div>
<p>The registry will now return the same <a class="reference internal" href="../reference/stores/memory.html#litestar.stores.memory.MemoryStore" title="litestar.stores.memory.MemoryStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">MemoryStore</span></code></a> every time an undefined
store is being requested.</p>
</section>
<section id="using-the-registry-to-configure-integrations">
<h3>Using the registry to configure integrations<a class="headerlink" href="#using-the-registry-to-configure-integrations" title="Link to this heading">¶</a></h3>
<p>This mechanism also allows to control the stores used by various integrations, such as middlewares:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
</span><span data-line="2">
</span><span data-line="3"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span>
</span><span data-line="4"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.middleware.session.server_side</span><span class="w"> </span><span class="kn">import</span> <span class="n">ServerSideSessionConfig</span>
</span><span data-line="5"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.stores.file</span><span class="w"> </span><span class="kn">import</span> <span class="n">FileStore</span>
</span><span data-line="6"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.stores.redis</span><span class="w"> </span><span class="kn">import</span> <span class="n">RedisStore</span>
</span><span data-line="7">
</span><span data-line="8"><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span>
</span><span data-line="9">    <span class="n">stores</span><span class="o">=</span><span class="p">{</span>
</span><span data-line="10">        <span class="s2">&quot;sessions&quot;</span><span class="p">:</span> <span class="n">RedisStore</span><span class="o">.</span><span class="n">with_client</span><span class="p">(),</span>
</span><span data-line="11">        <span class="s2">&quot;response_cache&quot;</span><span class="p">:</span> <span class="n">FileStore</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;response-cache&quot;</span><span class="p">)),</span>
</span><span data-line="12">    <span class="p">},</span>
</span><span data-line="13">    <span class="n">middleware</span><span class="o">=</span><span class="p">[</span><span class="n">ServerSideSessionConfig</span><span class="p">()</span><span class="o">.</span><span class="n">middleware</span><span class="p">],</span>
</span><span data-line="14"><span class="p">)</span>
</span></pre></div>
</div>
<p>In this example, the registry is being set up with stores using the <code class="docutils literal notranslate"><span class="pre">sessions</span></code> and <code class="docutils literal notranslate"><span class="pre">response_cache</span></code> keys. These are
not magic constants, but instead configuration values that can be changed. Those names just happen to be their default
values. Adjusting those default values allows to easily reuse stores, without the need for a more complex setup:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
</span><span data-line="2">
</span><span data-line="3"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span>
</span><span data-line="4"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.config.response_cache</span><span class="w"> </span><span class="kn">import</span> <span class="n">ResponseCacheConfig</span>
</span><span data-line="5"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.middleware.rate_limit</span><span class="w"> </span><span class="kn">import</span> <span class="n">RateLimitConfig</span>
</span><span data-line="6"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.middleware.session.server_side</span><span class="w"> </span><span class="kn">import</span> <span class="n">ServerSideSessionConfig</span>
</span><span data-line="7"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.stores.file</span><span class="w"> </span><span class="kn">import</span> <span class="n">FileStore</span>
</span><span data-line="8"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.stores.redis</span><span class="w"> </span><span class="kn">import</span> <span class="n">RedisStore</span>
</span><span data-line="9">
</span><span data-line="10"><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span>
</span><span data-line="11">    <span class="n">stores</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;redis&quot;</span><span class="p">:</span> <span class="n">RedisStore</span><span class="o">.</span><span class="n">with_client</span><span class="p">(),</span> <span class="s2">&quot;file&quot;</span><span class="p">:</span> <span class="n">FileStore</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">))},</span>
</span><span data-line="12">    <span class="n">response_cache_config</span><span class="o">=</span><span class="n">ResponseCacheConfig</span><span class="p">(</span><span class="n">store</span><span class="o">=</span><span class="s2">&quot;redis&quot;</span><span class="p">),</span>
</span><span data-line="13">    <span class="n">middleware</span><span class="o">=</span><span class="p">[</span>
</span><span data-line="14">        <span class="n">ServerSideSessionConfig</span><span class="p">(</span><span class="n">store</span><span class="o">=</span><span class="s2">&quot;file&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">middleware</span><span class="p">,</span>
</span><span data-line="15">        <span class="n">RateLimitConfig</span><span class="p">(</span><span class="n">rate_limit</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;second&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">store</span><span class="o">=</span><span class="s2">&quot;redis&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">middleware</span><span class="p">,</span>
</span><span data-line="16">    <span class="p">],</span>
</span><span data-line="17"><span class="p">)</span>
</span></pre></div>
</div>
<p>Now the rate limit middleware and response caching will use the <code class="docutils literal notranslate"><span class="pre">redis</span></code> store, while sessions will be store in the
<code class="docutils literal notranslate"><span class="pre">file</span></code> store.</p>
</section>
<section id="setting-up-the-default-factory-with-namespacing">
<h3>Setting up the default factory with namespacing<a class="headerlink" href="#setting-up-the-default-factory-with-namespacing" title="Link to this heading">¶</a></h3>
<p>The default factory can be used in conjunction with <a class="reference internal" href="#namespacing">namespacing</a> to create isolated, hierarchically organized stores,
with minimal boilerplate:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">get</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.middleware.rate_limit</span><span class="w"> </span><span class="kn">import</span> <span class="n">RateLimitConfig</span>
</span><span data-line="3"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.middleware.session.server_side</span><span class="w"> </span><span class="kn">import</span> <span class="n">ServerSideSessionConfig</span>
</span><span data-line="4"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.stores.redis</span><span class="w"> </span><span class="kn">import</span> <span class="n">RedisStore</span>
</span><span data-line="5"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.stores.registry</span><span class="w"> </span><span class="kn">import</span> <span class="n">StoreRegistry</span>
</span><span data-line="6">
</span><span data-line="7"><span class="n">root_store</span> <span class="o">=</span> <span class="n">RedisStore</span><span class="o">.</span><span class="n">with_client</span><span class="p">()</span>
</span><span data-line="8">
</span><span data-line="9">
</span><span data-line="10"><span class="nd">@get</span><span class="p">(</span><span class="n">cache</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span data-line="11"><span class="k">def</span><span class="w"> </span><span class="nf">cached_handler</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span data-line="12">    <span class="c1"># this will use app.stores.get(&quot;response_cache&quot;)</span>
</span><span data-line="13">    <span class="k">return</span> <span class="s2">&quot;Hello, world!&quot;</span>
</span><span data-line="14">
</span><span data-line="15">
</span><span data-line="16"><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span>
</span><span data-line="17">    <span class="p">[</span><span class="n">cached_handler</span><span class="p">],</span>
</span><span data-line="18">    <span class="n">stores</span><span class="o">=</span><span class="n">StoreRegistry</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">root_store</span><span class="o">.</span><span class="n">with_namespace</span><span class="p">),</span>
</span><span data-line="19">    <span class="n">middleware</span><span class="o">=</span><span class="p">[</span>
</span><span data-line="20">        <span class="n">RateLimitConfig</span><span class="p">((</span><span class="s2">&quot;second&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">middleware</span><span class="p">,</span>
</span><span data-line="21">        <span class="n">ServerSideSessionConfig</span><span class="p">()</span><span class="o">.</span><span class="n">middleware</span><span class="p">,</span>
</span><span data-line="22">    <span class="p">],</span>
</span><span data-line="23"><span class="p">)</span>
</span></pre></div>
</div>
<p>Without any extra configuration, every call to <code class="docutils literal notranslate"><span class="pre">app.stores.get</span></code> with a unique name will return a namespace for this
name only, while re-using the underlying Redis instance.</p>
</section>
<section id="store-lifetime">
<h3>Store lifetime<a class="headerlink" href="#store-lifetime" title="Link to this heading">¶</a></h3>
<p>Stores may not be automatically closed when the application is shut down.
This is the case in particular for the RedisStore if you are not using the class method <a class="reference internal" href="../reference/stores/redis.html#litestar.stores.redis.RedisStore.with_client" title="litestar.stores.redis.RedisStore.with_client"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RedisStore.with_client</span></code></a> and passing in your own Redis instance.
In this case you’re responsible to close the Redis instance yourself.</p>
</section>
</section>
</section>

        </article><button class="back-to-top" type="button">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
  </svg>
  <span>Back to top</span>
</button><div class="navigation flex print:hidden"><div class="navigation-prev">
    <a href="custom-types.html">
      <i class="i-lucide chevron-left"></i>
      <div class="page-info">
        <span>Previous</span><div class="title">Custom types</div></div>
    </a>
  </div><div class="navigation-next">
    <a href="templating.html">
      <div class="page-info">
        <span>Next</span>
        <div class="title">Templating</div>
      </div>
      <i class="i-lucide chevron-right"></i>
    </a>
  </div></div></div>
    </div>
  </main>
</div>
<footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright"><p>2025, Litestar Organization</p>
  
  <p>
    Made with
    
    <a href="https://www.sphinx-doc.org/">Sphinx</a> and
    
    <a href="https://shibuya.lepture.com">Shibuya theme</a>.
  </p>
</div>
      <div class="sy-foot-socials">
<a href="https://twitter.com/LitestarAPI" aria-label="X (Twitter)">
  <iconify-icon icon="prime:twitter"></iconify-icon>
</a>
<a href="https://discord.gg/litestar" aria-label="Discord">
  <iconify-icon icon="simple-icons:discord"></iconify-icon>
</a>
<a href="https://www.reddit.com/r/LitestarAPI" aria-label="Reddit">
  <iconify-icon icon="simple-icons:reddit"></iconify-icon>
</a></div>
    </div>
  </div>
</footer>
      <script src="../_static/documentation_options.js?v=ad404a94"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script src="../_static/litestar-theme.js?v=ab2dcc9e"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
      <script src="../_static/design-tabs.js?v=f930bc37"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script src="../_static/shibuya.js?v=c477d091"></script>
      <script src="../_static/versioning.js?v=9ab184b9"></script></body>
</html>