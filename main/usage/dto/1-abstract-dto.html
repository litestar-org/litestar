<!DOCTYPE html>
<html lang="en" data-accent-color="amber" data-content_root="../../">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><title>AbstractDTO - Litestar Framework</title><link rel="shortcut icon" href="../../_static/favicon.svg"/><link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Implementing Custom DTO Classes" href="2-creating-custom-dto-classes.html" /><link rel="prev" title="Basic Use" href="0-basic-use.html" /><script>
    function setColorMode(t){let e=document.documentElement;e.setAttribute("data-color-mode",t);let a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,s=t;"auto"===t&&(s=a?"dark":"light"),"light"===s?(e.classList.remove("dark"),e.classList.add("light")):(e.classList.remove("light"),e.classList.add("dark"))}
    setColorMode(localStorage._theme||"auto");
  </script><link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=397bb51e" />
    <link rel="stylesheet" type="text/css" href="../../_static/shibuya.css?v=76b6f612" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_paramlinks.css" />
    <link media="print" rel="stylesheet" type="text/css" href="../../_static/print.css?v=20ff2c19" />
    <link rel="stylesheet" type="text/css" href="../../_static/style.css?v=50ea2f63" />
    <link rel="stylesheet" type="text/css" href="../../_static/litestar-sphinx-theme.css?v=f8f74789" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --sy-f-text: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
  --sy-f-heading: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
}
</style>
    <meta property="og:type" content="website"/><meta property="og:title" content="AbstractDTO"/>
<meta name="twitter:card" content="summary"/>
<meta property="og:image" content="_static/logo-light.png"/>
  </head>
<body><div class="announcement">
    <div class="announcement-inner">
      <p>You are viewing the <bold>local</bold> version of the documentation. Click here to go to the latest version.</p>
      <button class="announcement-close" aria-label="Close announcement">
        <i class="i-lucide close"></i>
      </button>
    </div>
  </div><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <a class="sy-head-brand" href="/">
      <img class="light-logo" src="../../_static/logo-light.png" alt="Litestar" height="28" loading="lazy" />
      <img class="dark-logo" src="../../_static/logo-dark.png" alt="Litestar" height="28" loading="lazy" />
      <strong>Litestar</strong>
    </a>
    <div class="sy-head-nav" id="head-nav">
      <nav class="sy-head-links"><ul><li class="link"><a href="../../index.html">Home</a></li>
      <li class="link"><button class="js-menu" type="button" id="nav-trigger-2" aria-controls="nav-children-2">
            <span>Community</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul id="nav-children-2" aria-labelledby="nav-trigger-2"><li><a href="../../contribution-guide.html">
                <span>Contributing</span>
                <small>Learn how to contribute to the Litestar project</small>
              </a></li><li><a href="https://github.com/litestar-org/.github?tab=coc-ov-file">
                <span>Code of Conduct</span>
                <small>Review the etiquette for interacting with the Litestar community</small>
              </a></li><li><a href="https://github.com/litestar-org/.github?tab=coc-ov-file#security-ov-file">
                <span>Security</span>
                <small>Overview of Litestar's security protocols</small>
              </a></li></ul>
      </li>
      <li class="link"><button class="js-menu" type="button" id="nav-trigger-3" aria-controls="nav-children-3">
            <span>About</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul id="nav-children-3" aria-labelledby="nav-trigger-3"><li><a href="https://litestar.dev/about/organization">
                <span>Litestar Organization</span>
                <small>Details about the Litestar organization</small>
              </a></li><li><a href="https://litestar.dev/about/litestar-releases">
                <span>Releases</span>
                <small>Explore the release process, versioning, and deprecation policy for Litestar</small>
              </a></li></ul>
      </li>
      <li class="link"><button class="js-menu" type="button" id="nav-trigger-4" aria-controls="nav-children-4">
            <span>Release notes</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul id="nav-children-4" aria-labelledby="nav-trigger-4"><li><a href="../../release-notes/whats-new-3.html">
                <span>What's new in 3.0</span>
                <small>Explore the new features in Litestar 3.0</small>
              </a></li><li><a href="../../release-notes/changelog.html">
                <span>3.x Changelog</span>
                <small>All changes in the 3.x series</small>
              </a></li><li><a href="https://docs.litestar.dev/2/release-notes/changelog.html">
                <span>2.x Changelog</span>
                <small>All changes in the 2.x series</small>
              </a></li></ul>
      </li>
      <li class="link"><button class="js-menu" type="button" id="nav-trigger-5" aria-controls="nav-children-5">
            <span>Help</span>
            <i class="i-lucide chevron-down"></i>
          </button>
        <ul id="nav-children-5" aria-labelledby="nav-trigger-5"><li><a href="https://discord.gg/litestar">
                <span>Discord Help Forum</span>
                <small>Dedicated Discord help forum</small>
              </a></li><li><a href="https://github.com/orgs/litestar-org/discussions">
                <span>GitHub Discussions</span>
                <small>GitHub Discussions</small>
              </a></li><li><a href="https://stackoverflow.com/questions/tagged/litestar">
                <span>Stack Overflow</span>
                <small>We monitor the <code><b>litestar</b></code> tag on Stack Overflow</small>
              </a></li></ul>
      </li><li class="link">
          <a href="https://github.com/sponsors/Litestar-Org">
            <span>Sponsor</span></a>
        </li></ul></nav>
      <div class="sy-head-extra flex items-center print:hidden"><form class="searchbox flex items-center" action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <kbd>/</kbd>
</form><div class="nav-versions">
    <button type="button" aria-label="Versions">
      <span class="md:hidden">Versions</span>
      <span class="hidden md:inline">main</span>
      <i class="i-lucide chevron-down"></i>
    </button>
    <div class="nav-versions-choices"><ul><li><a href="/latest">latest</a></li><li><a href="/main">v3 (development)</a></li><li><a href="/2">v2</a></li><li><a href="/1">v1</a></li></ul></div>
  </div><div class="sy-head-socials">
<a href="https://twitter.com/LitestarAPI" aria-label="X (Twitter)">
  <iconify-icon icon="prime:twitter"></iconify-icon>
</a>
  <a href="https://discord.gg/litestar" aria-label="Discord">
    <iconify-icon icon="simple-icons:discord"></iconify-icon>
  </a></div></div>
    </div>
    <div class="sy-head-actions flex items-center shrink-0 print:hidden"><button class="js-theme theme-switch flex items-center"
data-aria-auto="Switch to light color mode"
data-aria-light="Switch to dark color mode"
data-aria-dark="Switch to auto color mode">
<i class="i-lucide theme-icon"></i>
</button><button class="md:hidden flex items-center js-menu" aria-label="Menu" type="button" aria-controls="head-nav" aria-expanded="false">
        <div class="hamburger">
          <span class="hamburger_1"></span>
          <span class="hamburger_2 -translate-x-2"></span>
          <span class="hamburger_3 -translate-x-1"></span>
        </div>
      </button>
    </div>
  </div>
</div>
<div class="sy-page sy-container flex mx-auto">
  <aside id="lside" class="sy-lside md:w-72 md:shrink-0 print:hidden">
    <div class="sy-lside-inner md:sticky">
      <div class="sy-scrollbar p-6"><div class="sidebar-links">
  <ul>
    <li><a class="icon-link" href="https://github.com/orgs/litestar-org/discussions">
  <span class="icon">
    <svg viewBox="0 0 24 24" fill="none">
      <path fill="var(--accent-9)" fill-rule="evenodd" clip-rule="evenodd" d="M11 5a6 6 0 0 0-4.687 9.746c.215.27.315.62.231.954l-.514 2.058a1 1 0 0 0 1.485 1.1l2.848-1.71c.174-.104.374-.15.576-.148H13a6 6 0 0 0 0-12h-2Z"/>
      <circle fill="white" cx="12" cy="11" r="1"/>
      <circle fill="white" cx="9" cy="11" r="1"/>
      <circle fill="white" cx="15" cy="11" r="1"/>
    </svg>
  </span>
  <span class="text">Discussion</span>
</a></li>
  </ul>
</div>
        <div class="globaltoc" data-expand-depth="0"><p class="caption" role="heading" aria-level="3"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../getting-started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Usage</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../applications.html">Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routing/index.html">Routing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../routing/overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../routing/handlers.html">Route handlers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../routing/parameters.html">Parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../requests.html">Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../caching.html">Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../channels.html">Channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli.html">CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../databases/index.html">Databases</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../databases/sqlalchemy/index.html">SQLAlchemy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../databases/sqlalchemy/models_and_repository.html">SQLAlchemy Models &amp; Repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../databases/sqlalchemy/plugins/index.html">Plugins</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../databases/piccolo.html">Piccolo ORM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../debugging.html">Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dependency-injection.html">Dependency Injection</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Data Transfer Object (DTO)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="0-basic-use.html">Basic Use</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">AbstractDTO</a></li>
<li class="toctree-l3"><a class="reference internal" href="2-creating-custom-dto-classes.html">Implementing Custom DTO Classes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../events.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exceptions.html">Exceptions and exception handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../file_systems.html">File Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../htmx.html">HTMX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lifecycle-hooks.html">Life Cycle Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics/index.html">Metrics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../metrics/open-telemetry.html">OpenTelemetry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../metrics/prometheus.html">Prometheus</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../middleware/index.html">Middleware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../middleware/using-middleware.html">Using Middleware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../middleware/builtin-middleware.html">Built-in middleware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../middleware/creating-middleware.html">Creating Middleware</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../openapi/index.html">OpenAPI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../openapi/schema_generation.html">Configuring schema generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../openapi/schema_generation.html#configuring-schema-generation-on-a-route-handler">Configuring schema generation on a route handler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../openapi/schema_generation.html#accessing-the-openapi-schema-in-code">Accessing the OpenAPI schema in code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../openapi/schema_generation.html#customizing-pydantic-model-schemas">Customizing Pydantic model schemas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../openapi/schema_generation.html#customizing-operation-class">Customizing <code class="docutils literal notranslate"><span class="pre">Operation</span></code> class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../openapi/schema_generation.html#generating-examples">Generating examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../openapi/ui_plugins.html">OpenAPI UI Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../openapi/ui_plugins.html#using-openapi-ui-plugins">Using OpenAPI UI Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../openapi/ui_plugins.html#configuring-openapi-ui-plugins">Configuring OpenAPI UI Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../openapi/ui_plugins.html#configuring-the-openapi-root-path">Configuring the OpenAPI Root Path</a></li>
<li class="toctree-l3"><a class="reference internal" href="../openapi/ui_plugins.html#building-your-own-openapi-ui-plugin">Building your own OpenAPI UI Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../openapi/ui_plugins.html#interacting-with-the-router">Interacting with the <code class="docutils literal notranslate"><span class="pre">Router</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../openapi/ui_plugins.html#oauth2-in-swagger-ui">OAuth2 in Swagger UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../openapi/ui_plugins.html#customizing-the-openapi-ui">Customizing the OpenAPI UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../openapi/ui_plugins.html#cdn-and-offline-file-support">CDN and offline file support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html">Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../plugins/flash_messages.html">Flash Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../plugins/problem_details.html">Problem Details</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../responses.html">Responses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../security/index.html">Security</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../security/abstract-authentication-middleware.html">Implementing Custom Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security/security-backends.html">Security Backends</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security/guards.html">Guards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security/excluding-and-including-endpoints.html">Excluding and including endpoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security/jwt.html">JWT Security Backends</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security/secret-datastructures.html">Handling Secrets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../static-files.html">Static files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../custom-types.html">Custom types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stores.html">Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../templating.html">Templating</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../websockets.html">WebSockets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../reference/app.html">app</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/background_tasks.html">background_tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/channels/index.html">channels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/channels/plugin.html">plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/channels/subscriber.html">subscriber</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/channels/backends/index.html">backends</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/channels/backends/base.html">base</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/channels/backends/memory.html">memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/channels/backends/redis.html">redis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/channels/backends/psycopg.html">psycopg</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/channels/backends/asyncpg.html">asyncpg</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/cli.html">cli</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/config.html">config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/connection.html">connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/contrib/index.html">contrib</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/contrib/jinja.html">jinja</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/contrib/mako.html">mako</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/contrib/opentelemetry.html">opentelemetry</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/controller.html">controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/concurrency.html">concurrency</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/data_extractors.html">data_extractors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/datastructures/index.html">datastructures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/datastructures/secret_values.html">secret_values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/di.html">di</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/dto/index.html">dto</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/dto/config.html">config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/dto/data_structures.html">data_structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/dto/field.html">field</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/dto/types.html">types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/dto/base_dto.html">base_dto</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/dto/msgspec_dto.html">msgspec_dto</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/dto/dataclass_dto.html">dataclass_dto</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/enums.html">enums</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/events.html">events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/exceptions.html">exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/file_system.html">file_system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/handlers.html">handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/logging/index.html">logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/logging/config.html">config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/logging/picologging.html">picologging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/logging/standard.html">standard</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/middleware/index.html">middleware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/middleware/allowed_hosts.html">allowed_hosts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/middleware/authentication.html">authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/middleware/compression.html">compression</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/middleware/csrf.html">csrf</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/middleware/logging.html">logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/middleware/rate_limit.html">rate_limit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/middleware/session/index.html">session</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/middleware/session/base.html">base</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/middleware/session/client_side.html">client_side</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/middleware/session/server_side.html">server_side</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/middleware/constraints.html">constraints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/openapi/index.html">openapi</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/openapi/openapi.html">openapi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/openapi/plugins.html">plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/openapi/spec.html">spec</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/pagination.html">pagination</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/params.html">params</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/plugins/index.html">plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/plugins/attrs.html">attrs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/plugins/flash_messages.html">flash</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/plugins/htmx.html">htmx</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/plugins/problem_details.html">problem details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/plugins/prometheus.html">prometheus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/plugins/pydantic.html">pydantic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/plugins/structlog.html">structlog</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/repository/index.html">repository</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/repository/abc.html">abc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/repository/filters.html">filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/repository/exceptions.html">exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/repository/testing.html">testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/repository/handlers.html">handlers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/response/index.html">response</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/response/base.html">base</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/response/file.html">file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/response/redirect.html">redirect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/response/streaming.html">streaming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/response/sse.html">SSE (Server Sent Events)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/response/template.html">template</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/router.html">router</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/routes.html">routes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/security/index.html">security</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/security/jwt.html">jwt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/security/session_auth.html">session_auth</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/serialization.html">serialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/static_files.html">static_files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/status_codes.html">status_code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/stores/index.html">stores</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/stores/base.html">base</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/stores/file.html">file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/stores/memory.html">memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/stores/redis.html">redis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/stores/registry.html">registry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/stores/valkey.html">valkey</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/template.html">template</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/testing.html">testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/types.html">types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/typing.html">typing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../benchmarks.html">Benchmarks</a></li>
</ul>
<p class="caption" role="heading" aria-level="3"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../migration/index.html">Migrating to Litestar</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../migration/flask.html">From Flask</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../migration/fastapi.html">From Starlette / FastAPI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../topics/index.html">Topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../topics/sync-vs-async.html">Sync vs. Async</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../topics/deployment/index.html">Deployment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../topics/deployment/manually-with-asgi-server.html">Manually with ASGI server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../topics/deployment/docker.html">Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../topics/deployment/supervisor.html">Supervisor (Linux)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/todo-app/index.html">Developing a basic TODO application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/todo-app/0-application-basics.html">Application basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/todo-app/1-accessing-the-list.html">Accessing the list</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/todo-app/2-interacting-with-the-list.html">Making the list interactive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/todo-app/3-assembling-the-app.html">Recap and assembling the final application</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/sqlalchemy/index.html">Improving the TODO app with SQLAlchemy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/sqlalchemy/0-introduction.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/sqlalchemy/1-provide-session-with-di.html">Providing the session with DI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/sqlalchemy/2-serialization-plugin.html">Using the serialization plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/sqlalchemy/3-init-plugin.html">Using the init plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/sqlalchemy/4-final-touches-and-recap.html">Final touches and recap</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/dto-tutorial/index.html">Data Transfer Object Tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/dto-tutorial/01-simple-dto-exclude.html">Our first DTO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/dto-tutorial/02-nested-exclude.html">Excluding from nested models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/dto-tutorial/03-nested-collection-exclude.html">Excluding from collections of nested models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/dto-tutorial/04-max-nested-depth.html">Max nested depth</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/dto-tutorial/05-renaming-fields.html">Renaming fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/dto-tutorial/06-receiving-data.html">Receiving data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/dto-tutorial/07-read-only-fields.html">Read only fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/dto-tutorial/08-dto-data.html">Accessing the data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/dto-tutorial/09-updating.html">Updating instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/dto-tutorial/10-layered-dto-declarations.html">Declaring DTOs on app layers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/repository-tutorial/index.html">SQLAlchemy Repository Tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/repository-tutorial/01-modelling-and-features.html">Introduction to Database Modelling and Repository Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/repository-tutorial/01-modelling-and-features.html#modelling">Modelling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/repository-tutorial/01-modelling-and-features.html#full-code">Full Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/repository-tutorial/02-repository-introduction.html">Interacting with repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/repository-tutorial/02-repository-introduction.html#working-with-bulk-data-operations">Working with Bulk Data Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/repository-tutorial/02-repository-introduction.html#full-code">Full Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/repository-tutorial/03-repository-controller.html">Working with Controllers and Repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/repository-tutorial/03-repository-controller.html#full-code">Full Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/repository-tutorial/04-repository-other.html">Adding Additional Features to the Repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/repository-tutorial/04-repository-other.html#slug-fields">Slug Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/repository-tutorial/04-repository-other.html#full-code">Full Code</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading" aria-level="3"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contribution-guide.html">Contribution Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/search?q=user%3Alitestar-org+state%3Aopen+label%3A%22good+first+issue%22+++no%3Aassignee+&amp;type=issues=">Available Issues</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/litestar-org/.github?tab=coc-ov-file#readme">Code of Conduct</a></li>
</ul>

        </div>
      </div>
    </div>
  </aside>
  <div class="lside-overlay js-menu" role="button" aria-label="Close left sidebar" aria-controls="lside" aria-expanded="false"></div>
  <aside id="rside" class="sy-rside pb-3 w-64 shrink-0 order-last">
    <button class="rside-close js-menu xl:hidden" aria-label="Close Table of Contents" type="button" aria-controls="rside" aria-expanded="false">
      <i class="i-lucide close"></i>
    </button>
    <div class="sy-scrollbar sy-rside-inner px-6 xl:top-16 xl:sticky xl:pl-0 pt-6 pb-4"><div class="localtoc"><h3>On this page</h3><ul>
<li><a class="reference internal" href="#using-dto-factories">Using DTO Factories</a></li>
<li><a class="reference internal" href="#marking-fields">Marking fields</a></li>
<li><a class="reference internal" href="#excluding-fields">Excluding fields</a></li>
<li><a class="reference internal" href="#renaming-fields">Renaming fields</a></li>
<li><a class="reference internal" href="#type-checking">Type checking</a></li>
<li><a class="reference internal" href="#nested-fields">Nested fields</a></li>
<li><a class="reference internal" href="#handling-unknown-fields">Handling unknown fields</a></li>
<li><a class="reference internal" href="#dto-data">DTO Data</a><ul>
<li><a class="reference internal" href="#providing-values-for-nested-data">Providing values for nested data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dto-factory-and-patch-requests">DTO Factory and PATCH requests</a></li>
<li><a class="reference internal" href="#implicit-private-fields">Implicit Private Fields</a></li>
<li><a class="reference internal" href="#wrapping-return-data">Wrapping Return Data</a></li>
<li><a class="reference internal" href="#working-with-litestar-s-pagination-types">Working with Litestar&#8217;s Pagination Types</a></li>
<li><a class="reference internal" href="#using-litestar-s-response-type-with-dto-factory">Using Litestar&#8217;s Response Type with DTO Factory</a></li>
</ul>
</div><a class="js-repo-stats repo-stats flex items-center" href="https://github.com/litestar-org/litestar"
  data-type="github" data-user="litestar-org" data-repo="litestar">
  <span class="w-8 flex items-center justify-around shrink-0 text-3xl">
    <iconify-icon icon="simple-icons:github"></iconify-icon>
  </span>
  <span class="flex-grow px-2 break-all">
    <span>litestar-org/litestar</span>
    <span class="flex text-sm repo-stats-count">
      <span class="flex items-center pr-3">
        <iconify-icon icon="lucide:star"></iconify-icon>
        <strong class="js-repo-stars ml-1">0</strong>
      </span>
      <span class="flex items-center">
        <iconify-icon icon="lucide:git-fork"></iconify-icon>
        <strong class="js-repo-forks ml-1">0</strong>
      </span>
    </span>
  </span>
</a><div class="edit-this-page">
  <a href="https://github.com/litestar-org/litestar/blob/main/docs/usage/dto/1-abstract-dto.rst">Edit this page</a>
</div><div id="ethical-ad-placement" data-ea-publisher="readthedocs"></div></div>
  </aside>
  <div class="rside-overlay js-menu" role="button" aria-label="Close Table of Contents" aria-controls="rside" aria-expanded="false"></div>
  <main class="sy-main w-full max-sm:max-w-full print:pt-6">
<div class="sy-breadcrumbs" role="navigation">
  <div class="sy-breadcrumbs-inner flex items-center">
    <div class="md:hidden mr-3">
      <button class="js-menu" aria-label="Menu" type="button" aria-controls="lside" aria-expanded="false">
        <i class="i-lucide menu"></i>
      </button>
    </div>
    <ol class="flex-1" itemscope itemtype="https://schema.org/BreadcrumbList"><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="../../index.html"><span itemprop="name">Litestar</span></a>
        <span>/</span>
        <meta itemprop="position" content="1" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="../index.html"><span itemprop="name">Usage</span></a>
        <span>/</span>
        <meta itemprop="position" content="2" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="index.html"><span itemprop="name">Data Transfer Object (DTO)</span></a>
        <span>/</span>
        <meta itemprop="position" content="3" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <strong itemprop="name">AbstractDTO</strong>
        <meta itemprop="position" content="4" />
      </li></ol>
    <div class="xl:hidden ml-1">
      <button class="js-menu" aria-label="Show table of contents" type="button" aria-controls="rside"
        aria-expanded="false">
        <i class="i-lucide outdent"></i>
      </button>
    </div>
  </div>
</div><div class="flex flex-col break-words justify-between">
      <div class="min-w-0 max-w-6xl px-6 pb-6 pt-8 xl:px-12">
        <article class="yue" role="main">
          <section id="abstractdto">
<h1>AbstractDTO<a class="headerlink" href="#abstractdto" title="Link to this heading">¶</a></h1>
<p>Litestar maintains a suite of DTO factory types that can be used to create DTOs for use with popular data modelling
libraries, such as ORMs. These take a model type as a generic type argument, and create subtypes of
<a class="reference internal" href="../../reference/dto/base_dto.html#litestar.dto.base_dto.AbstractDTO" title="litestar.dto.base_dto.AbstractDTO"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractDTO</span></code></a> that support conversion of that model type to
and from raw bytes.</p>
<p>The following factories are currently available:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../reference/dto/dataclass_dto.html#litestar.dto.dataclass_dto.DataclassDTO" title="litestar.dto.dataclass_dto.DataclassDTO"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataclassDTO</span></code></a></p></li>
<li><p><a class="reference internal" href="../../reference/dto/msgspec_dto.html#litestar.dto.msgspec_dto.MsgspecDTO" title="litestar.dto.msgspec_dto.MsgspecDTO"><code class="xref py py-class docutils literal notranslate"><span class="pre">MsgspecDTO</span></code></a></p></li>
<li><p><a class="reference internal" href="../../reference/plugins/pydantic.html#litestar.plugins.pydantic.PydanticDTO" title="litestar.plugins.pydantic.PydanticDTO"><code class="xref py py-class docutils literal notranslate"><span class="pre">PydanticDTO</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.advanced-alchemy.litestar.dev/latest/reference/extensions/litestar/dto.html#advanced_alchemy.extensions.litestar.dto.SQLAlchemyDTO" title="(in advanced_alchemy)"><code class="xref py py-class docutils literal notranslate"><span class="pre">SQLAlchemyDTO</span></code></a></p></li>
</ul>
<section id="using-dto-factories">
<h2>Using DTO Factories<a class="headerlink" href="#using-dto-factories" title="Link to this heading">¶</a></h2>
<p>DTO factories are used to create DTOs for use with a particular data modelling library. The following example creates
a DTO for use with a SQLAlchemy model:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">A SQLAlchemy model DTO</span><a class="headerlink" href="#id2" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
</span><span data-line="2">
</span><span data-line="3"><span class="kn">from</span><span class="w"> </span><span class="nn">advanced_alchemy.extensions.litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyDTO</span>
</span><span data-line="4"><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">Mapped</span>
</span><span data-line="5">
</span><span data-line="6"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">post</span>
</span><span data-line="7">
</span><span data-line="8"><span class="kn">from</span><span class="w"> </span><span class="nn">.my_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Base</span>
</span><span data-line="9">
</span><span data-line="10">
</span><span data-line="11"><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span data-line="12">    <span class="c1"># `Base` defines `id` field as:</span>
</span><span data-line="13">    <span class="c1"># id: Mapped[UUID] = mapped_column(default=uuid4, primary_key=True)</span>
</span><span data-line="14">    <span class="n">name</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="15">    <span class="n">password</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="16">    <span class="n">created_at</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span>
</span><span data-line="17">
</span><span data-line="18">
</span><span data-line="19"><span class="n">UserDTO</span> <span class="o">=</span> <span class="n">SQLAlchemyDTO</span><span class="p">[</span><span class="n">User</span><span class="p">]</span>
</span><span data-line="20">
</span><span data-line="21">
</span><span data-line="22"><span class="nd">@post</span><span class="p">(</span><span class="s2">&quot;/users&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">UserDTO</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span data-line="23"><span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">User</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">User</span><span class="p">:</span>
</span><span data-line="24">    <span class="k">return</span> <span class="n">data</span>
</span><span data-line="25">
</span><span data-line="26">
</span><span data-line="27"><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">route_handlers</span><span class="o">=</span><span class="p">[</span><span class="n">create_user</span><span class="p">])</span>
</span></pre></div>
</div>
</div>
<div class="admonition">
<p class="admonition-title">Run it</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span data-line="1">&gt;<span class="w"> </span>curl<span class="w"> </span>http://127.0.0.1:8000/users<span class="w"> </span>-H<span class="w"> </span>Content-Type:<span class="w"> </span>application/json<span class="w"> </span>-d<span class="w"> </span><span class="o">{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Litestar User&quot;</span>,<span class="s2">&quot;password&quot;</span>:<span class="s2">&quot;xyz&quot;</span>,<span class="s2">&quot;created_at&quot;</span>:<span class="s2">&quot;2023-04-24T00:00:00Z&quot;</span><span class="o">}</span>
</span><span data-line="2"><span class="o">{</span><span class="s2">&quot;id&quot;</span>:<span class="s2">&quot;dce6414c-f82e-4163-8bb7-b3f4fc6e205e&quot;</span>,<span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Litestar User&quot;</span>,<span class="s2">&quot;password&quot;</span>:<span class="s2">&quot;xyz&quot;</span>,<span class="s2">&quot;created_at&quot;</span>:<span class="s2">&quot;2023-04-24T00:00:00Z&quot;</span><span class="o">}</span>
</span></pre></div>
</div>
</div>
<p>Here we see that a SQLAlchemy model is used as both the <code class="docutils literal notranslate"><span class="pre">data</span></code> and return annotation for the handler, and while
Litestar does not natively support encoding/decoding to/from SQLAlchemy models, through
<a class="reference external" href="https://docs.advanced-alchemy.litestar.dev/latest/reference/extensions/litestar/dto.html#advanced_alchemy.extensions.litestar.dto.SQLAlchemyDTO" title="(in advanced_alchemy)"><code class="xref py py-class docutils literal notranslate"><span class="pre">SQLAlchemyDTO</span></code></a> we can do this.</p>
<p>However, we do have some issues with the above example. Firstly, the user’s password has been returned to them in the
response from the handler. Secondly, the user is able to set the <code class="docutils literal notranslate"><span class="pre">created_at</span></code> field on the model, which should only
ever be set once, and defined internally.</p>
<p>Let’s explore how we can configure DTOs to manage scenarios like these.</p>
</section>
<section id="marking-fields">
<span id="dto-marking-fields"></span><h2>Marking fields<a class="headerlink" href="#marking-fields" title="Link to this heading">¶</a></h2>
<p>The <a class="reference internal" href="../../reference/dto/field.html#litestar.dto.field.dto_field" title="litestar.dto.field.dto_field"><code class="xref py py-func docutils literal notranslate"><span class="pre">dto_field</span></code></a> function can be used to mark model attributes with DTO-based
configuration.</p>
<p>Fields marked as <code class="docutils literal notranslate"><span class="pre">&quot;private&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;read-only&quot;</span></code> will not be parsed from client data into the user model, and
<code class="docutils literal notranslate"><span class="pre">&quot;private&quot;</span></code> fields are never serialized into return data.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Marking fields</span><a class="headerlink" href="#id3" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
</span><span data-line="2"><span class="linenos"> 2</span>
</span><span data-line="3"><span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">advanced_alchemy.extensions.litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyDTO</span>
</span><span data-line="4"><span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">Mapped</span><span class="p">,</span> <span class="n">mapped_column</span>
</span><span data-line="5"><span class="linenos"> 5</span>
</span><span data-line="6"><span class="hll"><span class="linenos"> 6</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">post</span>
</span></span><span data-line="7"><span class="linenos"> 7</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">dto_field</span>
</span><span data-line="8"><span class="linenos"> 8</span>
</span><span data-line="9"><span class="linenos"> 9</span><span class="kn">from</span><span class="w"> </span><span class="nn">.my_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Base</span>
</span><span data-line="10"><span class="linenos">10</span>
</span><span data-line="11"><span class="linenos">11</span>
</span><span data-line="12"><span class="linenos">12</span><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span data-line="13"><span class="linenos">13</span>    <span class="c1"># `Base` defines `id` field as:</span>
</span><span data-line="14"><span class="hll"><span class="linenos">14</span>    <span class="c1"># id: Mapped[UUID] = mapped_column(default=uuid4, primary_key=True)</span>
</span></span><span data-line="15"><span class="hll"><span class="linenos">15</span>    <span class="n">name</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span></span><span data-line="16"><span class="linenos">16</span>    <span class="n">password</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="n">dto_field</span><span class="p">(</span><span class="s2">&quot;private&quot;</span><span class="p">))</span>
</span><span data-line="17"><span class="linenos">17</span>    <span class="n">created_at</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="n">dto_field</span><span class="p">(</span><span class="s2">&quot;read-only&quot;</span><span class="p">))</span>
</span><span data-line="18"><span class="linenos">18</span>
</span><span data-line="19"><span class="linenos">19</span>
</span><span data-line="20"><span class="linenos">20</span><span class="n">UserDTO</span> <span class="o">=</span> <span class="n">SQLAlchemyDTO</span><span class="p">[</span><span class="n">User</span><span class="p">]</span>
</span><span data-line="21"><span class="linenos">21</span>
</span><span data-line="22"><span class="linenos">22</span>
</span><span data-line="23"><span class="linenos">23</span><span class="nd">@post</span><span class="p">(</span><span class="s2">&quot;/users&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">UserDTO</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span data-line="24"><span class="linenos">24</span><span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">User</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">User</span><span class="p">:</span>
</span><span data-line="25"><span class="linenos">25</span>    <span class="c1"># even though the client did not send the id field,</span>
</span><span data-line="26"><span class="linenos">26</span>    <span class="c1"># since it is a primary key it is autogenerated</span>
</span><span data-line="27"><span class="linenos">27</span>    <span class="k">assert</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span data-line="28"><span class="linenos">28</span>    <span class="c1"># even though the client sent the password and created_at field, it is not in the data object</span>
</span><span data-line="29"><span class="linenos">29</span>    <span class="k">assert</span> <span class="s2">&quot;password&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span data-line="30"><span class="linenos">30</span>    <span class="k">assert</span> <span class="s2">&quot;created_at&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span data-line="31"><span class="linenos">31</span>    <span class="c1"># normally the database would set the created_at timestamp</span>
</span><span data-line="32"><span class="linenos">32</span>    <span class="n">data</span><span class="o">.</span><span class="n">created_at</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">min</span>
</span><span data-line="33"><span class="linenos">33</span>    <span class="k">return</span> <span class="n">data</span>  <span class="c1"># the response includes the created_at field</span>
</span><span data-line="34"><span class="linenos">34</span>
</span><span data-line="35"><span class="linenos">35</span>
</span><span data-line="36"><span class="linenos">36</span><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">route_handlers</span><span class="o">=</span><span class="p">[</span><span class="n">create_user</span><span class="p">])</span>
</span></pre></div>
</div>
</div>
<div class="admonition">
<p class="admonition-title">Run it</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span data-line="1">&gt;<span class="w"> </span>curl<span class="w"> </span>http://127.0.0.1:8000/users<span class="w"> </span>-H<span class="w"> </span>Content-Type:<span class="w"> </span>application/json<span class="w"> </span>-d<span class="w"> </span><span class="o">{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Litestar User&quot;</span>,<span class="s2">&quot;password&quot;</span>:<span class="s2">&quot;xyz&quot;</span>,<span class="s2">&quot;created_at&quot;</span>:<span class="s2">&quot;2023-04-24T00:00:00Z&quot;</span><span class="o">}</span>
</span><span data-line="2"><span class="o">{</span><span class="s2">&quot;created_at&quot;</span>:<span class="s2">&quot;0001-01-01T00:00:00&quot;</span>,<span class="s2">&quot;id&quot;</span>:<span class="s2">&quot;0ecfb99c-c3ad-4b81-a78c-cfe42a7bec59&quot;</span>,<span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Litestar User&quot;</span><span class="o">}</span>
</span></pre></div>
</div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">id</span></code> field is the primary key and is handled specially by the defined SQLAlchemy base.</p>
</section>
<section id="excluding-fields">
<h2>Excluding fields<a class="headerlink" href="#excluding-fields" title="Link to this heading">¶</a></h2>
<p>Fields can be explicitly excluded using <a class="reference internal" href="../../reference/dto/config.html#litestar.dto.config.DTOConfig" title="litestar.dto.config.DTOConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">DTOConfig</span></code></a>.</p>
<p>The following example demonstrates excluding attributes from the serialized response, including excluding fields from
nested models.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Excluding fields</span><a class="headerlink" href="#id4" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
</span><span data-line="2"><span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>
</span><span data-line="3"><span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">uuid</span><span class="w"> </span><span class="kn">import</span> <span class="n">UUID</span>
</span><span data-line="4"><span class="linenos"> 4</span>
</span><span data-line="5"><span class="linenos"> 5</span><span class="kn">from</span><span class="w"> </span><span class="nn">advanced_alchemy.extensions.litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyDTO</span>
</span><span data-line="6"><span class="hll"><span class="linenos"> 6</span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">ForeignKey</span>
</span></span><span data-line="7"><span class="linenos"> 7</span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">Mapped</span><span class="p">,</span> <span class="n">mapped_column</span><span class="p">,</span> <span class="n">relationship</span>
</span><span data-line="8"><span class="linenos"> 8</span>
</span><span data-line="9"><span class="linenos"> 9</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">post</span>
</span><span data-line="10"><span class="hll"><span class="linenos">10</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">DTOConfig</span><span class="p">,</span> <span class="n">dto_field</span>
</span></span><span data-line="11"><span class="linenos">11</span>
</span><span data-line="12"><span class="linenos">12</span><span class="kn">from</span><span class="w"> </span><span class="nn">.my_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Base</span>
</span><span data-line="13"><span class="linenos">13</span>
</span><span data-line="14"><span class="linenos">14</span>
</span><span data-line="15"><span class="linenos">15</span><span class="k">class</span><span class="w"> </span><span class="nc">Address</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span data-line="16"><span class="linenos">16</span>    <span class="n">street</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="17"><span class="linenos">17</span>    <span class="n">city</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="18"><span class="linenos">18</span>    <span class="n">state</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="19"><span class="linenos">19</span>    <span class="nb">zip</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="20"><span class="linenos">20</span>
</span><span data-line="21"><span class="linenos">21</span>
</span><span data-line="22"><span class="linenos">22</span><span class="k">class</span><span class="w"> </span><span class="nc">Pets</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span data-line="23"><span class="linenos">23</span>    <span class="n">name</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="24"><span class="linenos">24</span>    <span class="n">user_id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;user.id&quot;</span><span class="p">))</span>
</span><span data-line="25"><span class="linenos">25</span>
</span><span data-line="26"><span class="linenos">26</span>
</span><span data-line="27"><span class="linenos">27</span><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span data-line="28"><span class="linenos">28</span>    <span class="n">name</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="29"><span class="linenos">29</span>    <span class="n">password</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="n">dto_field</span><span class="p">(</span><span class="s2">&quot;private&quot;</span><span class="p">))</span>
</span><span data-line="30"><span class="linenos">30</span>    <span class="n">created_at</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="n">dto_field</span><span class="p">(</span><span class="s2">&quot;read-only&quot;</span><span class="p">))</span>
</span><span data-line="31"><span class="linenos">31</span>    <span class="n">address_id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;address.id&quot;</span><span class="p">),</span> <span class="n">info</span><span class="o">=</span><span class="n">dto_field</span><span class="p">(</span><span class="s2">&quot;private&quot;</span><span class="p">))</span>
</span><span data-line="32"><span class="linenos">32</span>    <span class="n">address</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">Address</span><span class="p">]</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="n">dto_field</span><span class="p">(</span><span class="s2">&quot;read-only&quot;</span><span class="p">))</span>
</span><span data-line="33"><span class="linenos">33</span>    <span class="n">pets</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">Pets</span><span class="p">]]</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="n">dto_field</span><span class="p">(</span><span class="s2">&quot;read-only&quot;</span><span class="p">))</span>
</span><span data-line="34"><span class="linenos">34</span>
</span><span data-line="35"><span class="linenos">35</span>
</span><span data-line="36"><span class="linenos">36</span><span class="n">UserDTO</span> <span class="o">=</span> <span class="n">SQLAlchemyDTO</span><span class="p">[</span><span class="n">User</span><span class="p">]</span>
</span><span data-line="37"><span class="hll"><span class="linenos">37</span><span class="n">config</span> <span class="o">=</span> <span class="n">DTOConfig</span><span class="p">(</span>
</span></span><span data-line="38"><span class="hll"><span class="linenos">38</span>    <span class="n">exclude</span><span class="o">=</span><span class="p">{</span>
</span></span><span data-line="39"><span class="hll"><span class="linenos">39</span>        <span class="s2">&quot;id&quot;</span><span class="p">,</span>
</span></span><span data-line="40"><span class="hll"><span class="linenos">40</span>        <span class="s2">&quot;address.id&quot;</span><span class="p">,</span>
</span></span><span data-line="41"><span class="hll"><span class="linenos">41</span>        <span class="s2">&quot;address.street&quot;</span><span class="p">,</span>
</span></span><span data-line="42"><span class="hll"><span class="linenos">42</span>        <span class="s2">&quot;pets.0.id&quot;</span><span class="p">,</span>
</span></span><span data-line="43"><span class="hll"><span class="linenos">43</span>        <span class="s2">&quot;pets.0.user_id&quot;</span><span class="p">,</span>
</span></span><span data-line="44"><span class="hll"><span class="linenos">44</span>    <span class="p">}</span>
</span></span><span data-line="45"><span class="hll"><span class="linenos">45</span><span class="p">)</span>
</span></span><span data-line="46"><span class="hll"><span class="linenos">46</span><span class="n">ReadUserDTO</span> <span class="o">=</span> <span class="n">SQLAlchemyDTO</span><span class="p">[</span><span class="n">Annotated</span><span class="p">[</span><span class="n">User</span><span class="p">,</span> <span class="n">config</span><span class="p">]]</span>
</span></span><span data-line="47"><span class="linenos">47</span>
</span><span data-line="48"><span class="linenos">48</span>
</span><span data-line="49"><span class="hll"><span class="linenos">49</span><span class="nd">@post</span><span class="p">(</span><span class="s2">&quot;/users&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">UserDTO</span><span class="p">,</span> <span class="n">return_dto</span><span class="o">=</span><span class="n">ReadUserDTO</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span data-line="50"><span class="linenos">50</span><span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">User</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">User</span><span class="p">:</span>
</span><span data-line="51"><span class="linenos">51</span>    <span class="n">data</span><span class="o">.</span><span class="n">created_at</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">min</span>
</span><span data-line="52"><span class="linenos">52</span>    <span class="n">data</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="n">Address</span><span class="p">(</span><span class="n">street</span><span class="o">=</span><span class="s2">&quot;123 Main St&quot;</span><span class="p">,</span> <span class="n">city</span><span class="o">=</span><span class="s2">&quot;Anytown&quot;</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s2">&quot;NY&quot;</span><span class="p">,</span> <span class="nb">zip</span><span class="o">=</span><span class="s2">&quot;12345&quot;</span><span class="p">)</span>
</span><span data-line="53"><span class="linenos">53</span>    <span class="n">data</span><span class="o">.</span><span class="n">pets</span> <span class="o">=</span> <span class="p">[</span><span class="n">Pets</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Fido&quot;</span><span class="p">),</span> <span class="n">Pets</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Spot&quot;</span><span class="p">)]</span>
</span><span data-line="54"><span class="linenos">54</span>    <span class="k">return</span> <span class="n">data</span>
</span><span data-line="55"><span class="linenos">55</span>
</span><span data-line="56"><span class="linenos">56</span>
</span><span data-line="57"><span class="linenos">57</span><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">route_handlers</span><span class="o">=</span><span class="p">[</span><span class="n">create_user</span><span class="p">])</span>
</span></pre></div>
</div>
</div>
<div class="admonition">
<p class="admonition-title">Run it</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span data-line="1">&gt;<span class="w"> </span>curl<span class="w"> </span>http://127.0.0.1:8000/users<span class="w"> </span>-H<span class="w"> </span>Content-Type:<span class="w"> </span>application/json<span class="w"> </span>-d<span class="w"> </span><span class="o">{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Litestar User&quot;</span>,<span class="s2">&quot;password&quot;</span>:<span class="s2">&quot;xyz&quot;</span>,<span class="s2">&quot;created_at&quot;</span>:<span class="s2">&quot;2023-04-24T00:00:00Z&quot;</span><span class="o">}</span>
</span><span data-line="2"><span class="o">{</span><span class="s2">&quot;created_at&quot;</span>:<span class="s2">&quot;0001-01-01T00:00:00&quot;</span>,<span class="s2">&quot;address&quot;</span>:<span class="o">{</span><span class="s2">&quot;city&quot;</span>:<span class="s2">&quot;Anytown&quot;</span>,<span class="s2">&quot;state&quot;</span>:<span class="s2">&quot;NY&quot;</span>,<span class="s2">&quot;zip&quot;</span>:<span class="s2">&quot;12345&quot;</span><span class="o">}</span>,<span class="s2">&quot;pets&quot;</span>:<span class="o">[{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Fido&quot;</span><span class="o">}</span>,<span class="o">{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Spot&quot;</span><span class="o">}]</span>,<span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Litestar User&quot;</span><span class="o">}</span>
</span></pre></div>
</div>
</div>
<p>Here, the config is created with the exclude parameter, which is a set of strings. Each string represents the path to a
field in the <code class="docutils literal notranslate"><span class="pre">User</span></code> object that should be excluded from the output DTO.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">config</span> <span class="o">=</span> <span class="n">DTOConfig</span><span class="p">(</span>
</span><span data-line="2">    <span class="n">exclude</span><span class="o">=</span><span class="p">{</span>
</span><span data-line="3">        <span class="s2">&quot;id&quot;</span><span class="p">,</span>
</span><span data-line="4">        <span class="s2">&quot;address.id&quot;</span><span class="p">,</span>
</span><span data-line="5">        <span class="s2">&quot;address.street&quot;</span><span class="p">,</span>
</span><span data-line="6">        <span class="s2">&quot;pets.0.id&quot;</span><span class="p">,</span>
</span><span data-line="7">        <span class="s2">&quot;pets.0.user_id&quot;</span><span class="p">,</span>
</span><span data-line="8">    <span class="p">}</span>
</span><span data-line="9"><span class="p">)</span>
</span></pre></div>
</div>
<p>In this example, <code class="docutils literal notranslate"><span class="pre">&quot;id&quot;</span></code> represents the id field of the <code class="docutils literal notranslate"><span class="pre">User</span></code> object, <code class="docutils literal notranslate"><span class="pre">&quot;address.id&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;address.street&quot;</span></code>
represent fields of the <code class="docutils literal notranslate"><span class="pre">Address</span></code> object nested inside the <code class="docutils literal notranslate"><span class="pre">User</span></code> object, and <code class="docutils literal notranslate"><span class="pre">&quot;pets.0.id&quot;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&quot;pets.0.user_id&quot;</span></code> represent fields of the <code class="docutils literal notranslate"><span class="pre">Pets</span></code> objects nested within the list of <code class="docutils literal notranslate"><span class="pre">User.pets</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Given a generic type, with an arbitrary number of type parameters (e.g., <code class="docutils literal notranslate"><span class="pre">GenericType[Type0,</span> <span class="pre">Type1,</span> <span class="pre">...,</span> <span class="pre">TypeN]</span></code>),
we use the index of the type parameter to indicate which type the exclusion should refer to. For example, <code class="docutils literal notranslate"><span class="pre">a.0.b</span></code>,
excludes the <code class="docutils literal notranslate"><span class="pre">b</span></code> field from the first type parameter of <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">a.1.b</span></code> excludes the <code class="docutils literal notranslate"><span class="pre">b</span></code> field from the second
type parameter of <code class="docutils literal notranslate"><span class="pre">a</span></code>, and so on.</p>
</div>
</section>
<section id="renaming-fields">
<h2>Renaming fields<a class="headerlink" href="#renaming-fields" title="Link to this heading">¶</a></h2>
<p>Fields can be renamed using <a class="reference internal" href="../../reference/dto/config.html#litestar.dto.config.DTOConfig" title="litestar.dto.config.DTOConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">DTOConfig</span></code></a>. The following example uses the name
<code class="docutils literal notranslate"><span class="pre">userName</span></code> client-side, and <code class="docutils literal notranslate"><span class="pre">user</span></code> internally.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Renaming fields</span><a class="headerlink" href="#id5" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
</span><span data-line="2"><span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>
</span><span data-line="3"><span class="linenos"> 3</span>
</span><span data-line="4"><span class="hll"><span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">advanced_alchemy.extensions.litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyDTO</span>
</span></span><span data-line="5"><span class="linenos"> 5</span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">Mapped</span><span class="p">,</span> <span class="n">mapped_column</span>
</span><span data-line="6"><span class="linenos"> 6</span>
</span><span data-line="7"><span class="linenos"> 7</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">post</span>
</span><span data-line="8"><span class="hll"><span class="linenos"> 8</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">DTOConfig</span><span class="p">,</span> <span class="n">dto_field</span>
</span></span><span data-line="9"><span class="linenos"> 9</span>
</span><span data-line="10"><span class="linenos">10</span><span class="kn">from</span><span class="w"> </span><span class="nn">.my_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Base</span>
</span><span data-line="11"><span class="linenos">11</span>
</span><span data-line="12"><span class="linenos">12</span>
</span><span data-line="13"><span class="linenos">13</span><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span data-line="14"><span class="linenos">14</span>    <span class="n">name</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="15"><span class="linenos">15</span>    <span class="n">password</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="n">dto_field</span><span class="p">(</span><span class="s2">&quot;private&quot;</span><span class="p">))</span>
</span><span data-line="16"><span class="linenos">16</span>    <span class="n">created_at</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="n">dto_field</span><span class="p">(</span><span class="s2">&quot;read-only&quot;</span><span class="p">))</span>
</span><span data-line="17"><span class="linenos">17</span>
</span><span data-line="18"><span class="linenos">18</span>
</span><span data-line="19"><span class="hll"><span class="linenos">19</span><span class="n">config</span> <span class="o">=</span> <span class="n">DTOConfig</span><span class="p">(</span><span class="n">rename_fields</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;userName&quot;</span><span class="p">})</span>
</span></span><span data-line="20"><span class="hll"><span class="linenos">20</span><span class="n">UserDTO</span> <span class="o">=</span> <span class="n">SQLAlchemyDTO</span><span class="p">[</span><span class="n">Annotated</span><span class="p">[</span><span class="n">User</span><span class="p">,</span> <span class="n">config</span><span class="p">]]</span>
</span></span><span data-line="21"><span class="linenos">21</span>
</span><span data-line="22"><span class="linenos">22</span>
</span><span data-line="23"><span class="linenos">23</span><span class="nd">@post</span><span class="p">(</span><span class="s2">&quot;/users&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">UserDTO</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span data-line="24"><span class="hll"><span class="linenos">24</span><span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">User</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">User</span><span class="p">:</span>
</span></span><span data-line="25"><span class="linenos">25</span>    <span class="k">assert</span> <span class="n">data</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Litestar User&quot;</span>
</span><span data-line="26"><span class="linenos">26</span>    <span class="n">data</span><span class="o">.</span><span class="n">created_at</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">min</span>
</span><span data-line="27"><span class="linenos">27</span>    <span class="k">return</span> <span class="n">data</span>
</span><span data-line="28"><span class="linenos">28</span>
</span><span data-line="29"><span class="linenos">29</span>
</span><span data-line="30"><span class="linenos">30</span><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">route_handlers</span><span class="o">=</span><span class="p">[</span><span class="n">create_user</span><span class="p">])</span>
</span></pre></div>
</div>
</div>
<div class="admonition">
<p class="admonition-title">Run it</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span data-line="1">&gt;<span class="w"> </span>curl<span class="w"> </span>http://127.0.0.1:8000/users<span class="w"> </span>-H<span class="w"> </span>Content-Type:<span class="w"> </span>application/json<span class="w"> </span>-d<span class="w"> </span><span class="o">{</span><span class="s2">&quot;userName&quot;</span>:<span class="s2">&quot;Litestar User&quot;</span>,<span class="s2">&quot;password&quot;</span>:<span class="s2">&quot;xyz&quot;</span>,<span class="s2">&quot;created_at&quot;</span>:<span class="s2">&quot;2023-04-24T00:00:00Z&quot;</span><span class="o">}</span>
</span><span data-line="2"><span class="o">{</span><span class="s2">&quot;created_at&quot;</span>:<span class="s2">&quot;0001-01-01T00:00:00&quot;</span>,<span class="s2">&quot;id&quot;</span>:<span class="s2">&quot;432f1533-281b-49c9-9ce3-b81c586524d9&quot;</span>,<span class="s2">&quot;userName&quot;</span>:<span class="s2">&quot;Litestar User&quot;</span><span class="o">}</span>
</span></pre></div>
</div>
</div>
<p>Fields can also be renamed using a renaming strategy that will be applied to all fields. The following example uses a pre-defined rename strategy that will convert all field names to camel case on client-side.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Renaming fields</span><a class="headerlink" href="#id6" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
</span><span data-line="2"><span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>
</span><span data-line="3"><span class="linenos"> 3</span>
</span><span data-line="4"><span class="hll"><span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">advanced_alchemy.extensions.litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyDTO</span>
</span></span><span data-line="5"><span class="linenos"> 5</span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">Mapped</span><span class="p">,</span> <span class="n">mapped_column</span>
</span><span data-line="6"><span class="linenos"> 6</span>
</span><span data-line="7"><span class="linenos"> 7</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">post</span>
</span><span data-line="8"><span class="hll"><span class="linenos"> 8</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">DTOConfig</span><span class="p">,</span> <span class="n">dto_field</span>
</span></span><span data-line="9"><span class="linenos"> 9</span>
</span><span data-line="10"><span class="linenos">10</span><span class="kn">from</span><span class="w"> </span><span class="nn">.my_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Base</span>
</span><span data-line="11"><span class="linenos">11</span>
</span><span data-line="12"><span class="linenos">12</span>
</span><span data-line="13"><span class="linenos">13</span><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span data-line="14"><span class="linenos">14</span>    <span class="n">first_name</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="15"><span class="linenos">15</span>    <span class="n">password</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="n">dto_field</span><span class="p">(</span><span class="s2">&quot;private&quot;</span><span class="p">))</span>
</span><span data-line="16"><span class="linenos">16</span>    <span class="n">created_at</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="n">dto_field</span><span class="p">(</span><span class="s2">&quot;read-only&quot;</span><span class="p">))</span>
</span><span data-line="17"><span class="linenos">17</span>
</span><span data-line="18"><span class="linenos">18</span>
</span><span data-line="19"><span class="hll"><span class="linenos">19</span><span class="n">config</span> <span class="o">=</span> <span class="n">DTOConfig</span><span class="p">(</span><span class="n">rename_strategy</span><span class="o">=</span><span class="s2">&quot;camel&quot;</span><span class="p">)</span>
</span></span><span data-line="20"><span class="hll"><span class="linenos">20</span><span class="c1"># another rename strategy with a custom callback:</span>
</span></span><span data-line="21"><span class="hll"><span class="linenos">21</span><span class="c1"># config = DTOConfig(rename_strategy=lambda x: f&quot;-{x}-&quot;)</span>
</span></span><span data-line="22"><span class="hll"><span class="linenos">22</span><span class="n">UserDTO</span> <span class="o">=</span> <span class="n">SQLAlchemyDTO</span><span class="p">[</span><span class="n">Annotated</span><span class="p">[</span><span class="n">User</span><span class="p">,</span> <span class="n">config</span><span class="p">]]</span>
</span></span><span data-line="23"><span class="linenos">23</span>
</span><span data-line="24"><span class="hll"><span class="linenos">24</span>
</span></span><span data-line="25"><span class="linenos">25</span><span class="nd">@post</span><span class="p">(</span><span class="s2">&quot;/users&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">UserDTO</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span data-line="26"><span class="linenos">26</span><span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">User</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">User</span><span class="p">:</span>
</span><span data-line="27"><span class="linenos">27</span>    <span class="k">assert</span> <span class="n">data</span><span class="o">.</span><span class="n">first_name</span> <span class="o">==</span> <span class="s2">&quot;Litestar User&quot;</span>
</span><span data-line="28"><span class="linenos">28</span>    <span class="n">data</span><span class="o">.</span><span class="n">created_at</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">min</span>
</span><span data-line="29"><span class="linenos">29</span>    <span class="k">return</span> <span class="n">data</span>
</span><span data-line="30"><span class="linenos">30</span>
</span><span data-line="31"><span class="linenos">31</span>
</span><span data-line="32"><span class="linenos">32</span><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">route_handlers</span><span class="o">=</span><span class="p">[</span><span class="n">create_user</span><span class="p">])</span>
</span></pre></div>
</div>
</div>
<div class="admonition">
<p class="admonition-title">Run it</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span data-line="1">&gt;<span class="w"> </span>curl<span class="w"> </span>http://127.0.0.1:8000/users<span class="w"> </span>-H<span class="w"> </span>Content-Type:<span class="w"> </span>application/json<span class="w"> </span>-d<span class="w"> </span><span class="o">{</span><span class="s2">&quot;firstName&quot;</span>:<span class="s2">&quot;Litestar User&quot;</span>,<span class="s2">&quot;password&quot;</span>:<span class="s2">&quot;xyz&quot;</span>,<span class="s2">&quot;createdAt&quot;</span>:<span class="s2">&quot;2023-04-24T00:00:00Z&quot;</span><span class="o">}</span>
</span><span data-line="2"><span class="o">{</span><span class="s2">&quot;createdAt&quot;</span>:<span class="s2">&quot;0001-01-01T00:00:00&quot;</span>,<span class="s2">&quot;id&quot;</span>:<span class="s2">&quot;33abb223-a75e-49fb-9c67-4fc55bcb3dce&quot;</span>,<span class="s2">&quot;firstName&quot;</span>:<span class="s2">&quot;Litestar User&quot;</span><span class="o">}</span>
</span></pre></div>
</div>
</div>
<p>Fields that are directly renamed using <cite>rename_fields</cite> mapping will be excluded from <cite>rename_strategy</cite>.</p>
<p>The rename strategy either accepts one of the pre-defined strategies: “camel”, “pascal”, “upper”, “lower”, “kebab”, or it can be provided a callback that accepts the field name as a string argument and should return a string.</p>
</section>
<section id="type-checking">
<h2>Type checking<a class="headerlink" href="#type-checking" title="Link to this heading">¶</a></h2>
<p>Factories check that the types to which they are assigned are a subclass of the type provided as the generic type to the
DTO factory. This means that if you have a handler that accepts a <code class="docutils literal notranslate"><span class="pre">User</span></code> model, and you assign a <code class="docutils literal notranslate"><span class="pre">UserDTO</span></code> factory
to it, the DTO will only accept <code class="docutils literal notranslate"><span class="pre">User</span></code> types for “data” and return types.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">Type checking</span><a class="headerlink" href="#id7" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
</span><span data-line="2"><span class="linenos"> 2</span>
</span><span data-line="3"><span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">advanced_alchemy.extensions.litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyDTO</span>
</span><span data-line="4"><span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">Mapped</span><span class="p">,</span> <span class="n">mapped_column</span>
</span><span data-line="5"><span class="linenos"> 5</span>
</span><span data-line="6"><span class="linenos"> 6</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">post</span>
</span><span data-line="7"><span class="linenos"> 7</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">dto_field</span>
</span><span data-line="8"><span class="linenos"> 8</span>
</span><span data-line="9"><span class="linenos"> 9</span><span class="kn">from</span><span class="w"> </span><span class="nn">.my_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Base</span>
</span><span data-line="10"><span class="linenos">10</span>
</span><span data-line="11"><span class="linenos">11</span>
</span><span data-line="12"><span class="linenos">12</span><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span data-line="13"><span class="linenos">13</span>    <span class="n">name</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="14"><span class="linenos">14</span>    <span class="n">password</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="n">dto_field</span><span class="p">(</span><span class="s2">&quot;private&quot;</span><span class="p">))</span>
</span><span data-line="15"><span class="linenos">15</span>    <span class="n">created_at</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">info</span><span class="o">=</span><span class="n">dto_field</span><span class="p">(</span><span class="s2">&quot;read-only&quot;</span><span class="p">))</span>
</span><span data-line="16"><span class="linenos">16</span>
</span><span data-line="17"><span class="linenos">17</span>
</span><span data-line="18"><span class="linenos">18</span><span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span data-line="19"><span class="linenos">19</span>    <span class="n">foo</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="20"><span class="linenos">20</span>
</span><span data-line="21"><span class="linenos">21</span>
</span><span data-line="22"><span class="linenos">22</span><span class="n">UserDTO</span> <span class="o">=</span> <span class="n">SQLAlchemyDTO</span><span class="p">[</span><span class="n">User</span><span class="p">]</span>
</span><span data-line="23"><span class="linenos">23</span>
</span><span data-line="24"><span class="linenos">24</span>
</span><span data-line="25"><span class="hll"><span class="linenos">25</span><span class="nd">@post</span><span class="p">(</span><span class="s2">&quot;/users&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">UserDTO</span><span class="p">)</span>
</span></span><span data-line="26"><span class="hll"><span class="linenos">26</span><span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">Foo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Foo</span><span class="p">:</span>
</span></span><span data-line="27"><span class="linenos">27</span>    <span class="k">return</span> <span class="n">data</span>
</span><span data-line="28"><span class="linenos">28</span>
</span><span data-line="29"><span class="linenos">29</span>
</span><span data-line="30"><span class="linenos">30</span><span class="c1"># This will raise an exception at handler registration time.</span>
</span><span data-line="31"><span class="hll"><span class="linenos">31</span><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">route_handlers</span><span class="o">=</span><span class="p">[</span><span class="n">create_user</span><span class="p">])</span>
</span></span></pre></div>
</div>
</div>
<p>In the above example, the handler is declared to use <code class="docutils literal notranslate"><span class="pre">UserDTO</span></code> which has been type-narrowed with the <code class="docutils literal notranslate"><span class="pre">User</span></code> type.
However, we annotate the handler with the <code class="docutils literal notranslate"><span class="pre">Foo</span></code> type. This will raise an error such as this at runtime:</p>
<blockquote>
<div><p>litestar.exceptions.dto.InvalidAnnotationException: DTO narrowed with
‘&lt;class ‘docs.examples.data_transfer_objects.factory.type_checking.User’&gt;’, handler type is
‘&lt;class ‘docs.examples.data_transfer_objects.factory.type_checking.Foo’&gt;’</p>
</div></blockquote>
</section>
<section id="nested-fields">
<h2>Nested fields<a class="headerlink" href="#nested-fields" title="Link to this heading">¶</a></h2>
<p>The depth of related items parsed from client data and serialized into return data can be controlled using the
<code class="docutils literal notranslate"><span class="pre">max_nested_depth</span></code> parameter to <a class="reference internal" href="../../reference/dto/config.html#litestar.dto.config.DTOConfig" title="litestar.dto.config.DTOConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">DTOConfig</span></code></a>.</p>
<p>In this example, we set <code class="docutils literal notranslate"><span class="pre">max_nested_depth=0</span></code> for the DTO that handles inbound client data, and leave it at the default
of <code class="docutils literal notranslate"><span class="pre">1</span></code> for the return DTO.</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">Type checking</span><a class="headerlink" href="#id8" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>
</span><span data-line="2"><span class="linenos"> 2</span>
</span><span data-line="3"><span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>
</span><span data-line="4"><span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">uuid</span><span class="w"> </span><span class="kn">import</span> <span class="n">UUID</span>
</span><span data-line="5"><span class="linenos"> 5</span>
</span><span data-line="6"><span class="linenos"> 6</span><span class="kn">from</span><span class="w"> </span><span class="nn">advanced_alchemy.extensions.litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyDTO</span>
</span><span data-line="7"><span class="linenos"> 7</span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">ForeignKey</span>
</span><span data-line="8"><span class="linenos"> 8</span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">Mapped</span><span class="p">,</span> <span class="n">mapped_column</span><span class="p">,</span> <span class="n">relationship</span>
</span><span data-line="9"><span class="linenos"> 9</span>
</span><span data-line="10"><span class="linenos">10</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">put</span>
</span><span data-line="11"><span class="linenos">11</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">DTOConfig</span>
</span><span data-line="12"><span class="linenos">12</span>
</span><span data-line="13"><span class="linenos">13</span><span class="kn">from</span><span class="w"> </span><span class="nn">.my_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Base</span>
</span><span data-line="14"><span class="linenos">14</span>
</span><span data-line="15"><span class="linenos">15</span>
</span><span data-line="16"><span class="linenos">16</span><span class="k">class</span><span class="w"> </span><span class="nc">A</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span data-line="17"><span class="linenos">17</span>    <span class="n">b_id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">UUID</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;b.id&quot;</span><span class="p">))</span>
</span><span data-line="18"><span class="linenos">18</span>    <span class="n">b</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">B</span><span class="p">]</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
</span><span data-line="19"><span class="linenos">19</span>
</span><span data-line="20"><span class="linenos">20</span>
</span><span data-line="21"><span class="linenos">21</span><span class="k">class</span><span class="w"> </span><span class="nc">B</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span data-line="22"><span class="linenos">22</span>    <span class="n">a</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">A</span><span class="p">]</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="n">back_populates</span><span class="o">=</span><span class="s2">&quot;b&quot;</span><span class="p">)</span>
</span><span data-line="23"><span class="linenos">23</span>
</span><span data-line="24"><span class="linenos">24</span>
</span><span data-line="25"><span class="hll"><span class="linenos">25</span><span class="n">data_config</span> <span class="o">=</span> <span class="n">DTOConfig</span><span class="p">(</span><span class="n">max_nested_depth</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></span><span data-line="26"><span class="linenos">26</span><span class="n">DataDTO</span> <span class="o">=</span> <span class="n">SQLAlchemyDTO</span><span class="p">[</span><span class="n">Annotated</span><span class="p">[</span><span class="n">A</span><span class="p">,</span> <span class="n">data_config</span><span class="p">]]</span>
</span><span data-line="27"><span class="linenos">27</span>
</span><span data-line="28"><span class="linenos">28</span><span class="c1"># default config sets max_nested_depth to 1</span>
</span><span data-line="29"><span class="linenos">29</span><span class="n">ReturnDTO</span> <span class="o">=</span> <span class="n">SQLAlchemyDTO</span><span class="p">[</span><span class="n">A</span><span class="p">]</span>
</span><span data-line="30"><span class="linenos">30</span>
</span><span data-line="31"><span class="linenos">31</span>
</span><span data-line="32"><span class="linenos">32</span><span class="nd">@put</span><span class="p">(</span><span class="s2">&quot;/a&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">DataDTO</span><span class="p">,</span> <span class="n">return_dto</span><span class="o">=</span><span class="n">ReturnDTO</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span data-line="33"><span class="linenos">33</span><span class="k">def</span><span class="w"> </span><span class="nf">update_a</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">A</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">A</span><span class="p">:</span>
</span><span data-line="34"><span class="linenos">34</span>    <span class="c1"># this shows that &quot;b&quot; was not parsed out of the inbound data</span>
</span><span data-line="35"><span class="hll"><span class="linenos">35</span>    <span class="k">assert</span> <span class="s2">&quot;b&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span></span><span data-line="36"><span class="linenos">36</span>    <span class="c1"># Now we&#39;ll create an instance of B and assign it&quot;</span>
</span><span data-line="37"><span class="linenos">37</span>    <span class="c1"># This includes a reference back to ``a`` which is not serialized in the return data</span>
</span><span data-line="38"><span class="linenos">38</span>    <span class="c1"># because default ``max_nested_depth`` is set to 1</span>
</span><span data-line="39"><span class="hll"><span class="linenos">39</span>    <span class="n">data</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">B</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">b_id</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</span></span><span data-line="40"><span class="linenos">40</span>    <span class="k">return</span> <span class="n">data</span>
</span><span data-line="41"><span class="linenos">41</span>
</span><span data-line="42"><span class="linenos">42</span>
</span><span data-line="43"><span class="linenos">43</span><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">route_handlers</span><span class="o">=</span><span class="p">[</span><span class="n">update_a</span><span class="p">])</span>
</span></pre></div>
</div>
</div>
<div class="admonition">
<p class="admonition-title">Run it</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span data-line="1">&gt;<span class="w"> </span>curl<span class="w"> </span>http://127.0.0.1:8000/a<span class="w"> </span>-H<span class="w"> </span>Content-Type:<span class="w"> </span>application/json<span class="w"> </span>-X<span class="w"> </span>PUT<span class="w"> </span>-d<span class="w"> </span><span class="o">{</span><span class="s2">&quot;id&quot;</span>:<span class="w"> </span><span class="s2">&quot;6955e63c-c2bc-4707-8fa4-2144d1764746&quot;</span>,<span class="w"> </span><span class="s2">&quot;b_id&quot;</span>:<span class="w"> </span><span class="s2">&quot;9cf3518d-7e19-4215-9ec2-e056cac55bf7&quot;</span>,<span class="w"> </span><span class="s2">&quot;b&quot;</span>:<span class="w"> </span><span class="o">{</span><span class="s2">&quot;id&quot;</span>:<span class="w"> </span><span class="s2">&quot;9cf3518d-7e19-4215-9ec2-e056cac55bf7&quot;</span><span class="o">}}</span>
</span><span data-line="2"><span class="o">{</span><span class="s2">&quot;b_id&quot;</span>:<span class="s2">&quot;9cf3518d-7e19-4215-9ec2-e056cac55bf7&quot;</span>,<span class="s2">&quot;b&quot;</span>:<span class="o">{</span><span class="s2">&quot;id&quot;</span>:<span class="s2">&quot;9cf3518d-7e19-4215-9ec2-e056cac55bf7&quot;</span><span class="o">}</span>,<span class="s2">&quot;id&quot;</span>:<span class="s2">&quot;6955e63c-c2bc-4707-8fa4-2144d1764746&quot;</span><span class="o">}</span>
</span></pre></div>
</div>
</div>
<p>When the handler receives the client data, we can see that the <code class="docutils literal notranslate"><span class="pre">b</span></code> field has not been parsed into the <code class="docutils literal notranslate"><span class="pre">A</span></code> model that
is injected for our data parameter (line 35).</p>
<p>We then add a <code class="docutils literal notranslate"><span class="pre">B</span></code> instance to the data (line 39), which includes a reference back to <code class="docutils literal notranslate"><span class="pre">a</span></code>, and from inspection of the
return data can see that <code class="docutils literal notranslate"><span class="pre">b</span></code> is included in the response data, however <code class="docutils literal notranslate"><span class="pre">b.a</span></code> is not, due to the default
<code class="docutils literal notranslate"><span class="pre">max_nested_depth</span></code> of <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
</section>
<section id="handling-unknown-fields">
<h2>Handling unknown fields<a class="headerlink" href="#handling-unknown-fields" title="Link to this heading">¶</a></h2>
<p>By default, DTOs will silently ignore unknown fields in the source data. This behaviour
can be configured using the <code class="docutils literal notranslate"><span class="pre">forbid_unknown_fields</span></code> parameter of the
<a class="reference internal" href="../../reference/dto/config.html#litestar.dto.config.DTOConfig" title="litestar.dto.config.DTOConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">DTOConfig</span></code></a>. When set to <code class="docutils literal notranslate"><span class="pre">True</span></code> a validation
error response will be returned if the data contains a field not defined on the model:</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">Type checking</span><a class="headerlink" href="#id9" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>
</span><span data-line="2"><span class="linenos"> 2</span>
</span><span data-line="3"><span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
</span><span data-line="4"><span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>
</span><span data-line="5"><span class="linenos"> 5</span>
</span><span data-line="6"><span class="linenos"> 6</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">post</span>
</span><span data-line="7"><span class="linenos"> 7</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataclassDTO</span><span class="p">,</span> <span class="n">DTOConfig</span>
</span><span data-line="8"><span class="linenos"> 8</span>
</span><span data-line="9"><span class="linenos"> 9</span>
</span><span data-line="10"><span class="linenos">10</span><span class="nd">@dataclass</span>
</span><span data-line="11"><span class="linenos">11</span><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">:</span>
</span><span data-line="12"><span class="linenos">12</span>    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="13"><span class="linenos">13</span>
</span><span data-line="14"><span class="linenos">14</span>
</span><span data-line="15"><span class="linenos">15</span><span class="n">UserDTO</span> <span class="o">=</span> <span class="n">DataclassDTO</span><span class="p">[</span><span class="n">Annotated</span><span class="p">[</span><span class="n">User</span><span class="p">,</span> <span class="n">DTOConfig</span><span class="p">(</span><span class="n">forbid_unknown_fields</span><span class="o">=</span><span class="kc">True</span><span class="p">)]]</span>
</span><span data-line="16"><span class="linenos">16</span>
</span><span data-line="17"><span class="linenos">17</span>
</span><span data-line="18"><span class="linenos">18</span><span class="nd">@post</span><span class="p">(</span><span class="s2">&quot;/users&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">UserDTO</span><span class="p">)</span>
</span><span data-line="19"><span class="linenos">19</span><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">User</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">User</span><span class="p">:</span>
</span><span data-line="20"><span class="linenos">20</span>    <span class="k">return</span> <span class="n">data</span>
</span><span data-line="21"><span class="linenos">21</span>
</span><span data-line="22"><span class="linenos">22</span>
</span><span data-line="23"><span class="linenos">23</span><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">([</span><span class="n">create_user</span><span class="p">])</span>
</span></pre></div>
</div>
</div>
<div class="admonition">
<p class="admonition-title">Run it</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span data-line="1">&gt;<span class="w"> </span>curl<span class="w"> </span>http://127.0.0.1:8000/users<span class="w"> </span>-H<span class="w"> </span>Content-Type:<span class="w"> </span>application/json<span class="w"> </span>-d<span class="w"> </span><span class="o">{</span><span class="s2">&quot;id&quot;</span>:<span class="w"> </span><span class="s2">&quot;1&quot;</span>,<span class="w"> </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;Peter&quot;</span><span class="o">}</span>
</span><span data-line="2"><span class="o">{</span><span class="s2">&quot;status_code&quot;</span>:400,<span class="s2">&quot;detail&quot;</span>:<span class="s2">&quot;Object contains unknown field `name`&quot;</span><span class="o">}</span>
</span></pre></div>
</div>
</div>
</section>
<section id="dto-data">
<h2>DTO Data<a class="headerlink" href="#dto-data" title="Link to this heading">¶</a></h2>
<p>Sometimes we need to be able to access the data that has been parsed and validated by the DTO, but not converted into
an instance of our data model.</p>
<p>In the following example, we create a <code class="docutils literal notranslate"><span class="pre">User</span></code> model, that is a <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html#dataclasses.dataclass" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">dataclass</span></code></a> with 3
required fields: <code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">name</span></code>, and <code class="docutils literal notranslate"><span class="pre">age</span></code>.</p>
<p>We also create a DTO that doesn’t allow clients to set the <code class="docutils literal notranslate"><span class="pre">id</span></code> field on the <code class="docutils literal notranslate"><span class="pre">User</span></code> model and set it on the
handler.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>
</span><span data-line="2"><span class="linenos"> 2</span>
</span><span data-line="3"><span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">field</span>
</span><span data-line="4"><span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">uuid</span><span class="w"> </span><span class="kn">import</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">uuid4</span>
</span><span data-line="5"><span class="linenos"> 5</span>
</span><span data-line="6"><span class="linenos"> 6</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">post</span>
</span><span data-line="7"><span class="linenos"> 7</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataclassDTO</span><span class="p">,</span> <span class="n">DTOConfig</span>
</span><span data-line="8"><span class="linenos"> 8</span>
</span><span data-line="9"><span class="linenos"> 9</span>
</span><span data-line="10"><span class="linenos">10</span><span class="nd">@dataclass</span>
</span><span data-line="11"><span class="linenos">11</span><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">:</span>
</span><span data-line="12"><span class="linenos">12</span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="13"><span class="linenos">13</span>    <span class="n">email</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="14"><span class="linenos">14</span>    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span>
</span><span data-line="15"><span class="linenos">15</span>    <span class="nb">id</span><span class="p">:</span> <span class="n">UUID</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">uuid4</span><span class="p">)</span>
</span><span data-line="16"><span class="linenos">16</span>
</span><span data-line="17"><span class="linenos">17</span>
</span><span data-line="18"><span class="hll"><span class="linenos">18</span><span class="k">class</span><span class="w"> </span><span class="nc">UserWriteDTO</span><span class="p">(</span><span class="n">DataclassDTO</span><span class="p">[</span><span class="n">User</span><span class="p">]):</span>
</span></span><span data-line="19"><span class="hll"><span class="linenos">19</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Don&#39;t allow client to set the id.&quot;&quot;&quot;</span>
</span></span><span data-line="20"><span class="hll"><span class="linenos">20</span>
</span></span><span data-line="21"><span class="hll"><span class="linenos">21</span>    <span class="n">config</span> <span class="o">=</span> <span class="n">DTOConfig</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">})</span>
</span></span><span data-line="22"><span class="linenos">22</span>
</span><span data-line="23"><span class="linenos">23</span>
</span><span data-line="24"><span class="linenos">24</span><span class="c1"># We need a dto for the handler to parse the request data per the configuration, however,</span>
</span><span data-line="25"><span class="linenos">25</span><span class="c1"># we don&#39;t need a return DTO as we are returning a dataclass, and Litestar already knows</span>
</span><span data-line="26"><span class="linenos">26</span><span class="c1"># how to serialize dataclasses.</span>
</span><span data-line="27"><span class="hll"><span class="linenos">27</span><span class="nd">@post</span><span class="p">(</span><span class="s2">&quot;/users&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">UserWriteDTO</span><span class="p">,</span> <span class="n">return_dto</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span data-line="28"><span class="linenos">28</span><span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">User</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">User</span><span class="p">:</span>
</span><span data-line="29"><span class="linenos">29</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Create an user.&quot;&quot;&quot;</span>
</span><span data-line="30"><span class="linenos">30</span>    <span class="k">return</span> <span class="n">data</span>
</span><span data-line="31"><span class="linenos">31</span>
</span><span data-line="32"><span class="linenos">32</span>
</span><span data-line="33"><span class="linenos">33</span><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">route_handlers</span><span class="o">=</span><span class="p">[</span><span class="n">create_user</span><span class="p">])</span>
</span></pre></div>
</div>
<div class="admonition">
<p class="admonition-title">Run it</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span data-line="1">&gt;<span class="w"> </span>curl<span class="w"> </span>http://127.0.0.1:8000/users<span class="w"> </span>-H<span class="w"> </span>Content-Type:<span class="w"> </span>application/json<span class="w"> </span>-d<span class="w"> </span><span class="o">{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Peter&quot;</span>,<span class="s2">&quot;email&quot;</span>:<span class="w"> </span><span class="s2">&quot;peter@example.com&quot;</span>,<span class="w"> </span><span class="s2">&quot;age&quot;</span>:41<span class="o">}</span>
</span><span data-line="2"><span class="o">{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Peter&quot;</span>,<span class="s2">&quot;email&quot;</span>:<span class="s2">&quot;peter@example.com&quot;</span>,<span class="s2">&quot;age&quot;</span>:41,<span class="s2">&quot;id&quot;</span>:<span class="s2">&quot;c3b5166a-5f66-485c-a156-19669ba1f962&quot;</span><span class="o">}</span>
</span></pre></div>
</div>
</div>
<p>Notice that our <cite>User</cite> model has a model-level <code class="docutils literal notranslate"><span class="pre">default_factory=uuid4</span></code>
for <code class="docutils literal notranslate"><span class="pre">id</span></code> field. That’s why we can decode the client data into this model.</p>
<p>However, in some cases there’s no clear way to provide a default this way.</p>
<p>One way to handle this is to create different models, e.g., we might create a <code class="docutils literal notranslate"><span class="pre">UserCreate</span></code> model that has no <code class="docutils literal notranslate"><span class="pre">id</span></code>
field, and decode the client data into that. However, this method can become quite cumbersome when we have a lot of
variability in the data that we accept from clients, for example,
<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/PATCH">PATCH</a> requests.</p>
<p>This is where the <a class="reference internal" href="../../reference/dto/data_structures.html#litestar.dto.data_structures.DTOData" title="litestar.dto.data_structures.DTOData"><code class="xref py py-class docutils literal notranslate"><span class="pre">DTOData</span></code></a> class comes in. It is a generic class that accepts the
type of the data that it will contain, and provides useful methods for interacting with that data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
</span><span data-line="2"><span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">uuid</span><span class="w"> </span><span class="kn">import</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">uuid4</span>
</span><span data-line="3"><span class="linenos"> 3</span>
</span><span data-line="4"><span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">post</span>
</span><span data-line="5"><span class="hll"><span class="linenos"> 5</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataclassDTO</span><span class="p">,</span> <span class="n">DTOConfig</span><span class="p">,</span> <span class="n">DTOData</span>
</span></span><span data-line="6"><span class="linenos"> 6</span>
</span><span data-line="7"><span class="linenos"> 7</span>
</span><span data-line="8"><span class="linenos"> 8</span><span class="nd">@dataclass</span>
</span><span data-line="9"><span class="linenos"> 9</span><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">:</span>
</span><span data-line="10"><span class="linenos">10</span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="11"><span class="linenos">11</span>    <span class="n">email</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="12"><span class="linenos">12</span>    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span>
</span><span data-line="13"><span class="linenos">13</span>    <span class="nb">id</span><span class="p">:</span> <span class="n">UUID</span>
</span><span data-line="14"><span class="linenos">14</span>
</span><span data-line="15"><span class="linenos">15</span>
</span><span data-line="16"><span class="linenos">16</span><span class="k">class</span><span class="w"> </span><span class="nc">UserWriteDTO</span><span class="p">(</span><span class="n">DataclassDTO</span><span class="p">[</span><span class="n">User</span><span class="p">]):</span>
</span><span data-line="17"><span class="linenos">17</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Don&#39;t allow client to set the id.&quot;&quot;&quot;</span>
</span><span data-line="18"><span class="linenos">18</span>
</span><span data-line="19"><span class="linenos">19</span>    <span class="n">config</span> <span class="o">=</span> <span class="n">DTOConfig</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">})</span>
</span><span data-line="20"><span class="linenos">20</span>
</span><span data-line="21"><span class="linenos">21</span>
</span><span data-line="22"><span class="linenos">22</span><span class="nd">@post</span><span class="p">(</span><span class="s2">&quot;/users&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">UserWriteDTO</span><span class="p">,</span> <span class="n">return_dto</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span data-line="23"><span class="hll"><span class="linenos">23</span><span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">DTOData</span><span class="p">[</span><span class="n">User</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">User</span><span class="p">:</span>
</span></span><span data-line="24"><span class="linenos">24</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Create an user.&quot;&quot;&quot;</span>
</span><span data-line="25"><span class="hll"><span class="linenos">25</span>    <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">create_instance</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">uuid4</span><span class="p">())</span>
</span></span><span data-line="26"><span class="linenos">26</span>
</span><span data-line="27"><span class="linenos">27</span>
</span><span data-line="28"><span class="linenos">28</span><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">route_handlers</span><span class="o">=</span><span class="p">[</span><span class="n">create_user</span><span class="p">])</span>
</span></pre></div>
</div>
<div class="admonition">
<p class="admonition-title">Run it</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span data-line="1">&gt;<span class="w"> </span>curl<span class="w"> </span>http://127.0.0.1:8000/users<span class="w"> </span>-H<span class="w"> </span>Content-Type:<span class="w"> </span>application/json<span class="w"> </span>-d<span class="w"> </span><span class="o">{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Peter&quot;</span>,<span class="w"> </span><span class="s2">&quot;email&quot;</span>:<span class="w"> </span><span class="s2">&quot;peter@example.com&quot;</span>,<span class="w"> </span><span class="s2">&quot;age&quot;</span>:41<span class="o">}</span>
</span><span data-line="2"><span class="o">{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Peter&quot;</span>,<span class="s2">&quot;email&quot;</span>:<span class="s2">&quot;peter@example.com&quot;</span>,<span class="s2">&quot;age&quot;</span>:41,<span class="s2">&quot;id&quot;</span>:<span class="s2">&quot;87ac6a29-7492-4b88-8bd5-559616dd14e1&quot;</span><span class="o">}</span>
</span></pre></div>
</div>
</div>
<p>In the above example, we’ve injected an instance of <a class="reference internal" href="../../reference/dto/data_structures.html#litestar.dto.data_structures.DTOData" title="litestar.dto.data_structures.DTOData"><code class="xref py py-class docutils literal notranslate"><span class="pre">DTOData</span></code></a> into our handler,
and have used that to create our <code class="docutils literal notranslate"><span class="pre">User</span></code> instance, after augmenting the client data with a server generated <code class="docutils literal notranslate"><span class="pre">id</span></code>
value.</p>
<p>Consult the <a class="reference internal" href="../../reference/dto/data_structures.html#litestar.dto.data_structures.DTOData" title="litestar.dto.data_structures.DTOData"><code class="xref py py-class docutils literal notranslate"><span class="pre">Reference</span> <span class="pre">Docs</span></code></a> for more information on the methods available.</p>
<section id="providing-values-for-nested-data">
<span id="dto-create-instance-nested-data"></span><h3>Providing values for nested data<a class="headerlink" href="#providing-values-for-nested-data" title="Link to this heading">¶</a></h3>
<p>To augment data used to instantiate our model instances, we can provide keyword arguments to the
<a class="reference internal" href="../../reference/dto/data_structures.html#litestar.dto.data_structures.DTOData.create_instance" title="litestar.dto.data_structures.DTOData.create_instance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_instance()</span></code></a> method.</p>
<p>Sometimes we need to provide values for nested data, for example, when creating a new instance of a model that has a
nested model with excluded fields.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>
</span><span data-line="2"><span class="linenos"> 2</span>
</span><span data-line="3"><span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
</span><span data-line="4"><span class="linenos"> 4</span>
</span><span data-line="5"><span class="linenos"> 5</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">post</span>
</span><span data-line="6"><span class="linenos"> 6</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataclassDTO</span><span class="p">,</span> <span class="n">DTOConfig</span><span class="p">,</span> <span class="n">DTOData</span>
</span><span data-line="7"><span class="linenos"> 7</span>
</span><span data-line="8"><span class="linenos"> 8</span>
</span><span data-line="9"><span class="hll"><span class="linenos"> 9</span><span class="nd">@dataclass</span>
</span></span><span data-line="10"><span class="hll"><span class="linenos">10</span><span class="k">class</span><span class="w"> </span><span class="nc">Address</span><span class="p">:</span>
</span></span><span data-line="11"><span class="hll"><span class="linenos">11</span>    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
</span></span><span data-line="12"><span class="hll"><span class="linenos">12</span>    <span class="n">street</span><span class="p">:</span> <span class="nb">str</span>
</span></span><span data-line="13"><span class="linenos">13</span>
</span><span data-line="14"><span class="linenos">14</span>
</span><span data-line="15"><span class="linenos">15</span><span class="nd">@dataclass</span>
</span><span data-line="16"><span class="linenos">16</span><span class="k">class</span><span class="w"> </span><span class="nc">Person</span><span class="p">:</span>
</span><span data-line="17"><span class="linenos">17</span>    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
</span><span data-line="18"><span class="linenos">18</span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="19"><span class="linenos">19</span>    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span>
</span><span data-line="20"><span class="hll"><span class="linenos">20</span>    <span class="n">address</span><span class="p">:</span> <span class="n">Address</span>
</span></span><span data-line="21"><span class="linenos">21</span>
</span><span data-line="22"><span class="linenos">22</span>
</span><span data-line="23"><span class="linenos">23</span><span class="k">class</span><span class="w"> </span><span class="nc">ReadDTO</span><span class="p">(</span><span class="n">DataclassDTO</span><span class="p">[</span><span class="n">Person</span><span class="p">]):</span>
</span><span data-line="24"><span class="linenos">24</span>    <span class="n">config</span> <span class="o">=</span> <span class="n">DTOConfig</span><span class="p">()</span>
</span><span data-line="25"><span class="linenos">25</span>
</span><span data-line="26"><span class="linenos">26</span>
</span><span data-line="27"><span class="linenos">27</span><span class="k">class</span><span class="w"> </span><span class="nc">WriteDTO</span><span class="p">(</span><span class="n">DataclassDTO</span><span class="p">[</span><span class="n">Person</span><span class="p">]):</span>
</span><span data-line="28"><span class="hll"><span class="linenos">28</span>    <span class="n">config</span> <span class="o">=</span> <span class="n">DTOConfig</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;address.id&quot;</span><span class="p">})</span>
</span></span><span data-line="29"><span class="linenos">29</span>
</span><span data-line="30"><span class="linenos">30</span>
</span><span data-line="31"><span class="linenos">31</span><span class="nd">@post</span><span class="p">(</span><span class="s2">&quot;/person&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">WriteDTO</span><span class="p">,</span> <span class="n">return_dto</span><span class="o">=</span><span class="n">ReadDTO</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span data-line="32"><span class="linenos">32</span><span class="k">def</span><span class="w"> </span><span class="nf">create_person</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">DTOData</span><span class="p">[</span><span class="n">Person</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Person</span><span class="p">:</span>
</span><span data-line="33"><span class="linenos">33</span>    <span class="c1"># Logic for persisting the person goes here</span>
</span><span data-line="34"><span class="hll"><span class="linenos">34</span>    <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">create_instance</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">address__id</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></span><span data-line="35"><span class="linenos">35</span>
</span><span data-line="36"><span class="linenos">36</span>
</span><span data-line="37"><span class="linenos">37</span><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">route_handlers</span><span class="o">=</span><span class="p">[</span><span class="n">create_person</span><span class="p">])</span>
</span></pre></div>
</div>
<div class="admonition">
<p class="admonition-title">Run it</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span data-line="1">&gt;<span class="w"> </span>curl<span class="w"> </span>http://127.0.0.1:8000/person<span class="w"> </span>-H<span class="w"> </span>Content-Type:<span class="w"> </span>application/json<span class="w"> </span>-d<span class="w"> </span><span class="o">{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Peter&quot;</span>,<span class="s2">&quot;age&quot;</span>:41,<span class="w"> </span><span class="s2">&quot;address&quot;</span>:<span class="w"> </span><span class="o">{</span><span class="s2">&quot;street&quot;</span>:<span class="w"> </span><span class="s2">&quot;Fake Street&quot;</span><span class="o">}}</span>
</span><span data-line="2"><span class="o">{</span><span class="s2">&quot;id&quot;</span>:1,<span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Peter&quot;</span>,<span class="s2">&quot;age&quot;</span>:41,<span class="s2">&quot;address&quot;</span>:<span class="o">{</span><span class="s2">&quot;id&quot;</span>:2,<span class="s2">&quot;street&quot;</span>:<span class="s2">&quot;Fake Street&quot;</span><span class="o">}}</span>
</span></pre></div>
</div>
</div>
<p>The double-underscore syntax <code class="docutils literal notranslate"><span class="pre">address__id</span></code> passed as a keyword argument to the
<a class="reference internal" href="../../reference/dto/data_structures.html#litestar.dto.data_structures.DTOData.create_instance" title="litestar.dto.data_structures.DTOData.create_instance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_instance()</span></code></a> method call is used to specify a value for a
nested attribute. In this case, it’s used to provide a value for the <code class="docutils literal notranslate"><span class="pre">id</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">Address</span></code> instance nested
within the <code class="docutils literal notranslate"><span class="pre">Person</span></code> instance.</p>
<p>This is a common convention in Python for dealing with nested structures. The double underscore can be interpreted as
“traverse through”, so <code class="docutils literal notranslate"><span class="pre">address__id</span></code> means “traverse through address to get to its id”.</p>
<p>In the context of this script, <code class="docutils literal notranslate"><span class="pre">create_instance(id=1,</span> <span class="pre">address__id=2)</span></code> is saying “create a new <code class="docutils literal notranslate"><span class="pre">Person</span></code> instance from
the client data given an id of <code class="docutils literal notranslate"><span class="pre">1</span></code>, and supplement the client address data with an id of <code class="docutils literal notranslate"><span class="pre">2</span></code>”.</p>
</section>
</section>
<section id="dto-factory-and-patch-requests">
<h2>DTO Factory and PATCH requests<a class="headerlink" href="#dto-factory-and-patch-requests" title="Link to this heading">¶</a></h2>
<p><a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/PATCH">PATCH</a> requests are a special case when it comes to
data transfer objects. The reason for this is that we need to be able to accept and validate any subset of the model
attributes in the client payload, which requires some special handling internally.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>
</span><span data-line="2"><span class="linenos"> 2</span>
</span><span data-line="3"><span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
</span><span data-line="4"><span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">uuid</span><span class="w"> </span><span class="kn">import</span> <span class="n">UUID</span>
</span><span data-line="5"><span class="linenos"> 5</span>
</span><span data-line="6"><span class="linenos"> 6</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">patch</span>
</span><span data-line="7"><span class="hll"><span class="linenos"> 7</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataclassDTO</span><span class="p">,</span> <span class="n">DTOConfig</span><span class="p">,</span> <span class="n">DTOData</span>
</span></span><span data-line="8"><span class="linenos"> 8</span>
</span><span data-line="9"><span class="linenos"> 9</span>
</span><span data-line="10"><span class="linenos">10</span><span class="nd">@dataclass</span>
</span><span data-line="11"><span class="linenos">11</span><span class="k">class</span><span class="w"> </span><span class="nc">Person</span><span class="p">:</span>
</span><span data-line="12"><span class="linenos">12</span>    <span class="nb">id</span><span class="p">:</span> <span class="n">UUID</span>
</span><span data-line="13"><span class="linenos">13</span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="14"><span class="linenos">14</span>    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span>
</span><span data-line="15"><span class="linenos">15</span>
</span><span data-line="16"><span class="linenos">16</span>
</span><span data-line="17"><span class="linenos">17</span><span class="k">class</span><span class="w"> </span><span class="nc">PatchDTO</span><span class="p">(</span><span class="n">DataclassDTO</span><span class="p">[</span><span class="n">Person</span><span class="p">]):</span>
</span><span data-line="18"><span class="linenos">18</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Don&#39;t allow client to set the id, and allow partial updates.&quot;&quot;&quot;</span>
</span><span data-line="19"><span class="linenos">19</span>
</span><span data-line="20"><span class="hll"><span class="linenos">20</span>    <span class="n">config</span> <span class="o">=</span> <span class="n">DTOConfig</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">},</span> <span class="n">partial</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span data-line="21"><span class="linenos">21</span>
</span><span data-line="22"><span class="linenos">22</span>
</span><span data-line="23"><span class="linenos">23</span><span class="n">peter_uuid</span> <span class="o">=</span> <span class="n">UUID</span><span class="p">(</span><span class="s2">&quot;f32ff2ce-e32f-4537-9dc0-26e7599f1380&quot;</span><span class="p">)</span>
</span><span data-line="24"><span class="linenos">24</span><span class="n">database</span> <span class="o">=</span> <span class="p">{</span><span class="n">peter_uuid</span><span class="p">:</span> <span class="n">Person</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">peter_uuid</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Peter&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">40</span><span class="p">)}</span>
</span><span data-line="25"><span class="linenos">25</span>
</span><span data-line="26"><span class="linenos">26</span>
</span><span data-line="27"><span class="hll"><span class="linenos">27</span><span class="nd">@patch</span><span class="p">(</span><span class="s2">&quot;/person/{person_id:uuid}&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">PatchDTO</span><span class="p">,</span> <span class="n">return_dto</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span data-line="28"><span class="hll"><span class="linenos">28</span><span class="k">def</span><span class="w"> </span><span class="nf">update_person</span><span class="p">(</span><span class="n">person_id</span><span class="p">:</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">DTOData</span><span class="p">[</span><span class="n">Person</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Person</span><span class="p">:</span>
</span></span><span data-line="29"><span class="linenos">29</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;Partially update a person.&quot;&quot;&quot;</span>
</span><span data-line="30"><span class="hll"><span class="linenos">30</span>    <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">update_instance</span><span class="p">(</span><span class="n">database</span><span class="p">[</span><span class="n">person_id</span><span class="p">])</span>
</span></span><span data-line="31"><span class="linenos">31</span>
</span><span data-line="32"><span class="linenos">32</span>
</span><span data-line="33"><span class="linenos">33</span><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">route_handlers</span><span class="o">=</span><span class="p">[</span><span class="n">update_person</span><span class="p">])</span>
</span></pre></div>
</div>
<div class="admonition">
<p class="admonition-title">Run it</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span data-line="1">&gt;<span class="w"> </span>curl<span class="w"> </span>http://127.0.0.1:8000/person/f32ff2ce-e32f-4537-9dc0-26e7599f1380<span class="w"> </span>-X<span class="w"> </span>PATCH<span class="w"> </span>-H<span class="w"> </span>Content-Type:<span class="w"> </span>application/json<span class="w"> </span>-d<span class="w"> </span><span class="o">{</span><span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Peter Pan&quot;</span><span class="o">}</span>
</span><span data-line="2"><span class="o">{</span><span class="s2">&quot;id&quot;</span>:<span class="s2">&quot;f32ff2ce-e32f-4537-9dc0-26e7599f1380&quot;</span>,<span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Peter Pan&quot;</span>,<span class="s2">&quot;age&quot;</span>:40<span class="o">}</span>
</span></pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">PatchDTO</span></code> class is defined for the <code class="docutils literal notranslate"><span class="pre">Person</span></code> class. The <code class="docutils literal notranslate"><span class="pre">config</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">PatchDTO</span></code> is set to exclude the
<code class="docutils literal notranslate"><span class="pre">id</span></code> field, preventing clients from setting it when updating a person, and the <code class="docutils literal notranslate"><span class="pre">partial</span></code> attribute is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>,
which allows the DTO to accept a subset of the model attributes.</p>
<p>Inside the handler, the <a class="reference internal" href="../../reference/dto/data_structures.html#litestar.dto.data_structures.DTOData.update_instance" title="litestar.dto.data_structures.DTOData.update_instance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DTOData.update_instance</span></code></a> method is called
to update the instance of <code class="docutils literal notranslate"><span class="pre">Person</span></code> before returning it.</p>
<p>In our request, we update only the <code class="docutils literal notranslate"><span class="pre">name</span></code> property of the <code class="docutils literal notranslate"><span class="pre">Person</span></code>, from <code class="docutils literal notranslate"><span class="pre">&quot;Peter&quot;</span></code> to <code class="docutils literal notranslate"><span class="pre">&quot;Peter</span> <span class="pre">Pan&quot;</span></code> and receive
the full object - with the modified name - back in the response.</p>
</section>
<section id="implicit-private-fields">
<h2>Implicit Private Fields<a class="headerlink" href="#implicit-private-fields" title="Link to this heading">¶</a></h2>
<p>Fields that are named with a leading underscore are considered “private” by default. This means that they will not be
parsed from client data, and will not be serialized into return data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
</span><span data-line="2"><span class="linenos"> 2</span>
</span><span data-line="3"><span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">post</span>
</span><span data-line="4"><span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataclassDTO</span>
</span><span data-line="5"><span class="linenos"> 5</span>
</span><span data-line="6"><span class="linenos"> 6</span>
</span><span data-line="7"><span class="linenos"> 7</span><span class="nd">@dataclass</span>
</span><span data-line="8"><span class="linenos"> 8</span><span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="p">:</span>
</span><span data-line="9"><span class="linenos"> 9</span>    <span class="n">this_will</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="10"><span class="linenos">10</span>    <span class="n">_this_will</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Mars&quot;</span>
</span><span data-line="11"><span class="linenos">11</span>
</span><span data-line="12"><span class="linenos">12</span>
</span><span data-line="13"><span class="linenos">13</span><span class="nd">@post</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">DataclassDTO</span><span class="p">[</span><span class="n">Foo</span><span class="p">],</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span data-line="14"><span class="linenos">14</span><span class="k">def</span><span class="w"> </span><span class="nf">handler</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">Foo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Foo</span><span class="p">:</span>
</span><span data-line="15"><span class="linenos">15</span>    <span class="k">return</span> <span class="n">data</span>
</span><span data-line="16"><span class="linenos">16</span>
</span><span data-line="17"><span class="linenos">17</span>
</span><span data-line="18"><span class="linenos">18</span><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">route_handlers</span><span class="o">=</span><span class="p">[</span><span class="n">handler</span><span class="p">])</span>
</span></pre></div>
</div>
<div class="admonition">
<p class="admonition-title">Run it</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span data-line="1">&gt;<span class="w"> </span>curl<span class="w"> </span>http://127.0.0.1:8000/<span class="w"> </span>-H<span class="w"> </span>Content-Type:<span class="w"> </span>application/json<span class="w"> </span>-d<span class="w"> </span><span class="o">{</span><span class="s2">&quot;bar&quot;</span>:<span class="s2">&quot;stay&quot;</span>,<span class="s2">&quot;_baz&quot;</span>:<span class="s2">&quot;go_away!&quot;</span><span class="o">}</span>
</span><span data-line="2"><span class="o">{</span><span class="s2">&quot;status_code&quot;</span>:400,<span class="s2">&quot;detail&quot;</span>:<span class="s2">&quot;Object missing required field `this_will`&quot;</span><span class="o">}</span>
</span></pre></div>
</div>
</div>
<p>This can be overridden by setting the
<a class="reference internal" href="../../reference/dto/config.html#litestar.dto.config.DTOConfig.underscore_fields_private" title="litestar.dto.config.DTOConfig.underscore_fields_private"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DTOConfig.leading_underscore_private</span></code></a> attribute to
<code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
</span><span data-line="2"><span class="linenos"> 2</span>
</span><span data-line="3"><span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">post</span>
</span><span data-line="4"><span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">DataclassDTO</span><span class="p">,</span> <span class="n">DTOConfig</span>
</span><span data-line="5"><span class="linenos"> 5</span>
</span><span data-line="6"><span class="linenos"> 6</span>
</span><span data-line="7"><span class="linenos"> 7</span><span class="nd">@dataclass</span>
</span><span data-line="8"><span class="linenos"> 8</span><span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="p">:</span>
</span><span data-line="9"><span class="linenos"> 9</span>    <span class="n">this_will</span><span class="p">:</span> <span class="nb">str</span>
</span><span data-line="10"><span class="linenos">10</span>    <span class="n">_this_will</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;not_go_away!&quot;</span>
</span><span data-line="11"><span class="linenos">11</span>
</span><span data-line="12"><span class="linenos">12</span>
</span><span data-line="13"><span class="linenos">13</span><span class="k">class</span><span class="w"> </span><span class="nc">DTO</span><span class="p">(</span><span class="n">DataclassDTO</span><span class="p">[</span><span class="n">Foo</span><span class="p">]):</span>
</span><span data-line="14"><span class="hll"><span class="linenos">14</span>    <span class="n">config</span> <span class="o">=</span> <span class="n">DTOConfig</span><span class="p">(</span><span class="n">underscore_fields_private</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span data-line="15"><span class="hll"><span class="linenos">15</span>
</span></span><span data-line="16"><span class="linenos">16</span>
</span><span data-line="17"><span class="linenos">17</span><span class="nd">@post</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">DTO</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span data-line="18"><span class="linenos">18</span><span class="k">def</span><span class="w"> </span><span class="nf">handler</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">Foo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Foo</span><span class="p">:</span>
</span><span data-line="19"><span class="linenos">19</span>    <span class="k">return</span> <span class="n">data</span>
</span><span data-line="20"><span class="linenos">20</span>
</span><span data-line="21"><span class="linenos">21</span>
</span><span data-line="22"><span class="linenos">22</span><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">route_handlers</span><span class="o">=</span><span class="p">[</span><span class="n">handler</span><span class="p">])</span>
</span></pre></div>
</div>
<div class="admonition">
<p class="admonition-title">Run it</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span data-line="1">&gt;<span class="w"> </span>curl<span class="w"> </span>http://127.0.0.1:8000/<span class="w"> </span>-H<span class="w"> </span>Content-Type:<span class="w"> </span>application/json<span class="w"> </span>-d<span class="w"> </span><span class="o">{</span><span class="s2">&quot;this_will&quot;</span>:<span class="s2">&quot;stay&quot;</span>,<span class="s2">&quot;_this_will&quot;</span>:<span class="s2">&quot;not_go_away!&quot;</span><span class="o">}</span>
</span><span data-line="2"><span class="o">{</span><span class="s2">&quot;this_will&quot;</span>:<span class="s2">&quot;stay&quot;</span>,<span class="s2">&quot;_this_will&quot;</span>:<span class="s2">&quot;not_go_away!&quot;</span><span class="o">}</span>
</span></pre></div>
</div>
</div>
</section>
<section id="wrapping-return-data">
<h2>Wrapping Return Data<a class="headerlink" href="#wrapping-return-data" title="Link to this heading">¶</a></h2>
<p>Litestar’s DTO Factory types are versatile enough to manage your data, even when it’s nested within generic wrappers.</p>
<p>The following example demonstrates a route handler that returns DTO managed data wrapped in a generic type. The
wrapper is used to deliver additional metadata about the response - in this case, a count of the number of items
returned. Read on for an explanation of how to do this yourself.</p>
<div class="sd-tab-set docutils">
<input id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" data-sync-group="tab" data-sync-id="3.8" for="sd-tab-item-0">
Python 3.8+</label><div class="sd-tab-content docutils">
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">Enveloping Return Data</span><a class="headerlink" href="#id10" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
</span><span data-line="2"><span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
</span><span data-line="3"><span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span>
</span><span data-line="4"><span class="linenos"> 4</span>
</span><span data-line="5"><span class="linenos"> 5</span><span class="kn">from</span><span class="w"> </span><span class="nn">advanced_alchemy.extensions.litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyDTO</span>
</span><span data-line="6"><span class="linenos"> 6</span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">Mapped</span>
</span><span data-line="7"><span class="linenos"> 7</span>
</span><span data-line="8"><span class="linenos"> 8</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">get</span>
</span><span data-line="9"><span class="linenos"> 9</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">DTOConfig</span>
</span><span data-line="10"><span class="linenos">10</span>
</span><span data-line="11"><span class="linenos">11</span><span class="kn">from</span><span class="w"> </span><span class="nn">.my_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Base</span>
</span><span data-line="12"><span class="linenos">12</span>
</span><span data-line="13"><span class="linenos">13</span><span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">)</span>
</span><span data-line="14"><span class="linenos">14</span>
</span><span data-line="15"><span class="linenos">15</span>
</span><span data-line="16"><span class="linenos">16</span><span class="nd">@dataclass</span>
</span><span data-line="17"><span class="linenos">17</span><span class="k">class</span><span class="w"> </span><span class="nc">WithCount</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
</span><span data-line="18"><span class="linenos">18</span>    <span class="n">count</span><span class="p">:</span> <span class="nb">int</span>
</span><span data-line="19"><span class="linenos">19</span>    <span class="n">data</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">T</span><span class="p">]</span>
</span><span data-line="20"><span class="linenos">20</span>
</span><span data-line="21"><span class="linenos">21</span>
</span><span data-line="22"><span class="linenos">22</span><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span data-line="23"><span class="linenos">23</span>    <span class="n">name</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="24"><span class="linenos">24</span>    <span class="n">password</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="25"><span class="linenos">25</span>    <span class="n">created_at</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span>
</span><span data-line="26"><span class="linenos">26</span>
</span><span data-line="27"><span class="linenos">27</span>
</span><span data-line="28"><span class="linenos">28</span><span class="k">class</span><span class="w"> </span><span class="nc">UserDTO</span><span class="p">(</span><span class="n">SQLAlchemyDTO</span><span class="p">[</span><span class="n">User</span><span class="p">]):</span>
</span><span data-line="29"><span class="linenos">29</span>    <span class="n">config</span> <span class="o">=</span> <span class="n">DTOConfig</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;password&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">})</span>
</span><span data-line="30"><span class="linenos">30</span>
</span><span data-line="31"><span class="linenos">31</span>
</span><span data-line="32"><span class="linenos">32</span><span class="nd">@get</span><span class="p">(</span><span class="s2">&quot;/users&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">UserDTO</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span data-line="33"><span class="linenos">33</span><span class="k">def</span><span class="w"> </span><span class="nf">get_users</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">WithCount</span><span class="p">[</span><span class="n">User</span><span class="p">]:</span>
</span><span data-line="34"><span class="linenos">34</span>    <span class="k">return</span> <span class="n">WithCount</span><span class="p">(</span>
</span><span data-line="35"><span class="linenos">35</span>        <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span data-line="36"><span class="linenos">36</span>        <span class="n">data</span><span class="o">=</span><span class="p">[</span>
</span><span data-line="37"><span class="linenos">37</span>            <span class="n">User</span><span class="p">(</span>
</span><span data-line="38"><span class="linenos">38</span>                <span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span data-line="39"><span class="linenos">39</span>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Litestar User&quot;</span><span class="p">,</span>
</span><span data-line="40"><span class="linenos">40</span>                <span class="n">password</span><span class="o">=</span><span class="s2">&quot;xyz&quot;</span><span class="p">,</span>
</span><span data-line="41"><span class="linenos">41</span>                <span class="n">created_at</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
</span><span data-line="42"><span class="linenos">42</span>            <span class="p">),</span>
</span><span data-line="43"><span class="linenos">43</span>        <span class="p">],</span>
</span><span data-line="44"><span class="linenos">44</span>    <span class="p">)</span>
</span><span data-line="45"><span class="linenos">45</span>
</span><span data-line="46"><span class="linenos">46</span>
</span><span data-line="47"><span class="linenos">47</span><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">route_handlers</span><span class="o">=</span><span class="p">[</span><span class="n">get_users</span><span class="p">])</span>
</span></pre></div>
</div>
</div>
</div>
<input checked="checked" id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" data-sync-group="tab" data-sync-id="3.12" for="sd-tab-item-1">
Python 3.12+</label><div class="sd-tab-content docutils">
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">Enveloping Return Data</span><a class="headerlink" href="#id11" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
</span><span data-line="2"><span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
</span><span data-line="3"><span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypeVar</span>
</span><span data-line="4"><span class="linenos"> 4</span>
</span><span data-line="5"><span class="linenos"> 5</span><span class="kn">from</span><span class="w"> </span><span class="nn">advanced_alchemy.extensions.litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyDTO</span>
</span><span data-line="6"><span class="linenos"> 6</span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">Mapped</span>
</span><span data-line="7"><span class="linenos"> 7</span>
</span><span data-line="8"><span class="linenos"> 8</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">get</span>
</span><span data-line="9"><span class="linenos"> 9</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">DTOConfig</span>
</span><span data-line="10"><span class="linenos">10</span>
</span><span data-line="11"><span class="linenos">11</span><span class="kn">from</span><span class="w"> </span><span class="nn">.my_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Base</span>
</span><span data-line="12"><span class="linenos">12</span>
</span><span data-line="13"><span class="linenos">13</span><span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">)</span>
</span><span data-line="14"><span class="linenos">14</span>
</span><span data-line="15"><span class="linenos">15</span>
</span><span data-line="16"><span class="linenos">16</span><span class="nd">@dataclass</span>
</span><span data-line="17"><span class="linenos">17</span><span class="k">class</span><span class="w"> </span><span class="nc">WithCount</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
</span><span data-line="18"><span class="linenos">18</span>    <span class="n">count</span><span class="p">:</span> <span class="nb">int</span>
</span><span data-line="19"><span class="linenos">19</span>    <span class="n">data</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">T</span><span class="p">]</span>
</span><span data-line="20"><span class="linenos">20</span>
</span><span data-line="21"><span class="linenos">21</span>
</span><span data-line="22"><span class="linenos">22</span><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span data-line="23"><span class="linenos">23</span>    <span class="n">name</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="24"><span class="linenos">24</span>    <span class="n">password</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="25"><span class="linenos">25</span>    <span class="n">created_at</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span>
</span><span data-line="26"><span class="linenos">26</span>
</span><span data-line="27"><span class="linenos">27</span>
</span><span data-line="28"><span class="linenos">28</span><span class="k">class</span><span class="w"> </span><span class="nc">UserDTO</span><span class="p">(</span><span class="n">SQLAlchemyDTO</span><span class="p">[</span><span class="n">User</span><span class="p">]):</span>
</span><span data-line="29"><span class="linenos">29</span>    <span class="n">config</span> <span class="o">=</span> <span class="n">DTOConfig</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;password&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">})</span>
</span><span data-line="30"><span class="linenos">30</span>
</span><span data-line="31"><span class="linenos">31</span>
</span><span data-line="32"><span class="linenos">32</span><span class="nd">@get</span><span class="p">(</span><span class="s2">&quot;/users&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">UserDTO</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span data-line="33"><span class="linenos">33</span><span class="k">def</span><span class="w"> </span><span class="nf">get_users</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">WithCount</span><span class="p">[</span><span class="n">User</span><span class="p">]:</span>
</span><span data-line="34"><span class="linenos">34</span>    <span class="k">return</span> <span class="n">WithCount</span><span class="p">(</span>
</span><span data-line="35"><span class="linenos">35</span>        <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span data-line="36"><span class="linenos">36</span>        <span class="n">data</span><span class="o">=</span><span class="p">[</span>
</span><span data-line="37"><span class="linenos">37</span>            <span class="n">User</span><span class="p">(</span>
</span><span data-line="38"><span class="linenos">38</span>                <span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span data-line="39"><span class="linenos">39</span>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Litestar User&quot;</span><span class="p">,</span>
</span><span data-line="40"><span class="linenos">40</span>                <span class="n">password</span><span class="o">=</span><span class="s2">&quot;xyz&quot;</span><span class="p">,</span>
</span><span data-line="41"><span class="linenos">41</span>                <span class="n">created_at</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
</span><span data-line="42"><span class="linenos">42</span>            <span class="p">),</span>
</span><span data-line="43"><span class="linenos">43</span>        <span class="p">],</span>
</span><span data-line="44"><span class="linenos">44</span>    <span class="p">)</span>
</span><span data-line="45"><span class="linenos">45</span>
</span><span data-line="46"><span class="linenos">46</span>
</span><span data-line="47"><span class="linenos">47</span><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">route_handlers</span><span class="o">=</span><span class="p">[</span><span class="n">get_users</span><span class="p">])</span>
</span></pre></div>
</div>
</div>
</div>
</div>
<div class="admonition">
<p class="admonition-title">Run it</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span data-line="1">&gt;<span class="w"> </span>curl<span class="w"> </span>http://127.0.0.1:8000/users
</span><span data-line="2"><span class="o">{</span><span class="s2">&quot;count&quot;</span>:1,<span class="s2">&quot;data&quot;</span>:<span class="o">[{</span><span class="s2">&quot;id&quot;</span>:1,<span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Litestar User&quot;</span><span class="o">}]}</span>
</span></pre></div>
</div>
</div>
<p>First, create a generic dataclass to act as your wrapper. This type will contain your data and any additional
attributes you might need. In this example, we have a <code class="docutils literal notranslate"><span class="pre">WithCount</span></code> dataclass which has a <code class="docutils literal notranslate"><span class="pre">count</span></code> attribute.
The wrapper must be a python generic type with one or more type parameters, and at least one of those type parameters
should describe an instance attribute that will be populated with the data.</p>
<div class="sd-tab-set docutils">
<input id="sd-tab-item-2" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" data-sync-group="tab" data-sync-id="3.8" for="sd-tab-item-2">
Python 3.8+</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span>
</span><span data-line="3">
</span><span data-line="4"><span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">)</span>
</span><span data-line="5">
</span><span data-line="6">
</span><span data-line="7"><span class="nd">@dataclass</span>
</span><span data-line="8"><span class="k">class</span><span class="w"> </span><span class="nc">WithCount</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
</span><span data-line="9">    <span class="n">count</span><span class="p">:</span> <span class="nb">int</span>
</span><span data-line="10">    <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">T</span><span class="p">]</span>
</span></pre></div>
</div>
</div>
<input checked="checked" id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" data-sync-group="tab" data-sync-id="3.12" for="sd-tab-item-3">
Python 3.12+</label><div class="sd-tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypeVar</span>
</span><span data-line="3">
</span><span data-line="4"><span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">)</span>
</span><span data-line="5">
</span><span data-line="6">
</span><span data-line="7"><span class="nd">@dataclass</span>
</span><span data-line="8"><span class="k">class</span><span class="w"> </span><span class="nc">WithCount</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
</span><span data-line="9">    <span class="n">count</span><span class="p">:</span> <span class="nb">int</span>
</span><span data-line="10">    <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">T</span><span class="p">]</span>
</span></pre></div>
</div>
</div>
</div>
<p>Now, create a DTO for your data object and configure it using <code class="docutils literal notranslate"><span class="pre">DTOConfig</span></code>. In this example, we’re excluding
<code class="docutils literal notranslate"><span class="pre">password</span></code> and <code class="docutils literal notranslate"><span class="pre">created_at</span></code> from the final output.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">advanced_alchemy.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyDTO</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">DTOConfig</span>
</span><span data-line="3">
</span><span data-line="4">
</span><span data-line="5"><span class="k">class</span><span class="w"> </span><span class="nc">UserDTO</span><span class="p">(</span><span class="n">SQLAlchemyDTO</span><span class="p">[</span><span class="n">User</span><span class="p">]):</span>
</span><span data-line="6">    <span class="n">config</span> <span class="o">=</span> <span class="n">DTOConfig</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;password&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">})</span>
</span></pre></div>
</div>
<p>Then, set up your route handler. This example sets up a <code class="docutils literal notranslate"><span class="pre">/users</span></code> endpoint, where a list of <code class="docutils literal notranslate"><span class="pre">User</span></code> objects is
returned, wrapped in the <code class="docutils literal notranslate"><span class="pre">WithCount</span></code> dataclass.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">get</span>
</span><span data-line="2">
</span><span data-line="3">
</span><span data-line="4"><span class="nd">@get</span><span class="p">(</span><span class="s2">&quot;/users&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">UserDTO</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span data-line="5"><span class="k">def</span><span class="w"> </span><span class="nf">get_users</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">WithCount</span><span class="p">[</span><span class="n">User</span><span class="p">]:</span>
</span><span data-line="6">    <span class="k">return</span> <span class="n">WithCount</span><span class="p">(</span>
</span><span data-line="7">        <span class="n">count</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span data-line="8">        <span class="n">data</span><span class="o">=</span><span class="p">[</span>
</span><span data-line="9">            <span class="n">User</span><span class="p">(</span>
</span><span data-line="10">                <span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span data-line="11">                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Litestar User&quot;</span><span class="p">,</span>
</span><span data-line="12">                <span class="n">password</span><span class="o">=</span><span class="s2">&quot;xyz&quot;</span><span class="p">,</span>
</span><span data-line="13">                <span class="n">created_at</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
</span><span data-line="14">            <span class="p">),</span>
</span><span data-line="15">        <span class="p">],</span>
</span><span data-line="16">    <span class="p">)</span>
</span></pre></div>
</div>
<p>This setup allows the DTO to manage the rendering of <code class="docutils literal notranslate"><span class="pre">User</span></code> objects into the response. The DTO Factory type will find
the attribute on the wrapper type that holds the data and perform its serialization operations upon it.</p>
<p>Returning enveloped data is subject to the following constraints:</p>
<ol class="arabic simple">
<li><p>The type returned from the handler must be a type that Litestar can natively encode.</p></li>
<li><p>There can be multiple type arguments to the generic wrapper type, but there must be exactly one type argument to the
generic wrapper that is a type supported by the DTO.</p></li>
</ol>
</section>
<section id="working-with-litestar-s-pagination-types">
<h2>Working with Litestar’s Pagination Types<a class="headerlink" href="#working-with-litestar-s-pagination-types" title="Link to this heading">¶</a></h2>
<p>Litestar offers paginated response wrapper types, and DTO Factory types can handle this out of the box.</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">Paginated Return Data</span><a class="headerlink" href="#id12" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
</span><span data-line="2"><span class="linenos"> 2</span>
</span><span data-line="3"><span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">advanced_alchemy.extensions.litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyDTO</span>
</span><span data-line="4"><span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">Mapped</span>
</span><span data-line="5"><span class="linenos"> 5</span>
</span><span data-line="6"><span class="linenos"> 6</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">get</span>
</span><span data-line="7"><span class="linenos"> 7</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">DTOConfig</span>
</span><span data-line="8"><span class="linenos"> 8</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.pagination</span><span class="w"> </span><span class="kn">import</span> <span class="n">ClassicPagination</span>
</span><span data-line="9"><span class="linenos"> 9</span>
</span><span data-line="10"><span class="linenos">10</span><span class="kn">from</span><span class="w"> </span><span class="nn">.my_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Base</span>
</span><span data-line="11"><span class="linenos">11</span>
</span><span data-line="12"><span class="linenos">12</span>
</span><span data-line="13"><span class="linenos">13</span><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span data-line="14"><span class="linenos">14</span>    <span class="n">name</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="15"><span class="linenos">15</span>    <span class="n">password</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="16"><span class="linenos">16</span>    <span class="n">created_at</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span>
</span><span data-line="17"><span class="linenos">17</span>
</span><span data-line="18"><span class="linenos">18</span>
</span><span data-line="19"><span class="linenos">19</span><span class="k">class</span><span class="w"> </span><span class="nc">UserDTO</span><span class="p">(</span><span class="n">SQLAlchemyDTO</span><span class="p">[</span><span class="n">User</span><span class="p">]):</span>
</span><span data-line="20"><span class="linenos">20</span>    <span class="n">config</span> <span class="o">=</span> <span class="n">DTOConfig</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;password&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">})</span>
</span><span data-line="21"><span class="linenos">21</span>
</span><span data-line="22"><span class="linenos">22</span>
</span><span data-line="23"><span class="linenos">23</span><span class="nd">@get</span><span class="p">(</span><span class="s2">&quot;/users&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">UserDTO</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span data-line="24"><span class="linenos">24</span><span class="k">def</span><span class="w"> </span><span class="nf">get_users</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">ClassicPagination</span><span class="p">[</span><span class="n">User</span><span class="p">]:</span>
</span><span data-line="25"><span class="linenos">25</span>    <span class="k">return</span> <span class="n">ClassicPagination</span><span class="p">(</span>
</span><span data-line="26"><span class="linenos">26</span>        <span class="n">page_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span><span data-line="27"><span class="linenos">27</span>        <span class="n">total_pages</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span data-line="28"><span class="linenos">28</span>        <span class="n">current_page</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span data-line="29"><span class="linenos">29</span>        <span class="n">items</span><span class="o">=</span><span class="p">[</span>
</span><span data-line="30"><span class="linenos">30</span>            <span class="n">User</span><span class="p">(</span>
</span><span data-line="31"><span class="linenos">31</span>                <span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span data-line="32"><span class="linenos">32</span>                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Litestar User&quot;</span><span class="p">,</span>
</span><span data-line="33"><span class="linenos">33</span>                <span class="n">password</span><span class="o">=</span><span class="s2">&quot;xyz&quot;</span><span class="p">,</span>
</span><span data-line="34"><span class="linenos">34</span>                <span class="n">created_at</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
</span><span data-line="35"><span class="linenos">35</span>            <span class="p">),</span>
</span><span data-line="36"><span class="linenos">36</span>        <span class="p">],</span>
</span><span data-line="37"><span class="linenos">37</span>    <span class="p">)</span>
</span><span data-line="38"><span class="linenos">38</span>
</span><span data-line="39"><span class="linenos">39</span>
</span><span data-line="40"><span class="linenos">40</span><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">route_handlers</span><span class="o">=</span><span class="p">[</span><span class="n">get_users</span><span class="p">])</span>
</span></pre></div>
</div>
</div>
<div class="admonition">
<p class="admonition-title">Run it</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span data-line="1">&gt;<span class="w"> </span>curl<span class="w"> </span>http://127.0.0.1:8000/users
</span><span data-line="2"><span class="o">{</span><span class="s2">&quot;items&quot;</span>:<span class="o">[{</span><span class="s2">&quot;id&quot;</span>:1,<span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Litestar User&quot;</span><span class="o">}]</span>,<span class="s2">&quot;page_size&quot;</span>:10,<span class="s2">&quot;current_page&quot;</span>:1,<span class="s2">&quot;total_pages&quot;</span>:1<span class="o">}</span>
</span></pre></div>
</div>
</div>
<p>The DTO is defined and configured, in our example, we’re excluding <code class="docutils literal notranslate"><span class="pre">password</span></code> and <code class="docutils literal notranslate"><span class="pre">created_at</span></code> fields from the final
representation of our users.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">advanced_alchemy.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyDTO</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">DTOConfig</span>
</span><span data-line="3">
</span><span data-line="4">
</span><span data-line="5"><span class="k">class</span><span class="w"> </span><span class="nc">UserDTO</span><span class="p">(</span><span class="n">SQLAlchemyDTO</span><span class="p">[</span><span class="n">User</span><span class="p">]):</span>
</span><span data-line="6">    <span class="n">config</span> <span class="o">=</span> <span class="n">DTOConfig</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;password&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">})</span>
</span></pre></div>
</div>
<p>The example sets up a <code class="docutils literal notranslate"><span class="pre">/users</span></code> endpoint, where a paginated list of <code class="docutils literal notranslate"><span class="pre">User</span></code> objects is returned, wrapped in
<a class="reference internal" href="../../reference/pagination.html#litestar.pagination.ClassicPagination" title="litestar.pagination.ClassicPagination"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClassicPagination</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">get</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.pagination</span><span class="w"> </span><span class="kn">import</span> <span class="n">ClassicPagination</span>
</span><span data-line="3">
</span><span data-line="4">
</span><span data-line="5"><span class="nd">@get</span><span class="p">(</span><span class="s2">&quot;/users&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">UserDTO</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span data-line="6"><span class="k">def</span><span class="w"> </span><span class="nf">get_users</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">ClassicPagination</span><span class="p">[</span><span class="n">User</span><span class="p">]:</span>
</span><span data-line="7">    <span class="k">return</span> <span class="n">ClassicPagination</span><span class="p">(</span>
</span><span data-line="8">        <span class="n">page_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span><span data-line="9">        <span class="n">total_pages</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span data-line="10">        <span class="n">current_page</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span data-line="11">        <span class="n">items</span><span class="o">=</span><span class="p">[</span>
</span><span data-line="12">            <span class="n">User</span><span class="p">(</span>
</span><span data-line="13">                <span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span data-line="14">                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Litestar User&quot;</span><span class="p">,</span>
</span><span data-line="15">                <span class="n">password</span><span class="o">=</span><span class="s2">&quot;xyz&quot;</span><span class="p">,</span>
</span><span data-line="16">                <span class="n">created_at</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
</span><span data-line="17">            <span class="p">),</span>
</span><span data-line="18">        <span class="p">],</span>
</span><span data-line="19">    <span class="p">)</span>
</span></pre></div>
</div>
<p>The <a class="reference internal" href="../../reference/pagination.html#litestar.pagination.ClassicPagination" title="litestar.pagination.ClassicPagination"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClassicPagination</span></code></a> class contains <code class="docutils literal notranslate"><span class="pre">page_size</span></code> (number of items per page),
<code class="docutils literal notranslate"><span class="pre">total_pages</span></code> (total number of pages), <code class="docutils literal notranslate"><span class="pre">current_page</span></code> (current page number), and <code class="docutils literal notranslate"><span class="pre">items</span></code> (items for the current
page).</p>
<p>The DTO operates on the data contained in the <code class="docutils literal notranslate"><span class="pre">items</span></code> attribute, and the pagination wrapper is handled automatically
by Litestar’s serialization process.</p>
</section>
<section id="using-litestar-s-response-type-with-dto-factory">
<h2>Using Litestar’s Response Type with DTO Factory<a class="headerlink" href="#using-litestar-s-response-type-with-dto-factory" title="Link to this heading">¶</a></h2>
<p>Litestar’s DTO (Data Transfer Object) Factory Types can handle data wrapped in a <code class="docutils literal notranslate"><span class="pre">Response</span></code> type.</p>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">Response Wrapped Return Data</span><a class="headerlink" href="#id13" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
</span><span data-line="2"><span class="linenos"> 2</span>
</span><span data-line="3"><span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">advanced_alchemy.extensions.litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyDTO</span>
</span><span data-line="4"><span class="linenos"> 4</span><span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">Mapped</span>
</span><span data-line="5"><span class="linenos"> 5</span>
</span><span data-line="6"><span class="linenos"> 6</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">Response</span><span class="p">,</span> <span class="n">get</span>
</span><span data-line="7"><span class="linenos"> 7</span><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">DTOConfig</span>
</span><span data-line="8"><span class="linenos"> 8</span>
</span><span data-line="9"><span class="linenos"> 9</span><span class="kn">from</span><span class="w"> </span><span class="nn">.my_lib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Base</span>
</span><span data-line="10"><span class="linenos">10</span>
</span><span data-line="11"><span class="linenos">11</span>
</span><span data-line="12"><span class="linenos">12</span><span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span data-line="13"><span class="linenos">13</span>    <span class="n">name</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="14"><span class="linenos">14</span>    <span class="n">password</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span data-line="15"><span class="linenos">15</span>    <span class="n">created_at</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span>
</span><span data-line="16"><span class="linenos">16</span>
</span><span data-line="17"><span class="linenos">17</span>
</span><span data-line="18"><span class="linenos">18</span><span class="k">class</span><span class="w"> </span><span class="nc">UserDTO</span><span class="p">(</span><span class="n">SQLAlchemyDTO</span><span class="p">[</span><span class="n">User</span><span class="p">]):</span>
</span><span data-line="19"><span class="linenos">19</span>    <span class="n">config</span> <span class="o">=</span> <span class="n">DTOConfig</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;password&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">})</span>
</span><span data-line="20"><span class="linenos">20</span>
</span><span data-line="21"><span class="linenos">21</span>
</span><span data-line="22"><span class="linenos">22</span><span class="nd">@get</span><span class="p">(</span><span class="s2">&quot;/users&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">UserDTO</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span data-line="23"><span class="linenos">23</span><span class="k">def</span><span class="w"> </span><span class="nf">get_users</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Response</span><span class="p">[</span><span class="n">User</span><span class="p">]:</span>
</span><span data-line="24"><span class="linenos">24</span>    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span>
</span><span data-line="25"><span class="linenos">25</span>        <span class="n">content</span><span class="o">=</span><span class="n">User</span><span class="p">(</span>
</span><span data-line="26"><span class="linenos">26</span>            <span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span data-line="27"><span class="linenos">27</span>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Litestar User&quot;</span><span class="p">,</span>
</span><span data-line="28"><span class="linenos">28</span>            <span class="n">password</span><span class="o">=</span><span class="s2">&quot;xyz&quot;</span><span class="p">,</span>
</span><span data-line="29"><span class="linenos">29</span>            <span class="n">created_at</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
</span><span data-line="30"><span class="linenos">30</span>        <span class="p">),</span>
</span><span data-line="31"><span class="linenos">31</span>        <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;X-Total-Count&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">},</span>
</span><span data-line="32"><span class="linenos">32</span>    <span class="p">)</span>
</span><span data-line="33"><span class="linenos">33</span>
</span><span data-line="34"><span class="linenos">34</span>
</span><span data-line="35"><span class="linenos">35</span><span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">route_handlers</span><span class="o">=</span><span class="p">[</span><span class="n">get_users</span><span class="p">])</span>
</span></pre></div>
</div>
</div>
<div class="admonition">
<p class="admonition-title">Run it</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span data-line="1">&gt;<span class="w"> </span>curl<span class="w"> </span>http://127.0.0.1:8000/users
</span><span data-line="2"><span class="o">{</span><span class="s2">&quot;id&quot;</span>:1,<span class="s2">&quot;name&quot;</span>:<span class="s2">&quot;Litestar User&quot;</span><span class="o">}</span>
</span></pre></div>
</div>
</div>
<p>We create a DTO for the <code class="docutils literal notranslate"><span class="pre">User</span></code> type and configure it using <code class="docutils literal notranslate"><span class="pre">DTOConfig</span></code> to exclude <code class="docutils literal notranslate"><span class="pre">password</span></code> and <code class="docutils literal notranslate"><span class="pre">created_at</span></code>
from the serialized output.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">advanced_alchemy.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQLAlchemyDTO</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar.dto</span><span class="w"> </span><span class="kn">import</span> <span class="n">DTOConfig</span>
</span><span data-line="3">
</span><span data-line="4">
</span><span data-line="5"><span class="k">class</span><span class="w"> </span><span class="nc">UserDTO</span><span class="p">(</span><span class="n">SQLAlchemyDTO</span><span class="p">[</span><span class="n">User</span><span class="p">]):</span>
</span><span data-line="6">    <span class="n">config</span> <span class="o">=</span> <span class="n">DTOConfig</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;password&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">})</span>
</span></pre></div>
</div>
<p>The example sets up a <code class="docutils literal notranslate"><span class="pre">/users</span></code> endpoint where a <code class="docutils literal notranslate"><span class="pre">User</span></code> object is returned wrapped in a <code class="docutils literal notranslate"><span class="pre">Response</span></code> type.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">litestar</span><span class="w"> </span><span class="kn">import</span> <span class="n">get</span><span class="p">,</span> <span class="n">Response</span>
</span><span data-line="2">
</span><span data-line="3">
</span><span data-line="4"><span class="nd">@get</span><span class="p">(</span><span class="s2">&quot;/users&quot;</span><span class="p">,</span> <span class="n">dto</span><span class="o">=</span><span class="n">UserDTO</span><span class="p">,</span> <span class="n">sync_to_thread</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span data-line="5"><span class="k">def</span><span class="w"> </span><span class="nf">get_users</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Response</span><span class="p">[</span><span class="n">User</span><span class="p">]:</span>
</span><span data-line="6">    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span>
</span><span data-line="7">        <span class="n">content</span><span class="o">=</span><span class="n">User</span><span class="p">(</span>
</span><span data-line="8">            <span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
</span><span data-line="9">            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Litestar User&quot;</span><span class="p">,</span>
</span><span data-line="10">            <span class="n">password</span><span class="o">=</span><span class="s2">&quot;xyz&quot;</span><span class="p">,</span>
</span><span data-line="11">            <span class="n">created_at</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
</span><span data-line="12">        <span class="p">),</span>
</span><span data-line="13">        <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;X-Total-Count&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">},</span>
</span><span data-line="14">    <span class="p">)</span>
</span></pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Response</span></code> object encapsulates the <code class="docutils literal notranslate"><span class="pre">User</span></code> object in its <code class="docutils literal notranslate"><span class="pre">content</span></code> attribute and allows us to configure the
response received by the client. In this case, we add a custom header.</p>
</section>
</section>

        </article><button class="back-to-top" type="button">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
  </svg>
  <span>Back to top</span>
</button><div class="navigation flex print:hidden"><div class="navigation-prev">
    <a href="0-basic-use.html">
      <i class="i-lucide chevron-left"></i>
      <div class="page-info">
        <span>Previous</span><div class="title">Basic Use</div></div>
    </a>
  </div><div class="navigation-next">
    <a href="2-creating-custom-dto-classes.html">
      <div class="page-info">
        <span>Next</span>
        <div class="title">Implementing Custom DTO Classes</div>
      </div>
      <i class="i-lucide chevron-right"></i>
    </a>
  </div></div></div>
    </div>
  </main>
</div>
<footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright"><p>2025, Litestar Organization</p>
  
  <p>
    Made with
    
    <a href="https://www.sphinx-doc.org/">Sphinx</a> and
    
    <a href="https://shibuya.lepture.com">Shibuya theme</a>.
  </p>
</div>
      <div class="sy-foot-socials">
<a href="https://twitter.com/LitestarAPI" aria-label="X (Twitter)">
  <iconify-icon icon="prime:twitter"></iconify-icon>
</a>
<a href="https://discord.gg/litestar" aria-label="Discord">
  <iconify-icon icon="simple-icons:discord"></iconify-icon>
</a>
<a href="https://www.reddit.com/r/LitestarAPI" aria-label="Reddit">
  <iconify-icon icon="simple-icons:reddit"></iconify-icon>
</a></div>
    </div>
  </div>
</footer>
      <script src="../../_static/documentation_options.js?v=ad404a94"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../_static/litestar-theme.js?v=ab2dcc9e"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
      <script src="../../_static/design-tabs.js?v=f930bc37"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script src="../../_static/shibuya.js?v=c477d091"></script>
      <script src="../../_static/versioning.js?v=9ab184b9"></script></body>
</html>